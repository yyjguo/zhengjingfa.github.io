<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript简明教程（全） | Afanail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="JavaScript与Java没有半毛钱关系，网景公司员工Brendan Eich用了10天时间设计了JavaScript语言。 JavaScript的范围JavaScript的范围：BOM + DOM + ECMAScript BOM简单说明123456BOM即Browser Object Mode,浏览器对象模型。BOM提供了独立于内容而与浏览器窗口进行交互的对象。BOM由一系列相关的对象构成">
<meta name="keywords" content="JavaScript,简明教程">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript简明教程（全）">
<meta property="og:url" content="http://www.afanail.com/2016/12/29/javaScript简明教程（全）/index.html">
<meta property="og:site_name" content="Afanail">
<meta property="og:description" content="JavaScript与Java没有半毛钱关系，网景公司员工Brendan Eich用了10天时间设计了JavaScript语言。 JavaScript的范围JavaScript的范围：BOM + DOM + ECMAScript BOM简单说明123456BOM即Browser Object Mode,浏览器对象模型。BOM提供了独立于内容而与浏览器窗口进行交互的对象。BOM由一系列相关的对象构成">
<meta property="og:image" content="http://www.afanail.com/assets/img/03.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/01.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/02.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/Snip20170213_10.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/Snip20170213_12.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/Snip20170217_4.png">
<meta property="og:image" content="http://www.afanail.com/assets/img/Snip20170217_3.png">
<meta property="og:updated_time" content="2017-07-22T03:52:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript简明教程（全）">
<meta name="twitter:description" content="JavaScript与Java没有半毛钱关系，网景公司员工Brendan Eich用了10天时间设计了JavaScript语言。 JavaScript的范围JavaScript的范围：BOM + DOM + ECMAScript BOM简单说明123456BOM即Browser Object Mode,浏览器对象模型。BOM提供了独立于内容而与浏览器窗口进行交互的对象。BOM由一系列相关的对象构成">
<meta name="twitter:image" content="http://www.afanail.com/assets/img/03.png">
  
    <link rel="alternate" href="/atom.xml" title="Afanail" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.afanail.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Afanail</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-javaScript简明教程（全）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/29/javaScript简明教程（全）/" class="article-date">
  <time datetime="2016-12-29T05:37:19.000Z" itemprop="datePublished">2016-12-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript简明教程（全）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>JavaScript与Java没有半毛钱关系，网景公司员工Brendan Eich用了10天时间设计了JavaScript语言。</p>
<h1 id="JavaScript的范围"><a href="#JavaScript的范围" class="headerlink" title="JavaScript的范围"></a>JavaScript的范围</h1><p><strong>JavaScript的范围：BOM + DOM + ECMAScript</strong></p>
<h2 id="BOM简单说明"><a href="#BOM简单说明" class="headerlink" title="BOM简单说明"></a>BOM简单说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">BOM即Browser Object Mode,浏览器对象模型。</div><div class="line">BOM提供了独立于内容而与浏览器窗口进行交互的对象。</div><div class="line">BOM由一系列相关的对象构成，并且每个对象都提供了很多方法与属性。</div><div class="line">因为BOM主要用于管理窗口与窗口之间的通信，因此其核心对象是window。</div><div class="line">BOM缺乏标准，JavaScript语法的标准化组织是ECMA，DOM的标准化组织是W3C。</div><div class="line">BOM结构体系</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="DOM简单说明"><a href="#DOM简单说明" class="headerlink" title="DOM简单说明"></a>DOM简单说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">DOM即Document Object Model，文档对象模型。</div><div class="line">当网页被加载时，浏览器会创建页面的文档对象模型，即DOM。</div><div class="line">DOM(文档对象模型)被构造为对象的树。</div><div class="line">DOM由一系列相关的对象构成，引申为Document对象。</div><div class="line">DOM的标准化组织是W3C。</div></pre></td></tr></table></figure>
<h2 id="ECMAScript简单说明"><a href="#ECMAScript简单说明" class="headerlink" title="ECMAScript简单说明"></a>ECMAScript简单说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ECMAScript指代JavaScript的核心语法。</div><div class="line">JavaScript 由 Brendan Eich 发明。</div><div class="line">JavaScript于1995 年出现在 Netscape 中于 1997 年被 ECMA（一个标准协会）采纳。</div><div class="line">语法核心：</div><div class="line">变量</div><div class="line">基本数据类型</div><div class="line">对象类型</div><div class="line">结构(循环|条件|判断)</div><div class="line">面向对象</div></pre></td></tr></table></figure>
<h1 id="javascript语法"><a href="#javascript语法" class="headerlink" title="javascript语法"></a>javascript语法</h1><h2 id="javascript数据类型"><a href="#javascript数据类型" class="headerlink" title="javascript数据类型"></a>javascript数据类型</h2><p>基本类型（简单数据类型）</p>
<pre><code>* string
* number
* boolean
* undefined
* null
</code></pre><p>复杂类型（复杂数据类型）</p>
<pre><code>* Object
* Array
* Date
* RegExp
* Function
* String
* Number
* Boolean
* null
* Math
</code></pre><h2 id="javascript部分操作符的说明"><a href="#javascript部分操作符的说明" class="headerlink" title="javascript部分操作符的说明"></a>javascript部分操作符的说明</h2><h3 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h3><p>只能够操作一个值的操作符叫做一元操作符。<br>① 递增和递减操作符:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[<span class="number">01</span>] 前置型,递增和递减操作在包含他们的语句被求值之前就执行。</div><div class="line">[<span class="number">02</span>] 后置型,递增和递减操作在包含他们的语句被求值之后才执行。</div><div class="line"><span class="keyword">var</span> num1  = <span class="number">2</span>;</div><div class="line"><span class="keyword">var</span> num2  = <span class="number">20</span>;</div><div class="line"><span class="keyword">var</span> num3 = --num1 + num2;	<span class="comment">//21</span></div><div class="line"><span class="keyword">var</span> num4 = num1 + num2;		<span class="comment">//21</span></div><div class="line"><span class="keyword">var</span> num1  = <span class="number">2</span>;</div><div class="line"><span class="keyword">var</span> num2  = <span class="number">20</span>;</div><div class="line"><span class="keyword">var</span> num3 = num1-- + num2;	<span class="comment">//22</span></div><div class="line"><span class="keyword">var</span> num4 = num1 + num2;		<span class="comment">//21</span></div></pre></td></tr></table></figure></p>
<p>② 一元加和减操作符:<br>一元加操作符对结果不会有任何的影响。<br>一元减操作符主要用于表示负数。</p>
<h3 id="位操作符"><a href="#位操作符" class="headerlink" title="位操作符"></a>位操作符</h3><p>01 按位非(NOT):使用 ~ 表示，执行按位非的结果就是返回数值的反码。<strong>操作数的负值减去1</strong>。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num1 = <span class="number">25</span>;</div><div class="line"><span class="keyword">var</span> num2 = -num1 - <span class="number">1</span>;	<span class="comment">//-26</span></div><div class="line">consol.log(~num1)		<span class="comment">//-26</span></div></pre></td></tr></table></figure></p>
<p>02 按位与(AND):使用&amp;表示，操作两个操作数。<strong>只要有0就为0</strong>。<br>03 按位或(OR):使用|表示，操作两个操作数。<strong>只要有1就为1</strong>。<br>04 按位异或(XOR):使用 ^ 表示，操作两个操作数。<strong>相同则为0，不同则为1</strong>。<br>05 左移|右移(|有符号|无符号)。</p>
<h3 id="布尔操作符"><a href="#布尔操作符" class="headerlink" title="布尔操作符"></a>布尔操作符</h3><p> 布尔操作符一共有三个，分别是：非、与、或。<br> 01 逻辑非，符号：！<br> 说明：取反，可应用于任何值，！！相当于没有操作。<br>02 逻辑与，符号：&amp;&amp;<br> 说明：两个值都为真的时候，结果为真。属于短路操作，如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。<br>03 逻辑或，符号：||<br>说明：两个值只要有一个为真，那么结果为真。属于短路操作，如果第一个操作数为真，那么就不会再对第二个操作数求值了。<br>技巧：可以利用逻辑或短路操作的特点来避免为变量赋null或undefined值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myObject = refObject || backupObject;</div><div class="line"><span class="comment">//如果refObject的值不是null,那么它的值将被赋值给myObject</span></div><div class="line"><span class="comment">//如果是null,那么就将backupObject的值赋值给myObject。</span></div></pre></td></tr></table></figure></p>
<h3 id="乘性操作符"><a href="#乘性操作符" class="headerlink" title="乘性操作符"></a>乘性操作符</h3><p>乘 *<br>除 /<br>模 %</p>
<h3 id="加性操作符"><a href="#加性操作符" class="headerlink" title="加性操作符"></a>加性操作符</h3><p>加 +<br>减 -<br> <strong>说明：上述五种操作符在操作数为非数值的时候内部会执行自动的类型转换。</strong></p>
<h3 id="关系操作符"><a href="#关系操作符" class="headerlink" title="关系操作符"></a>关系操作符</h3><p>大于 &gt;<br>小于 &lt;<br>小于等于 &lt;=<br>大于等于 &gt;=<br>说明：返回布尔类型的值，要么为false，要么为true。</p>
<h3 id="相等操作符"><a href="#相等操作符" class="headerlink" title="相等操作符"></a>相等操作符</h3><p>01 相等和不相等[先转换再比较]，符号是 == 和！=<br><strong>比较的规则</strong>:<br>[01] 如果操作数中有布尔值，则先转换为数值再比较。<br>[02] 如果是字符串和数值比较，则先将字符串转换为数值再比较。<br>[03] 如果是对象和其他类型的值比较，则先调用对象的valueOf方法，然后用得到的基本类型值去比较。<br>[04] null和undefined是相等的。<br>[05] NaN和NaN不相等。<br>[06] 如果两个操作符都是对象，则比较他们是不是同一个对象，如果指向的是同一个对象则返回true，否则返回false。<br>02 全等和不全等[仅比较不转换],符号是<code>===</code>和<code>!==</code><br><strong>比较的规则</strong>:<br>[01] null和undefined是不全等的，因为它们是不同类型的值。<br>[02] 类型相同，且值相等，则返回true，否则返回false。</p>
<h3 id="条件操作符"><a href="#条件操作符" class="headerlink" title="条件操作符"></a>条件操作符</h3><p>符号：表达式1 ? 字面量1 ：字面量2<br>说明：如果表达式1的结果为true，则使用字面量1，否则使用字面量2。</p>
<h3 id="赋值操作符"><a href="#赋值操作符" class="headerlink" title="赋值操作符"></a>赋值操作符</h3><p>符号：=、+=、-=、*=、&lt;&lt;=等等<br>说明：使用赋值操作符对性能而言，没有任何的提升，只是简化了赋值操作而已。</p>
<h3 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h3><p><strong>01 值类型和引用类型简单说明</strong><br>值类型主要有：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">数值</div><div class="line">字符串</div><div class="line">布尔类型</div><div class="line"><span class="literal">undefined</span></div><div class="line"><span class="literal">null</span></div></pre></td></tr></table></figure></p>
<p>引用类型主要有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">对象（Object类型）</div><div class="line">数组（Array）</div><div class="line">函数 (Function)</div></pre></td></tr></table></figure></p>
<p><strong>值类型</strong>：保存为简单的数据值，赋值只是简单的数据值的复制<br><strong>引用类型</strong>:保存为对象，其本质是指向内存位置的引用(地址)，赋值是对地址的复制<br><strong>值类型代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num1 = <span class="number">10</span>;</div><div class="line"><span class="keyword">var</span> num2 = num1;    <span class="comment">//把num1的值复制一份给num2,num1和num2的值相等,除此之外没有任何其他关系</span></div><div class="line"><span class="built_in">console</span>.log(num1,num2);     <span class="comment">//10,10</span></div><div class="line"><span class="built_in">console</span>.log(num1 == num2);  <span class="comment">//true</span></div><div class="line">num2 = <span class="number">20</span>;          <span class="comment">//修改num2的值为20,不会对num1产生任何的影响</span></div><div class="line"><span class="built_in">console</span>.log(num1,num2);     <span class="comment">//10,20</span></div><div class="line"><span class="built_in">console</span>.log(num1 == num2);  <span class="comment">//false</span></div></pre></td></tr></table></figure></p>
<p><strong>引用类型代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> arr2 = arr1;</div><div class="line"><span class="built_in">console</span>.log(arr1,arr2);             <span class="comment">//[1,2,3],[1,2,3]</span></div><div class="line"><span class="built_in">console</span>.log(arr1 == arr2);          <span class="comment">//true</span></div><div class="line"><span class="keyword">var</span> arr3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="built_in">console</span>.log(arr3);                  <span class="comment">//[1,2,3]</span></div><div class="line"><span class="built_in">console</span>.log(arr1 == arr3,arr2 == arr3); <span class="comment">//false,false</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 代码说明:</div><div class="line"> * arr1和arr2在比较的时候,值相等(都是[1,2,3]),且引用相等(都指向堆中同一块数据),因此arr1和arr2相等</div><div class="line"> * arr3和arr1以及arr2比较的时候,值相等([1,2,3]),但是引用不相等(arr3指向的是堆中另外一块数据),因此不等</div><div class="line"> * 总结:引用类型在比较相等的时候,只有值和引用都相等才相等</div><div class="line"> * */</div></pre></td></tr></table></figure></p>
<p><strong>02 值类型和引用类型的赋值</strong><br>赋值操作(=):把当前变量存储的值复制一份给接收的变量。<br>值类型的赋值:把当前变量存储的值(具体的数据)复制一份给接收的变量。<br>引用类型的赋值:把当前变量存储的值(具体数据的引用即地址)复制一份给接收的变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//引用类型使用注意</span></div><div class="line">  <span class="built_in">console</span>.log(arr1,arr2);         <span class="comment">//[1,2,3],[1,2,3];</span></div><div class="line">  <span class="built_in">console</span>.log(arr1 == arr2);      <span class="comment">//true</span></div><div class="line">  arr1.push(<span class="number">4</span>);</div><div class="line">  <span class="built_in">console</span>.log(arr1,arr2);         <span class="comment">//[1,2,3,4],[1,2,3,4]</span></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 代码说明:因为arr1和arr2内部的引用指向的是同一块数据,所以修改了arr1会对arr2也产生影响</div><div class="line">   * */</div></pre></td></tr></table></figure></p>
<p><strong>03 值类型和引用类型作为函数参数处理</strong><br><code>形参</code>:占位用的参数,用来接收数据的参数而已。<br><code>实参</code>:实际传递的参数。<br><code>函数的调用</code>:在函数调用的时候,函数默认会把实参的值赋值给形参。<br><strong>值类型作为参数</strong>：在函数内部对形参变量进行修改不会影响到实参的值。<br><strong>引用类型作为参数</strong>：在函数内部对形参变量进行修改会影响到实参的值，因为他们的引用指向同一个对象。<br><strong>04 值类型和引用类型的相关图示</strong><br><strong>基本类型的赋值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str1 = <span class="string">"hello zhangsan"</span>;</div><div class="line"><span class="keyword">var</span> str2 = str1;</div></pre></td></tr></table></figure></p>
<p><img src="/assets/img/03.png" alt="p1对象的存储结构图"><br><strong>引用类型的结构和赋值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car = &#123;</div><div class="line">    <span class="attr">color</span>:<span class="string">"黑色"</span>,</div><div class="line">    <span class="attr">number</span>:<span class="string">"B99"</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> p1 = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"王宝宝"</span>,</div><div class="line">    <span class="attr">age</span>:<span class="number">30</span>,</div><div class="line">    <span class="attr">car</span>:car</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><img src="/assets/img/01.png" alt="p1对象的存储结构图"><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">       <span class="attr">name</span>:<span class="string">"lisi"</span>,</div><div class="line">       <span class="attr">age</span>:<span class="number">18</span></div><div class="line">   &#125;;</div><div class="line">   <span class="keyword">var</span> obj2 = obj1;</div></pre></td></tr></table></figure></p>
<p><img src="/assets/img/02.png" alt="obj1和obj2的存储结构图"></p>
<h2 id="对象的动态特性"><a href="#对象的动态特性" class="headerlink" title="对象的动态特性"></a>对象的动态特性</h2><p>在js中可以动态的对对象属性进行增加、修改和删除；<br><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 创建对象</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"刘德华"</span>,</div><div class="line">    <span class="attr">age</span>:<span class="number">60</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//02 动态的为对象添加属性</span></div><div class="line">obj.height = <span class="string">"180cm"</span>;</div><div class="line"><span class="built_in">console</span>.log(obj.height);</div><div class="line"><span class="comment">//03 动态的为对象添加方法</span></div><div class="line">obj.maiMeng = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"华仔会卖萌噢"</span>);</div><div class="line">&#125;;</div><div class="line">obj.maiMeng();</div><div class="line"><span class="comment">//04 修改属性的值:如果设置的属性以前不存在,那么就是添加,如果设置的属性已经存在了,那么就是修改</span></div><div class="line">obj.name = <span class="string">"王宝强"</span>;</div><div class="line"><span class="built_in">console</span>.log(obj.name)</div><div class="line"><span class="comment">//05 删除属性</span></div><div class="line"><span class="keyword">delete</span> obj.name;</div><div class="line"><span class="built_in">console</span>.log(obj.name);  <span class="comment">//undefined</span></div></pre></td></tr></table></figure></p>
<p><strong>访问对象的方法</strong><br>01 可以使用点语法访问<br>02 可以使用[]语法访问，注意对象的属性必须是字符串</p>
<h2 id="关键字in和delete的使用"><a href="#关键字in和delete的使用" class="headerlink" title="关键字in和delete的使用"></a>关键字in和delete的使用</h2><p><strong>01 in关键字</strong><br>01 判断属性是否存在于对象中，注意所有的key都是字符串<br>02 for in循环中  遍历对象的 键<br><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">    <span class="attr">age</span>:<span class="number">18</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">for</span>(k <span class="keyword">in</span> obj)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">console</span>.log(k,obj[k]);</div><div class="line">&#125;</div><div class="line"><span class="comment">//检测obj对象中是否存在name这个属性</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"name"</span> <span class="keyword">in</span> obj);</div></pre></td></tr></table></figure></p>
<p><strong>注意</strong>：in关键字操作数组的时候检测的是索引值并非数组元素<br><strong>02 delete关键字</strong><br>01 删除对象的属性<br>02 删除未使用var声明的变量<br>03 返回值为boolean类型，true则表示是否删除成功<br><strong>注意</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">01 删除的属性如果不存在，返回true</div><div class="line">02 删除的如果是原型中的属性，返回true 但是删除不成功</div></pre></td></tr></table></figure></p>
<h2 id="循环和分支"><a href="#循环和分支" class="headerlink" title="循环和分支"></a>循环和分支</h2><p><strong>循环结构</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span></div><div class="line"><span class="keyword">while</span></div><div class="line"><span class="keyword">do</span>...while</div><div class="line"><span class="keyword">for</span>..in</div></pre></td></tr></table></figure></p>
<p><strong>分支结构</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>...else..</div><div class="line">swith..case</div></pre></td></tr></table></figure></p>
<p><strong>break和continue对比</strong><br>break:终止循环，循环中后面的代码不再执行<br>continue:结束当前循环，循环后面的代码不再执行，继续下一次循环</p>
<h2 id="调试工具的使用"><a href="#调试工具的使用" class="headerlink" title="调试工具的使用"></a>调试工具的使用</h2><p><strong>开启调试窗口</strong><br>    windows 平台: f12; Mac: option+command+i;<br><strong>调试窗口介绍</strong><br>    指针: 选择页面中的元素<br>    手机: 使用移动端界面调试<br>    Elements: 查看页面 DOM 树<br>    Console: 控制台(注意, 控制台与该页面是一个整体, 在控制台中的任何操作, 会影响到页面)<br>    Source: 代码调试<br><strong>调试工具的使用</strong><br>    逐过程运行, 一次运行一个函数<br>    单步运行(逐步运行), 一次运行一句, 如果是函数, 进入函数体内运行<br>    继续运行. 从当前状态运行下去, 直到出现断点, 如果没有断点则运行结束<br><strong>设置断点技巧</strong><br>    逐步与逐过程混合<br>    断点加继续运行<br>    条件断点(右键添加 add contitional breakpoint)<br><strong>利用 watch 监视窗口可以查看对象成员</strong></p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p><strong>常见的异常分类</strong><br>运行环境的多样性导致的异常（浏览器）<br>语法错误，代码错误<br>异常的特征:一旦代码出现异常，后面的代码就不会再执行<br><strong>异常捕获</strong><br>使用try-catch语句捕获异常<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">    <span class="comment">//这里写可能出现异常的代码</span></div><div class="line">&#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">    <span class="comment">//这里的e就是捕获的异常对象</span></div><div class="line">    <span class="comment">//可以在这里写，出现异常后的处理代码</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>异常捕获语句执行的过程为：<br>01 代码正常运行, 如果在try中出现了错误, try 里面出现错误的语句后面的代码都不再执行, 直接跳转到 catch 中<br>02 在catch中处理错误信息<br>03 继续执行后面的代码<br>04 如果 try 中没有出现错误, 那么不走 catch 直接执行后面的代码<br>捕获异常的优点：通过try-catch语句进行异常捕获之后，代码将会继续执行，而不会中断。<br>注意：语法错误异常用try-catch语句无法捕获，因为在预解析阶段，语法错误会直接检测出来，而不会等到运行的时候才报错。<br><strong>try..catch使用示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 try ... catch结构的使用</span></div><div class="line"><span class="comment">//a();  若直接调用则爆出:Uncaught ReferenceError: a is not defined错误</span></div><div class="line"><span class="comment">//在开发中,我们对于可能会报错或者是发生异常的代码用try结构进行处理</span></div><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">    a();    <span class="comment">//如果发生异常,那么至少不会到正程序中断</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(e)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//如果try语句中发生了异常,那么会执行此处的代码块</span></div><div class="line">    <span class="comment">//参数e.为具体的异常信息,可以打印进行查看</span></div><div class="line">    <span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionTest</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"functionTest"</span>);</div><div class="line">&#125;;</div><div class="line">functionTest();</div><div class="line"><span class="comment">//结论:使用try...catch结构,如果发生了异常,那么不会影响后面代码的执行,且我们可以在发生异常信息之后做出具体的处理</span></div></pre></td></tr></table></figure></p>
<p><strong>手动抛出异常</strong><br>案例：自己写的一个函数，需要一个参数，如果用户不传参数，此时想直接给用户抛出异常，就需要了解如何抛出异常。<br>抛出异常使用throw关键字，语法如下：<br>手动抛出异常信息（字符串）:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">    <span class="comment">//a();    //如果发生异常,那么至少不会到正程序中断</span></div><div class="line">    <span class="comment">//不使用系统默认的异常信息,尝试手动抛出</span></div><div class="line">    <span class="keyword">throw</span> <span class="string">"对不起,您调用了尚未定义的方法"</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(e)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//如果try语句中发生了异常,那么会执行此处的代码块</span></div><div class="line">    <span class="comment">//参数e.为具体的异常信息,可以打印进行查看</span></div><div class="line">    <span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionTest</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"functionTest"</span>);</div><div class="line">&#125;;</div><div class="line">functionTest();</div></pre></td></tr></table></figure></p>
<p>手动抛出异常信息（对象）:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">    <span class="comment">//a();    //如果发生异常,那么至少不会到正程序中断</span></div><div class="line">    <span class="comment">//不使用系统默认的异常信息,尝试手动抛出</span></div><div class="line">    <span class="keyword">throw</span> &#123;</div><div class="line">        <span class="attr">errMsg</span>:<span class="string">"具体的错误信息提示"</span>,</div><div class="line">        <span class="attr">errCode</span>:<span class="string">"指定错误类型的代号,如1001等"</span></div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(e)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//如果try语句中发生了异常,那么会执行此处的代码块</span></div><div class="line">    <span class="comment">//参数e.为具体的异常信息,可以打印进行查看</span></div><div class="line">    <span class="built_in">console</span>.log(e);</div><div class="line">    <span class="comment">//在try语句中抛出的错误信息是什么,那么得到的异常信息就是什么</span></div><div class="line">    <span class="comment">//如果抛出的是字符串,那么得到的就是字符串</span></div><div class="line">    <span class="comment">//如果抛出的是对象,那么此处得到的就是对象</span></div><div class="line">    <span class="built_in">console</span>.log(e.errMsg);</div><div class="line">    <span class="built_in">console</span>.log(e.errCode);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionTest</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"functionTest"</span>);</div><div class="line">&#125;;</div><div class="line">functionTest();</div></pre></td></tr></table></figure></p>
<p><strong>异常捕获语句的完整模式</strong><br>异常捕获语句的完整模式为try-catch-finally<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">    <span class="comment">//在执行的时候可能发生异常的代码</span></div><div class="line">    b();</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (e)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//如果try代码块中的代码在执行中发生了异常,那么就会执行该代码块的代码</span></div><div class="line">    <span class="comment">//通过打印e对象可以查看具体的异常信息</span></div><div class="line">    <span class="built_in">console</span>.log(e); <span class="comment">//打印异常信息</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">finally</span> &#123;</div><div class="line">    <span class="comment">//不论try语句中的代码是否会发生异常,都一定会执行此处的代码块</span></div><div class="line">    <span class="comment">//一般在前端开发中很少使用,常用语后台开发的资源释放工作</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"无论如何总要执行的代码"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>finally中的代码，不管是否发生异常，都会执行。一般用在后端语言中，用来释放资源，JavaScript中很少会用到。</p>
<h2 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h2><p>获取元素操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">getElementById</div><div class="line">getElementsByTagName</div><div class="line">getElementsByClassName</div></pre></td></tr></table></figure></p>
<p>元素节点操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">appendChild</div><div class="line">insertBefore</div><div class="line">removeChild</div><div class="line">replaceChild</div><div class="line">cloneNode</div><div class="line">createElement</div><div class="line">createTextNode（创建文本节点）</div></pre></td></tr></table></figure></p>
<p>属性节点操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">getAttribute</div><div class="line">setAttribute</div><div class="line">removeAttribute</div></pre></td></tr></table></figure></p>
<p>常用DOM属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">className</div><div class="line">innerHTML</div><div class="line">innerText/textContent value</div><div class="line">children</div></pre></td></tr></table></figure></p>
<p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//0 获取页面中指定的标签,并设置其样式</span></div><div class="line">    <span class="keyword">var</span> divID = <span class="built_in">document</span>.getElementById(<span class="string">"divId"</span>);</div><div class="line">    divID.style.backgroundColor = <span class="string">"pink"</span>;</div><div class="line">    divID.style.height = <span class="string">"40px"</span>;</div><div class="line">    divID.style.width = <span class="string">"200px"</span>;</div><div class="line">    <span class="comment">//01 创建新的标签</span></div><div class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</div><div class="line">    <span class="comment">//02 设置标签的样式</span></div><div class="line">    div.style.backgroundColor = <span class="string">"red"</span>;</div><div class="line">    div.style.height = <span class="string">"100px"</span>;</div><div class="line">    div.style.width = <span class="string">"300px"</span>;</div><div class="line">    div.style.fontSize = <span class="string">"20"</span>;</div><div class="line">    <span class="comment">//03 设置标签的内容</span></div><div class="line">    div.innerText = <span class="string">"这是一个自己创建的标签"</span>;</div><div class="line">    <span class="comment">//04 把标签插入到页面中</span></div><div class="line">    <span class="built_in">document</span>.body.appendChild(div);</div></pre></td></tr></table></figure></p>
<h1 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h1><blockquote>
<p>面向对象方法被人谈论了二十多年了，直到今天，我们还一直在谈对象。</p>
</blockquote>
<h2 id="面向层过程和面向对象编程"><a href="#面向层过程和面向对象编程" class="headerlink" title="面向层过程和面向对象编程"></a>面向层过程和面向对象编程</h2><p>01 面向对象编程和面向过程编程是一种编程思想,和具体的语言关系不大。<br>02 面向过程编程和面向对象编程的主要区别<br><!-- more --><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">面向过程编程:</div><div class="line">     关注点在于解决问题需要的每一个详细的步骤</div><div class="line">     示例:</div><div class="line">         自己洗衣服的过程</div><div class="line">         ① 收集需要洗的脏衣服</div><div class="line">         ② 准备洗衣粉、洗衣液等</div><div class="line">         ③ 把衣服放到一个盆里</div><div class="line">         ④ 接水</div><div class="line">         ⑤ 把洗衣粉放到盆里</div><div class="line">         ⑥ 摩擦,摩擦,不断的摩擦</div><div class="line">         ⑦ 把洗好的衣服用清水冲洗干净</div><div class="line">         ⑧ 尽量把把洗好的衣服的水分拧干</div><div class="line">         ⑨ 晾晒</div><div class="line"> 面向对象编程:</div><div class="line">     关注点在于解决问题需要的对象身上</div><div class="line">     示例:</div><div class="line">         使用洗衣机洗衣服的过程</div><div class="line">         ① 收集需要洗的脏衣服</div><div class="line">         ② 找到合适的洗衣机</div><div class="line">         ③ 设定洗衣服和烘干的程序</div></pre></td></tr></table></figure></p>
<p>03 面向过程和面向对象他们的区别就类似于自己洗衣服和使用洗衣机洗衣服|自己做饭吃和去餐馆吃饭</p>
<h2 id="面向对象编程的相关概念"><a href="#面向对象编程的相关概念" class="headerlink" title="面向对象编程的相关概念"></a>面向对象编程的相关概念</h2><p>01 对象<br>    什么是对象? 所有的一切都是对象,在开发中有一项重要的工作就是对象的划分。一般来说,我们所指的对象是某个具体的事物,而非泛泛的类别。<br>02 对象的特征(静态描述信息)<br>    所谓特征就是一些特定的描述信息<br>    如:学生(性别、年龄、班级、专业、籍贯、家庭住址)<br>    如:汽车(颜色、车牌、品牌、价格等)<br>03 对象的行为(动态特性)<br>    如:人(吃饭、睡觉、玩游戏、奔跑、运动等)<br>    如:狗(吃、睡、咬人、叫、流口水)<br>04 js中的对象<br>    键-值对(key-value)的集合。<br>05 现实生活中的对象和js对象的对应关系<br>    静态的描述信息 - js对象中的属性(属性就是定义在对象内部的变量)<br>    动态的行为特征 - js对象中的方法(方法就是定义在对象内部的函数)<br>06 代码示例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">var</span> zhangsan = &#123;</div><div class="line">            <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">            <span class="attr">sex</span>:<span class="string">"男"</span>,</div><div class="line">            <span class="attr">age</span>:<span class="number">18</span>,</div><div class="line">            <span class="attr">address</span>:<span class="string">"天上人间1号公馆"</span>,</div><div class="line">            <span class="attr">eat</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'能吃'</span>);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">sleep</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"能睡"</span>);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">say</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"能说话"</span>);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">run</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"能运动"</span>);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">song</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"能唱歌"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//打印对象的属性并调用相关的方法</span></div><div class="line"><span class="built_in">console</span>.log(zhangsan.name,zhangsan.age,zhangsan.address);</div><div class="line">        zhangsan.say();</div><div class="line">        zhangsan.sleep();</div></pre></td></tr></table></figure></p>
<h2 id="面向对象的三大特性"><a href="#面向对象的三大特性" class="headerlink" title="面向对象的三大特性"></a>面向对象的三大特性</h2><p>面向对象的三大特性:封装、继承、多态<br>01 封装:复用|信息隐蔽<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 封装的简单说明</span></div><div class="line"><span class="comment">//001 观察以下杂乱无关的语句,它们仅仅只是一堆无意义的全局变量</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">"乘风波浪会有时"</span>;</div><div class="line"><span class="keyword">var</span> actors = [<span class="string">"彭于晏"</span>,<span class="string">"邓超"</span>];</div><div class="line"><span class="keyword">var</span> showTime = <span class="string">"2016-1-28 - 2016-2-28"</span>;</div><div class="line"><span class="keyword">var</span> director = <span class="string">"韩寒"</span>;</div><div class="line"><span class="keyword">var</span> type = <span class="string">"喜剧"</span>;</div><div class="line"><span class="keyword">var</span> play = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//播放......</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//002 把上面的变量封装到对象中(更具有意义)</span></div><div class="line"><span class="keyword">var</span> film  = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"乘风破浪会有时"</span>,</div><div class="line">    <span class="attr">actors</span>:[<span class="string">"彭于晏"</span>,<span class="string">"邓超"</span>],</div><div class="line">    <span class="attr">showTime</span>:<span class="string">"2016-1-28 - 2016-2-28"</span>,</div><div class="line">    <span class="attr">director</span>:<span class="string">"韩寒"</span>,</div><div class="line">    <span class="attr">type</span>:<span class="string">"喜剧"</span>,</div><div class="line">    <span class="attr">play</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//播放......</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>02 继承:获取已经存在的对象已有属性和方法的一种方式(获取他人已有财富和资源的一种方式)。<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//继承的简单示例</span></div><div class="line"><span class="comment">//001 创建一个空的对象</span></div><div class="line"><span class="keyword">var</span> nullObj = &#123;&#125;;</div><div class="line"><span class="comment">// 上面的对象film拥有了很多的属性和方法</span></div><div class="line"><span class="comment">//002 设法让nullObj拥有film中所有的属性和方法</span></div><div class="line"><span class="comment">//方法一:自己重新写一遍</span></div><div class="line"><span class="comment">//方法二:通过某种方式来获得,比如遍历该对象,然后完成赋值</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> film)</div><div class="line">&#123;</div><div class="line">    nullObj[k] = film[k];</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> nullObj)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">console</span>.log(nullObj[k]);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>03 多态(polymorphism)<br>    多态:polymorphism = poly(复数) + morph(形态) + ism<br>    多用于强类型语言中，JavaScript具备与生俱来的多态特性。<br>    多态表现为:<br>        ① 同一操作,作用于不同的对象,会产生不同的解释和行为。<br>        ② 隐藏不同。</p>
<h1 id="创建对象的方法"><a href="#创建对象的方法" class="headerlink" title="创建对象的方法"></a>创建对象的方法</h1><h2 id="字面量方式创建对象"><a href="#字面量方式创建对象" class="headerlink" title="字面量方式创建对象"></a>字面量方式创建对象</h2><p>基本写法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  book1 = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">"声名狼藉者的生活"</span>,</div><div class="line">        <span class="attr">price</span>:<span class="number">42.00</span>,</div><div class="line">        <span class="attr">author</span>:<span class="string">"福柯"</span>,</div><div class="line">        <span class="attr">press</span>:<span class="string">"北京大学出版社"</span>,</div><div class="line">        <span class="attr">read</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"我的书名为:声名狼藉者的的生活,作者为福柯...."</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure></p>
<p>存在的问题<br>[01] 代码复用性差<br>[02] 如果要创建大量的同类型对象，则需要些大量重复性代码</p>
<h2 id="内置构造函数创建对象"><a href="#内置构造函数创建对象" class="headerlink" title="内置构造函数创建对象"></a>内置构造函数创建对象</h2><p>JS中的内置构造函数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span></div><div class="line"><span class="built_in">Number</span></div><div class="line"><span class="built_in">Boolean</span></div><div class="line">    注意：(区别于string number boolean)</div><div class="line"><span class="built_in">Date</span></div><div class="line"><span class="built_in">Array</span></div><div class="line"><span class="built_in">Function</span></div><div class="line"><span class="built_in">Object</span></div><div class="line"><span class="built_in">RegExp</span></div></pre></td></tr></table></figure></p>
<p>基本写法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> book1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">book1.name = <span class="string">"声名狼藉者的生活"</span>;</div><div class="line">book1.price = <span class="number">42.00</span>;</div><div class="line">book1.author = <span class="string">"福柯"</span>;</div><div class="line">book1.press = <span class="string">"北京大学出版社"</span>;</div><div class="line">book1.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"我的书名为:声名狼藉者的的生活,作者为福柯...."</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>问题<br>01 创建的对象无法复用,复用性差<br>02 如果需要创建多个同类型的对象,如(书籍)则需要写大量重复的代码,代码的冗余度高</p>
<h2 id="工厂函数创建对象"><a href="#工厂函数创建对象" class="headerlink" title="工厂函数创建对象"></a>工厂函数创建对象</h2><p>基本写法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createBookNew</span> (<span class="params">name,price,author,press</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> book = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">    book.name = name;</div><div class="line">    book.price = price;</div><div class="line">    book.author = author;</div><div class="line">    book.press = press;</div><div class="line">    book.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我的书名为:"</span>+book.name+<span class="string">",作者为"</span>+book.author+<span class="string">"...."</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> book;</div><div class="line">&#125;</div><div class="line"><span class="comment">//使用工厂函数来创建对象</span></div><div class="line"><span class="keyword">var</span> book1 = createBookNew(<span class="string">"声名狼藉者的的生活"</span>,<span class="string">"42.00"</span>,<span class="string">"福柯"</span>,<span class="string">"北京大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> book2 = createBookNew(<span class="string">"人性的枷锁"</span>,<span class="string">"49.00"</span>,<span class="string">"毛姆"</span>,<span class="string">"华东师范大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> book3 = createBookNew(<span class="string">"悟空传"</span>,<span class="string">"28.00"</span>,<span class="string">"今何在"</span>,<span class="string">"湖南文艺出版社"</span>);</div><div class="line"><span class="comment">//打印对象的属性,调用对象的方法</span></div><div class="line"><span class="built_in">console</span>.log(book1.name);</div><div class="line"><span class="built_in">console</span>.log(book2.name);</div><div class="line"><span class="built_in">console</span>.log(book3.name);</div><div class="line">book1.read();</div><div class="line">book2.read();</div><div class="line">book3.read();</div></pre></td></tr></table></figure></p>
<p><strong>工厂函数说明</strong>:<br>001 工厂函数方式创建对象其本质是对内置构造函数创建对象的过程进行了封装<br>002 适用于大规模“批量生产”同类型的对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createBook</span> (<span class="params">name,price,author,press</span>) </span>&#123;</div><div class="line">    <span class="comment">//001 参数 = 原料</span></div><div class="line">    <span class="keyword">var</span> book = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">    <span class="comment">//002 创建对象并设置对象的属性和方法 = 对原料进行加工</span></div><div class="line">    book.name = name;</div><div class="line">    book.price = price;</div><div class="line">    book.author = author;</div><div class="line">    book.press = press;</div><div class="line">    book.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我的书名为:"</span>+book.name+<span class="string">",作者为"</span>+book.author+<span class="string">"...."</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//003 把处理好的对象返回给我们 == 产品出厂</span></div><div class="line">    <span class="keyword">return</span> book;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>封装思路</strong>:<br>使用函数把固定不变的部分封装起来，变化的部分提取为函数的参数。<br><strong>工厂函数创建对象的实现过程</strong>:<br>① 提供一个创建对象的函数（参数）<br>② 在该函数内部使用new 关键字和Object构造器创建对象<br>③ 设置对象的属性<br>④ 设置对象的方法<br>⑤ 返回对象</p>
<h2 id="自定义构造函数创建对象"><a href="#自定义构造函数创建对象" class="headerlink" title="自定义构造函数创建对象"></a>自定义构造函数创建对象</h2><p>基本写法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> 构造函数名(<span class="params">参数<span class="number">1</span>,参数<span class="number">2</span>,参数<span class="number">3.</span>..</span>) </span>&#123;</div><div class="line">    <span class="comment">//设置对象的属性</span></div><div class="line">    <span class="keyword">this</span>.属性<span class="number">01</span> = 参数<span class="number">1</span>;</div><div class="line">    <span class="keyword">this</span>.属性<span class="number">02</span> = 参数<span class="number">2</span>;</div><div class="line">    <span class="comment">//设置对象的方法</span></div><div class="line">    <span class="keyword">this</span>.方法<span class="number">01</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//.....</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">this</span>.方法<span class="number">02</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//.....</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//自定义构造函数方式创建对象</span></div><div class="line"><span class="keyword">var</span> 对象<span class="number">01</span> = <span class="keyword">new</span> 构造函数名(实参<span class="number">01</span>,实参<span class="number">02</span>,实参<span class="number">03.</span>..);</div><div class="line"><span class="keyword">var</span> 对象<span class="number">02</span> = <span class="keyword">new</span> 构造函数名(实参<span class="number">01</span>,实参<span class="number">02</span>,实参<span class="number">03.</span>..);</div></pre></td></tr></table></figure></p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CreateBook</span> (<span class="params">name,price,author,press</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.price = price;</div><div class="line">    <span class="keyword">this</span>.author = author;</div><div class="line">    <span class="keyword">this</span>.press = press;</div><div class="line">    <span class="keyword">this</span>.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我的书名为:"</span>+<span class="keyword">this</span>.name+<span class="string">",作者为"</span>+<span class="keyword">this</span>.author+<span class="string">"...."</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> CreateBook(<span class="string">"声名狼藉者的的生活"</span>,<span class="string">"42.00"</span>,<span class="string">"福柯"</span>,<span class="string">"北京大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> b2 = <span class="keyword">new</span> CreateBook(<span class="string">"人性的枷锁"</span>,<span class="string">"49.00"</span>,<span class="string">"毛姆"</span>,<span class="string">"华东师范大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> b3 = <span class="keyword">new</span> CreateBook(<span class="string">"悟空传"</span>,<span class="string">"28.00"</span>,<span class="string">"今何在"</span>,<span class="string">"湖南文艺出版社"</span>);</div><div class="line"><span class="comment">//打印对象的属性,并调用对象的方法测试</span></div><div class="line"><span class="built_in">console</span>.log(b1.author);</div><div class="line"><span class="built_in">console</span>.log(b2.author);</div><div class="line"><span class="built_in">console</span>.log(b3.author);</div><div class="line">b1.read();</div><div class="line">b2.read();</div><div class="line">b3.read();</div></pre></td></tr></table></figure></p>
<p><strong>构造函数与new关键字</strong>:<br>new关键字的作用：用于创建对象（Object类型）。<br>构造函数和普通函数的区别：函数的首字母大写。<br>构造函数的作用:用于完成对象的初始化。</p>
<p><strong>自定义构造函数和简单工厂函数的对比</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">① 函数的首字母大写(用于区别构造函数和普通函数)</div><div class="line">② 创建对象的过程是由new关键字实现</div><div class="line">③ 在构造函数内部会自动的创建新对象,并赋值给this指针</div><div class="line">④ 自动返回创建出来的对象</div></pre></td></tr></table></figure></p>
<p><strong>构造函数的执行过程</strong><br>① 使用new关键字创建对象<br>② 把新创建出来的对象赋值给this<br>③ 在构造函数内部,使用this为新创建出来的对象设置属性和方法<br>④ 默认返回新创建的对象(普通函数如果不显示的return则默认返回undefined)。</p>
<p><strong>构造函数的返回值</strong><br>01 如果在构造函数中没有显示的return,则默认返回的是新创建出来的对象<br>02 如果在构造函数中显示的return,则依照具体的情况处理</p>
<pre><code>[01] return 的是对象,则直接返回该对象,取而代之本该默认返回的新对象
[02] return 的是null或基本数据类型值,则返回新创建的对象
</code></pre><p><strong>构造函数方式创建对象存在的问题</strong><br>每次创建对象,都会重新创建函数，那么如果创建的对象数量很多,而对象方法内部的实现一模一样,则造成了资源浪费。</p>
<p><strong>构造函数的使用注意</strong><br>函数传值：可以把构造函数的对象方法抽取为参数。代码示例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//001 创建一个构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,toDoSomeThing</span>) </span>&#123;</div><div class="line">    <span class="comment">//002 在构造函数内部设置对象的属性和方法</span></div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.age = age;</div><div class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">this</span>.toDoSomeThing = toDoSomeThing;</div><div class="line">&#125;</div><div class="line"><span class="comment">//003 使用构造函数创建对象</span></div><div class="line"><span class="keyword">var</span> zhangsan = <span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">18</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"张三在读书"</span>);</div><div class="line">&#125;);</div><div class="line"><span class="keyword">var</span> lisi = <span class="keyword">new</span> Person(<span class="string">"李四"</span>,<span class="number">20</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"李四在玩耍"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>对象类型</strong>:<br>01 检查对象的类型：<code>instanceOf</code><br>02 获取对象的类型：<code>Object.prototype.toString.call(dog)</code></p>
<p><strong>对象的构造器属性</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.color = <span class="string">"黄色"</span>;</div><div class="line">    &#125;</div><div class="line"><span class="built_in">console</span>.log(dog.constructor);</div></pre></td></tr></table></figure></p>
<p>属性的名称：<code>constructor</code><br>属性的作用：指向创建该对象的构造函数，类似于现实生活中所有的产品都标有生产厂家一样。</p>
<p><strong>构造函数的调用</strong><br>01 构造函数可以像普通函数一样不通过new关键字直接调用<br>02 在使用构造函数创建对象的时候，如果没有传递参数，则（）可以省略<br>代码示例:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 创建构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"张三"</span>;</div><div class="line">    <span class="keyword">this</span>.age = <span class="number">20</span>;</div><div class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//02 使用构造函数创建对象</span></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person;    <span class="comment">//说明:如果不需要传递参数,则在调用构造函数的时候()可以省略</span></div></pre></td></tr></table></figure></p>
<p><strong>this指向</strong><br>01 如果使用new 构造函数的方式调用，则this指向内部默认创建出来的空对象<br>02 如果像调用普通函数一样调用构造函数，则this指向全局对象window(<code>不要这样使用</code>)</p>
<h2 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h2><p><strong>原型对象概念</strong></p>
<pre><code>在构造函数创建出来的时候,系统会默认帮构造函数创建并关联的一个新对象
自定义构造函数的原型对象默认是一个空对象。  
</code></pre><p><strong>原型对象的作用</strong></p>
<pre><code>构造函数中的原型对象中的属性和方法可以被使用该构造函数创建出来的对象使用。
即以自定义构造函数方式创建出来的所有对象,自动拥有和共享该构造函数的原型对象中的所有属性和方法。
</code></pre><p><strong>如何访问构造函数的原型对象</strong><br>① <code>构造函数.protoType</code><br>② <code>对象.__proto__（不推荐）</code></p>
<p><strong>设置原型对象的属性和方法</strong><br>① <code>利用对象的动态特性来为构造函数的原型对象添加属性和方法</code><br>② <code>替换原型对象</code></p>
<p><strong>实例和实例化</strong>：<br><code>实例化</code>:通过构造函数创建具体对象的过程。<br><code>实例</code>:通过构造函数实例化出来的对象,我们称之为该构造函数的一个实例。<br>注意:在说实例的时候,一定要指定是某个具体构造函数的实例。</p>
<p><strong>原型的使用方法</strong><br>① 利用对象的动态特性给原型添加属性|方法，如果要添加的方法过多,则有大量重复代码。<br>② 直接替换原型对象：<br>01 替换前后创建的对象所指向的原型对象不一致<br>02 替换原型对象会切断和之前的原型对象之间的关系</p>
<p><strong>原型对象的使用注意</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">① 访问属性:构造函数创建出来的对象在访问属性的时候,会先在实例内查找,如果没有找到则进一步到对应的原型对象中查找。</div><div class="line">② 设置属性:在使用点语法进行赋值的时候,无法操作到对应的原型对象,如果该属性在对象中已经存在，则修改该属性的值。如果该属性在对象中尚未存在,则新增该属性。</div><div class="line">③ 设置原型对象的属性:</div><div class="line">[<span class="number">01</span>] 设置原型对象的属性,只能通过构造函数.Prototype的方式替换原型对象的方式设置。</div><div class="line">[<span class="number">02</span>] 如果原型对象的属性是值类型，那么只能通过Person.prototype.属性的方式修改其值。如果原型对象的属性是引用类型,那么可以通过对象名.引用对象.属性名的方式设置修改：</div><div class="line">            (<span class="number">001</span>) 使用构造函数创建出来的多个对象的原型对象中的该属性指向的是同一块数据。</div><div class="line">            (<span class="number">002</span>) 某个对象对该原型对象属性进行了修改会影响到其他的对象。</div></pre></td></tr></table></figure></p>
<p><code>__proto__</code>属性说明：<code>__proto__</code>是一个非标准属性,即ECMAScript中并不包含该属性,这只是某些浏览器为了方便开发人员开发和调试而提供的一个属性,不具备通用性。建议:在调试的时候可以使用该属性,但不能出现在正式的代码中。</p>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><blockquote>
<p>关于继承，通俗说子继父业。在JavaScript中，Object是所有对象的父级|父类型|超类型：js中所有的对象都直接或间接的继承自Object。</p>
</blockquote>
<h2 id="相关方法"><a href="#相关方法" class="headerlink" title="相关方法"></a>相关方法</h2><p>在讲继承之前，我们必须先了解一些相关的方法。</p>
<h3 id="hasOwnProperty和in属性操作"><a href="#hasOwnProperty和in属性操作" class="headerlink" title="hasOwnProperty和in属性操作"></a>hasOwnProperty和in属性操作</h3><p><strong>in关键字</strong><br>作用：用来检查对象中是否存在某个属性(不区分实例属性和原型属性)。语法：“属性名” in 对象。代码示例:<br><!-- more --><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置构造函数的原型对象的属性</span></div><div class="line">    Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="comment">//04 使用in关键字判断对象中是否存在以下属性:name age sayHello</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"age"</span> <span class="keyword">in</span> p1);       <span class="comment">//false</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"name"</span> <span class="keyword">in</span> p1);      <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"sayHello"</span> <span class="keyword">in</span> p1);  <span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>对象的hasOwnProperty方法</strong><br>作用：用来检查对象中是否存在指定的属性(只检查实例属性)<br>语法：对象.hasOwnProperty(“属性名”)<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置构造函数的原型对象的属性</span></div><div class="line">    Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</div><div class="line">    &#125;</div><div class="line">    Person.prototype.des = <span class="string">"默认的描述信息"</span>;</div><div class="line">    <span class="comment">//03 创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="comment">//04 使用hasOwnProperty方法判断该属性是否是对象的实例属性</span></div><div class="line">    <span class="built_in">console</span>.log(p1.hasOwnProperty(<span class="string">"age"</span>));       <span class="comment">//false</span></div><div class="line">    <span class="built_in">console</span>.log(p1.hasOwnProperty(<span class="string">"name"</span>));      <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(p1.hasOwnProperty(<span class="string">"sayHello"</span>));  <span class="comment">//false</span></div><div class="line">    <span class="built_in">console</span>.log(p1.hasOwnProperty(<span class="string">"des"</span>));       <span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>判断某对象中存在且只存在某个原型属性</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isProperty</span>(<span class="params">obj, property</span>) </span>&#123;</div><div class="line">       <span class="keyword">return</span> !obj.hasOwnProperty(property) &amp;&amp; (property <span class="keyword">in</span> obj);</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<h3 id="constructor构造器属性"><a href="#constructor构造器属性" class="headerlink" title="constructor构造器属性"></a>constructor构造器属性</h3><p><strong>说明</strong><br>  使用构造函数创建对象,则</p>
<pre><code>原型对象中的constructor属性指向对应的构造函数
实例对象中的constructor指向对应的构造函数,其中这里的constructor就是从原型中获取的即constructor时实例对象中的原型属性,而非实例属性
</code></pre><p><strong>代码验证</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供一个构造函数</span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">       <span class="keyword">this</span>.name = name;</div><div class="line">   &#125;</div><div class="line">   <span class="comment">//02 设置构造函数的原型对象的属性</span></div><div class="line">   Person.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</div><div class="line">   &#125;;</div><div class="line">   Person.prototype.des = <span class="string">"默认的描述信息"</span>;</div><div class="line">   <span class="comment">//03 创建对象</span></div><div class="line">   <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">isProperty</span>(<span class="params">obj, property</span>) </span>&#123;</div><div class="line">       <span class="keyword">return</span> !obj.hasOwnProperty(property) &amp;&amp; (property <span class="keyword">in</span> obj);</div><div class="line">   &#125;</div><div class="line">   <span class="built_in">console</span>.log(isProperty(p1, <span class="string">"constructor"</span>));    <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<h3 id="isprotoTypeOf和instance"><a href="#isprotoTypeOf和instance" class="headerlink" title="isprotoTypeOf和instance"></a>isprotoTypeOf和instance</h3><p><strong>isprotoTypeOf</strong><br>作用：判断是否是某个实例对象的原型对象<br>语法:构造函数.protoType.isPrototypeOf(对象)<br>用法示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">    Person.prototype.name = <span class="string">"嘿嘿"</span>;</div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(Person.prototype.isPrototypeOf(p1));<span class="comment">//rue</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.isPrototypeOf(p1));<span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(Dog.prototype.isPrototypeOf(p1));<span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>instance</strong><br>作用：用于检查对象是否是某个构造函数(类型)的实例<br>语法：对象 instance 构造函数<br>注意：所有的对象都是Object构造函数（类型）的实例<br>用法示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">    <span class="built_in">console</span>.log(arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>);      <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Array</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);   <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(arr <span class="keyword">instanceof</span> <span class="built_in">Object</span>);     <span class="comment">//true</span></div><div class="line">    <span class="comment">//instanceOf在判断的时候,算上整条原型链</span></div><div class="line">    <span class="comment">//arr 是Array 和Object 任何一个类的示例</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="继承-1"><a href="#继承-1" class="headerlink" title="继承"></a>继承</h2><h3 id="继承基本概念"><a href="#继承基本概念" class="headerlink" title="继承基本概念"></a>继承基本概念</h3><p><strong>继承</strong>：即通过一定的方式实现让某个类型A获取另外一个类型B的属性或方法。其中类型A称之为子类型，类型B称之为父类型或超类型。</p>
<p><strong>javaScript中的继承</strong><br>Object是所有对象的父级|父类型|超类型：js中所有的对象都直接或间接的继承自Object。<br>继承有两种方式：接口继承和实现继承，在js中只支持实现继承，实现继承主要依赖原型链来完成。<br><strong>JavaScript中实现继承的几种方式</strong>：<br>说明:其他语言中继承通常通过类来实现，js中没有类的概念，js中的继承是某个对象继承另外一个对象，是基于对象的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">01 原型式继承</div><div class="line">02 原型链继承</div><div class="line">03 经典继承(借用构造函数)</div><div class="line">04 组合继承</div></pre></td></tr></table></figure></p>
<h3 id="原型式继承"><a href="#原型式继承" class="headerlink" title="原型式继承"></a>原型式继承</h3><p><strong>原型链继承的方式A</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置原型对象的属性</span></div><div class="line">    Person.prototype.className = <span class="string">"逍遥派1班"</span>;</div><div class="line">    <span class="comment">//03 使用构造函数来创建原型对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">10</span>);</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>,<span class="number">20</span>);</div><div class="line">    <span class="comment">//04 打印p1和p2对象中的className属性</span></div><div class="line">    <span class="built_in">console</span>.log(p1.className);</div><div class="line">    <span class="built_in">console</span>.log(p2.className);</div><div class="line">    <span class="comment">//结论:对象p1和p2继承了构造函数原型对象中的属性className</span></div><div class="line">    <span class="comment">//但是这并不是严格意义上的继承</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>原型链继承的方式B</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置原型对象的属性</span></div><div class="line">    Person.prototype = &#123;</div><div class="line">        <span class="attr">constructor</span>:Person,</div><div class="line">        <span class="attr">className</span>:<span class="string">"逍遥派1班"</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//03 使用构造函数来创建原型对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">10</span>);</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">"李四"</span>,<span class="number">20</span>);</div><div class="line">    <span class="comment">//04 打印p1和p2对象中的className属性</span></div><div class="line">    <span class="built_in">console</span>.log(p1.className);</div><div class="line">    <span class="built_in">console</span>.log(p2.className);</div><div class="line">    <span class="comment">//结论:对象p1和p2继承了构造函数原型对象中的属性className</span></div><div class="line">    <span class="comment">//注意:使用原型替换的方式实现继承的时候,原有原型对象中的属性和方法会丢失</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>原型链继承的方式C</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供超类型|父类型构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperClass</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'SuperClass的名称'</span>;</div><div class="line">    <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//02 设置父类型的原型属性和原型方法</span></div><div class="line">SuperClass.prototype.info = <span class="string">'SuperClass的信息'</span>;</div><div class="line">SuperClass.prototype.showInfo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.info);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//03 提供子类型</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubClass</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"><span class="comment">//04 设置继承(原型对象继承)</span></div><div class="line">SubClass.prototype = SuperClass.prototype;</div><div class="line">SubClass.prototype.constructor = SubClass;</div><div class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> SubClass();</div><div class="line"><span class="built_in">console</span>.log(sub.name);          <span class="comment">//undefined</span></div><div class="line"><span class="built_in">console</span>.log(sub.info);          <span class="comment">//SuperClass的信息</span></div><div class="line">sub.showInfo();                 <span class="comment">//SuperClass的信息</span></div><div class="line">sub.showName();                 <span class="comment">//sub.showName is not a function</span></div></pre></td></tr></table></figure></p>
<p>点评：上面的方法可以可以继承超类型中的原型属性和原型方法，但是无法继承实例属性和实例方法</p>
<h3 id="原型链继承"><a href="#原型链继承" class="headerlink" title="原型链继承"></a>原型链继承</h3><p>实现思想：利用原型（链）让一个对象继承另一个对象的属性和方法<br>实现本质：重写原型对象</p>
<p><strong>原型链</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">① 每个构造函数都有原型对象</div><div class="line">② 每个对象都有自己的构造函数</div><div class="line">③ 每个构造函数的原型都是一个对象</div><div class="line">④ 那么这个构造函数的原型对象也有自己的构造函数</div><div class="line">⑤ 那么这个构造函数的原型对象的构造函数也有自己的原型对象</div><div class="line">以上形成一个链式的结构,称之为原型链</div></pre></td></tr></table></figure></p>
<p><strong>原型链中的属性搜索原则</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">当访问某个对象的成员的时候,会先在自身中查找,如果找到则直接使用</div><div class="line">如果在自身中没有找到,则去当前创建当前对象的构造函数的原型对象中查找,如果找到了则直接使用</div><div class="line">如果在该原型对象中没有找到,则继续查找原型对象的原型对象(创建该原型对象的构造函数所对应的原型对象),如果找到则直接使用</div><div class="line">如果在原型对象的原型对象中也没有找到,则继续向上搜索....</div><div class="line">直到Object的原型对象,若还是没有,则返回undefined(属性)或报错(方法)。</div></pre></td></tr></table></figure></p>
<p><strong>基本写法·代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供超类型|父类型</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperClass</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'SuperClass的名称'</span>;</div><div class="line">    <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//02 设置父类型的原型属性和原型方法</span></div><div class="line">SuperClass.prototype.info = <span class="string">'SuperClass的信息'</span>;</div><div class="line">SuperClass.prototype.showInfo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.info);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//03 提供子类型</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubClass</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"><span class="comment">//04 设置继承(原型对象继承)</span></div><div class="line">SubClass.prototype = <span class="keyword">new</span> SuperClass();</div><div class="line">SubClass.prototype.constructor = SubClass;</div><div class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> SubClass();</div><div class="line"><span class="built_in">console</span>.log(sub.name);          <span class="comment">//SuperClass的名称</span></div><div class="line"><span class="built_in">console</span>.log(sub.info);          <span class="comment">//SuperClass的信息</span></div><div class="line">sub.showInfo();                 <span class="comment">//SuperClass的信息</span></div><div class="line">sub.showName();                 <span class="comment">//SuperClass的名称</span></div></pre></td></tr></table></figure></p>
<p>点评：可以继承父类型中的原型属性|原型方法,以及实例属性和实例方法</p>
<p><strong>注意点</strong><br>① 确定原型和实例的关系 instanceof + isPrototypeOf()<br>② 注意重写原型对象的位置，必须先实现原型继承，然后再设置子对象的原型属性和原型方法<br>③ 完成继承之后，不能使用字面量的方式来创建原型[因为会切断原型]</p>
<p><strong>问题</strong><br>① 父对象的实例属性会转换为子类型原型的原型属性，而如果父类型是实例属性是引用类型则会存在共享问题<br>② 在创建子类型的实例时，不能向父类型的构造函数中传递参数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供父对象的构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//02 在构造函数中中设置实例属性,该属性为引用类型</span></div><div class="line">    <span class="keyword">this</span>.family = [<span class="string">'哥哥'</span>,<span class="string">'姐姐'</span>,<span class="string">'爸爸'</span>,<span class="string">'妈妈'</span>];</div><div class="line">&#125;;</div><div class="line"><span class="comment">//03 提供子对象的构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="comment">//04 设置原型继承</span></div><div class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</div><div class="line"><span class="comment">//05 创建父对象构造函数的实例对象,并对内部的实例化属性进行修改</span></div><div class="line"><span class="keyword">var</span> subDemo1 = <span class="keyword">new</span> SubType();</div><div class="line"><span class="keyword">var</span> subDemo2 = <span class="keyword">new</span> SubType();</div><div class="line">alert(subDemo1.family);      <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">alert(subDemo2.family);      <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">subDemo1.family.push(<span class="string">'爷爷'</span>,<span class="string">'奶奶'</span>);</div><div class="line">alert(subDemo1.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈,爷爷,奶奶</span></div><div class="line">alert(subDemo2.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈,爷爷,奶奶</span></div></pre></td></tr></table></figure></p>
<h3 id="经典继承（借用构造函数）"><a href="#经典继承（借用构造函数）" class="headerlink" title="经典继承（借用构造函数）"></a>经典继承（借用构造函数）</h3><p>经典继承又称为借用构造函数|伪造继承</p>
<p><strong>基本思想</strong><br>在子类型构造函数的内部调用超类型|父类型构造函数<br>说明：需要借助call|apply方法<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供父类型(对象)的构造函数</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">      <span class="comment">//02 在构造函数中中设置实例属性,该属性为引用类型</span></div><div class="line">      <span class="keyword">this</span>.family = [<span class="string">'哥哥'</span>,<span class="string">'姐姐'</span>,<span class="string">'爸爸'</span>,<span class="string">'妈妈'</span>];</div><div class="line">      <span class="comment">//实例属性</span></div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;;</div><div class="line">  SuperType.prototype.info = <span class="string">'父类型的原型属性'</span>;</div><div class="line">  <span class="comment">//03 提供子类型（对象）的构造函数</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">//经典继承|借用构造函数|伪造对象继承</span></div><div class="line">      <span class="comment">//SuperType.call(this);</span></div><div class="line">      <span class="comment">//构造参数传递参数</span></div><div class="line">      SuperType.call(<span class="keyword">this</span>,<span class="string">'张老汉'</span>);</div><div class="line">  &#125;;</div><div class="line">  <span class="comment">//04 创建父类型的实例对象,并对内部的实例化属性进行修改</span></div><div class="line">  <span class="keyword">var</span> subDemo1 = <span class="keyword">new</span> SubType();</div><div class="line">  <span class="keyword">var</span> subDemo2 = <span class="keyword">new</span> SubType();</div><div class="line">  alert(subDemo1.info);        <span class="comment">//undefined</span></div><div class="line">  alert(subDemo1.family);      <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">  alert(subDemo2.family);      <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">  subDemo1.family.push(<span class="string">'爷爷'</span>,<span class="string">'奶奶'</span>);</div><div class="line">  alert(subDemo1.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈,爷爷,奶奶</span></div><div class="line">  alert(subDemo2.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">  <span class="comment">//测试构造函数传递参数</span></div><div class="line">  alert(subDemo1.name);</div></pre></td></tr></table></figure></p>
<p>点评：能够继承父类型的实例属性,但是无法继承父类型的原型属性和原型方法</p>
<p><strong>经典继承的优点</strong><br>① 解决实例对象共享问题，通过调用父对象的构造函数来实现每个子类型（对象）的实例对象均拥有一份父类型实例属性和方法的副本<br>② 可以在调用call方法的时候向构造函数传递参数</p>
<p><strong>经典继承的问题</strong><br>① 冒充继承的方法无法实现函数的重用<br>② 无法继承父对象的原型属性和原型方法</p>
<h3 id="组合继承"><a href="#组合继承" class="headerlink" title="组合继承"></a>组合继承</h3><p>组合继承|伪经典继承</p>
<p><strong>基本思想</strong><br>① 使用原型链实现对原型属性和方法的继承<br>② 通过伪造(冒充)构造函数来实现对实例属性的继承<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供父类型的构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="comment">//在构造函数中中设置实例属性,该属性为引用类型</span></div><div class="line">    <span class="keyword">this</span>.family = [<span class="string">'哥哥'</span>,<span class="string">'姐姐'</span>,<span class="string">'爸爸'</span>,<span class="string">'妈妈'</span>];</div><div class="line">    <span class="comment">//实例属性</span></div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//原型方法</span></div><div class="line">SuperType.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line"><span class="comment">//02 提供子类型的构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="comment">//冒充|伪造 构造参数传递参数</span></div><div class="line">    SuperType.call(<span class="keyword">this</span>,name);</div><div class="line">&#125;;</div><div class="line">SubType.prototype = SuperType.prototype;</div><div class="line"><span class="comment">//SubType.prototype = new SuperType();</span></div><div class="line"><span class="comment">//02 创建父类型的实例对象,并对内部的实例化属性进行修改</span></div><div class="line"><span class="keyword">var</span> subDemo1 = <span class="keyword">new</span> SubType(<span class="string">'张三'</span>);</div><div class="line"><span class="keyword">var</span> subDemo2 = <span class="keyword">new</span> SubType(<span class="string">'张四'</span>);</div><div class="line">alert(subDemo1.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">alert(subDemo2.family);      <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line">subDemo1.family.push(<span class="string">'爷爷'</span>,<span class="string">'奶奶'</span>);</div><div class="line">alert(subDemo1.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈,爷爷,奶奶</span></div><div class="line">alert(subDemo2.family);    <span class="comment">//哥哥,姐姐,爸爸,妈妈</span></div><div class="line"><span class="comment">//测试构造函数传递参数</span></div><div class="line">subDemo1.showName();    <span class="comment">//张三</span></div><div class="line">subDemo2.showName();    <span class="comment">//张四</span></div></pre></td></tr></table></figure></p>
<h3 id="基本包装类型"><a href="#基本包装类型" class="headerlink" title="基本包装类型"></a>基本包装类型</h3><p>基本类型：字符串 + 数值 + null + undefined + 布尔值<br>为了便于操作基本类型，ECMAScript提供了三个特殊的引用类型：<code>Boolean + Number + String</code>。<br>上述类型和其他的引用类型类似，同时也具备与各自的基本类型相应的特殊行为，每当我们读取一个基本类型的值的时候，后台就会创建一个对应的基本包装类型对象，从而让我们能够调用一些方法来操作这些数据。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'测试字符串'</span>;</div><div class="line"><span class="built_in">console</span>.log(str.length);            <span class="comment">//5</span></div><div class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">2</span>));      <span class="comment">//字符串</span></div></pre></td></tr></table></figure></p>
<p><code>思考</code>：属性和方法本是对象的特征，字符串如何能够拥有length属性以及其他类似subString等方法，内部怎么实现的？<br>基本类型值并不是对象，因此从逻辑上讨论他们不应该有属性和方法。 内部的具体处理:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">（<span class="number">1</span>）创建<span class="built_in">String</span>类型的一个实例对象</div><div class="line">（<span class="number">2</span>）在实例对象上面读取指定的属性（length）,调用指定的方法（subString）</div><div class="line">（<span class="number">3</span>）销毁该对象</div></pre></td></tr></table></figure></p>
<p><strong>Number</strong><br>Number是与数字值相对应的引用类型。<br>创建Number类型的对象：var num = new Number(10);</p>
<p><strong> String </strong><br>String是字符串的对象包装类型。<br>创建字符串类型的对象：var str = new String(‘hello World’);</p>
<p><strong>Boolean</strong><br>Boolean是与布尔值对象的引用类型。<br>可以通过调用Boolean构造函数传递参数来创建boolean类型的对象。<br>var bool = new Boolean(true);</p>
<p><strong>基本包装类型的代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//001 String</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">'测试字符串'</span>;</div><div class="line"><span class="built_in">console</span>.log(str.length);            <span class="comment">//5</span></div><div class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">2</span>));      <span class="comment">//字符串</span></div><div class="line"><span class="comment">//002 Number</span></div><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">10</span>);</div><div class="line"><span class="built_in">console</span>.log(num);                   <span class="comment">//Number &#123;[[PrimitiveValue]]: 10&#125;</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);            <span class="comment">//object</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="number">10</span>);             <span class="comment">//number</span></div><div class="line"><span class="comment">//003 Boolean</span></div><div class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>);</div><div class="line"><span class="built_in">console</span>.log(bool);                  <span class="comment">//Boolean &#123;[[PrimitiveValue]]: true&#125;</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> bool);           <span class="comment">//object</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">true</span>);           <span class="comment">//boolean</span></div></pre></td></tr></table></figure></p>
<p><strong>基本包装类型的注意点</strong><br>[1] 对象还是基本数据类型值？<br>对象：通过new 调用构造函数创建出来的是对象<br>基本数据类型值：直接通过字面量方式赋值|通过省略new关键字调用构造函数方式创建的是基本数据类型值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ex:</div><div class="line">    <span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'hello'</span>);</div><div class="line">    <span class="keyword">var</span> str2 = <span class="string">'hello'</span>;</div><div class="line">    <span class="keyword">var</span> str3 = <span class="built_in">String</span>(<span class="string">'hello'</span>);</div><div class="line">    说明：以上代码中，str1是对象，而str2和str3是字符串（基本数据类型值）</div></pre></td></tr></table></figure></p>
<p>[2] 相等问题<br>基本类型值判断相等=&gt;值相等<br>引用类型值判断相等=&gt;值相等且引用相等<br>对象是引用类型，因此在判断相等的时候有诸多的注意点和容易出错的地方<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">ex</div><div class="line">    <span class="keyword">var</span> str1 = <span class="string">'这是一个字符串'</span>;           <span class="comment">//基本数据类型</span></div><div class="line">    <span class="keyword">var</span> str2 = <span class="built_in">String</span>(<span class="string">'这是一个字符串'</span>);   <span class="comment">//基本数据类型</span></div><div class="line">    <span class="built_in">console</span>.log(str1 == str2);        <span class="comment">//true 相等</span></div><div class="line">    <span class="keyword">var</span> str3 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'这是一个字符串'</span>);  <span class="comment">//引用类型-对象</span></div><div class="line">    <span class="built_in">console</span>.log(str1 == str3);    <span class="comment">//true    //值相等</span></div><div class="line">    <span class="built_in">console</span>.log(str2 == str3);    <span class="comment">//true    //值相等</span></div><div class="line">    <span class="built_in">console</span>.log(str1 === str3); <span class="comment">//false //值相等,但是引用不相等</span></div><div class="line">    <span class="built_in">console</span>.log(str2 === str3); <span class="comment">//false //值相等,但是引用不相等</span></div><div class="line">    <span class="comment">//判断下面的变量是否相等</span></div><div class="line">    <span class="keyword">var</span> num1 = <span class="number">10</span>;                  <span class="comment">//基本数据类型</span></div><div class="line">    <span class="keyword">var</span> num2 = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">10</span>);      <span class="comment">//对象</span></div><div class="line">    <span class="built_in">console</span>.log(num1 == num2);      <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(num1 ===  num2);    <span class="comment">//false</span></div><div class="line">    <span class="keyword">var</span> bool1 = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">var</span> bool2 = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>);</div><div class="line">    <span class="built_in">console</span>.log(bool1 == bool2);    <span class="comment">//true</span></div><div class="line">    <span class="built_in">console</span>.log(bool1 === bool2);   <span class="comment">//false</span></div></pre></td></tr></table></figure></p>
<h1 id="原型链及相关属性方法简单说明"><a href="#原型链及相关属性方法简单说明" class="headerlink" title="原型链及相关属性方法简单说明"></a>原型链及相关属性方法简单说明</h1><h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><p><strong>代码示例</strong><br><!-- more --><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供Person构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置Person的原型对象</span></div><div class="line">    Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建Student构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">number</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.numer = number</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//04 设置Student的原型对象</span></div><div class="line">    Student.prototype = <span class="keyword">new</span> Person();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>原型链图示例</strong><br><img src="/assets/img/Snip20170213_10.png" alt="原型"></p>
<h2 id="Object对象"><a href="#Object对象" class="headerlink" title="Object对象"></a>Object对象</h2><p><strong>Object构造函数</strong><br>01 使用Object构造函数创建字符串对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 创建字符串对象</span></div><div class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"测试字符串"</span>);</div><div class="line"><span class="keyword">var</span> str2 = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">"测试字符串"</span>);</div><div class="line"><span class="keyword">var</span> str3 = str1;</div><div class="line"><span class="comment">//注意:对象比较相等(需要引用[地址]相等)</span></div><div class="line"><span class="built_in">console</span>.log(str1 == str2);      <span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(str1 === str2);     <span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(str1 === str3);     <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>02 使用Object构造函数创建数字对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="number">10</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);    <span class="comment">//object</span></div></pre></td></tr></table></figure></p>
<p>03 使用Object构造函数创建布尔类型对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="literal">true</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> bool);   <span class="comment">//object</span></div></pre></td></tr></table></figure></p>
<p><strong>js中所有的内置或自定义对象都继承自Object对象,几乎所有的对象都可以使用Object.prototype上面的属性和方法</strong></p>
<h2 id="Object-prototype"><a href="#Object-prototype" class="headerlink" title="Object.prototype"></a>Object.prototype</h2><p>01 因为js中所有的对象都继承自Obejct,都可以使用Object对象的原型属性和方法,因此不要轻易的扩展Object.prototype。<br>02 Object.property中的属性和方法</p>
<pre><code>① constructor 指向原型相关联的构造函数，为Object
② hasOwnProperty 判断对象中是否拥有某个实例属性(不包括原型链上面的属性)
③ isPrototypeOf  校验某个对象是否是指定对象的原型对象(整条原型链)
④ propertyIsEnumerable 属性是否存在且可枚举(使用for循环可以遍历,即目标属性能否在for循环中显示出来)
⑤ toString() 返回一个描述目标对象的字符串,对象则返回[object object]
   toString(参数) 参数出可以传入一个用于进制数的参数,该参数的默认值为10(主要针对Number类型有效)
⑥ toLocaleString 同toString,但是会做一些本地化的处理。
⑦ valueOf()  如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。
   Date对象调用该方法会返回一个时间戳。
</code></pre><p><strong>constructor</strong><br>说明：该属性指向创建该对象的构造函数，在这里为Object<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">var</span> p = <span class="keyword">new</span> Person();</div><div class="line">   <span class="built_in">console</span>.log(p.constructor);                     <span class="comment">//function Person() &#123;&#125;</span></div><div class="line">   <span class="built_in">console</span>.log(Person.prototype.constructor);      <span class="comment">//function Person() &#123;&#125;</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.constructor);      <span class="comment">//function Object() &#123; [native code] &#125;</span></div></pre></td></tr></table></figure></p>
<p><strong>hasOwnProperty</strong><br>说明：判断对象中是否拥有某个实例属性(不包括原型链上面的属性)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"默认的姓名"</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//检查对象中是否拥有指定的属性(实例属性)</span></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">p1.hasOwnProperty(<span class="string">"name"</span>);  <span class="comment">//true</span></div><div class="line">p1.hasOwnProperty(<span class="string">"age"</span>);   <span class="comment">//false</span></div><div class="line">p1.hasOwnProperty(<span class="string">"constructor"</span>);   <span class="comment">//对象的constructor是从原型对象上继承的</span></div></pre></td></tr></table></figure></p>
<p><strong>isPrototypeOf</strong><br>说明：校验某个对象是否是指定对象的原型对象(整条原型链);<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">        <span class="attr">age</span>:<span class="number">20</span>,</div><div class="line">        <span class="attr">hello</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">showName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//属性是否存在且可以枚举</span></div><div class="line">    <span class="built_in">console</span>.log(obj.propertyIsEnumerable(<span class="string">"name"</span>));      <span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>toString</strong><br>说明：返回一个描述目标对象的字符串,对象则返回[object object]<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj.toString());  <span class="comment">//打印[object Object]</span></div><div class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">    <span class="built_in">console</span>.log(arr.toString());    <span class="comment">//打印1,2,3,4,5</span></div><div class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line">    <span class="built_in">console</span>.log(num.toString());               <span class="comment">//10</span></div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(date.toString());           <span class="comment">//Mon Feb 13 2017 19:00:13 GMT+0800 (CST)</span></div><div class="line">    <span class="comment">//toString方法可以传入参数,在处理Number类型数据的时候,可以传入指定的进制</span></div><div class="line">    <span class="built_in">console</span>.log(num.toString(<span class="number">2</span>));       <span class="comment">//1010  == 1*2*2*2+0*2*2+1*2+1*1 = 10</span></div><div class="line">    <span class="built_in">console</span>.log(num.toString(<span class="number">3</span>));       <span class="comment">//101   == 1*3*3 + 0*3 + 1*1 = 10</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>toLocaleString</strong><br>说明：作用同toString方法一致，但是会做一些本地化的处理.</p>
<p><strong>valueOf</strong><br>说明：<br>① 如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。<br>② 如果是Date类型，则返回时间戳。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj + <span class="number">1</span>);       <span class="comment">//[object Object]1</span></div><div class="line">    <span class="comment">//说明:如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。</span></div><div class="line">    <span class="keyword">var</span>  o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>&#125;;</div><div class="line">    <span class="built_in">console</span>.log(o + <span class="number">1</span>); <span class="comment">//[object Object]1</span></div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(date.valueOf());        <span class="comment">//1486984088998</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="静态成员和实例成员"><a href="#静态成员和实例成员" class="headerlink" title="静态成员和实例成员"></a>静态成员和实例成员</h2><p><strong>静态成员</strong><br>    定义在构造函数上面的成员(属性和方法)</p>
<p><strong>实例成员</strong><br>    定义在实例对象上面的成员(属性和方法)</p>
<p><strong>建议</strong></p>
<pre><code>① 把工具类的方法写成静态方法
② 把和对象相关的方法写成实例方法(成员)
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"张三"</span>;   <span class="comment">//实例属性</span></div><div class="line">        <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//为Person构造函数添加静态成员</span></div><div class="line">    Person.des = <span class="string">"描述信息"</span>;</div><div class="line">    Person.add = <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"添加信息"</span> + msg);</div><div class="line">    &#125;;</div><div class="line">    Person.add(<span class="string">"这是一个+操作"</span>);</div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    p1.showName();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<h2 id="Function构造函数"><a href="#Function构造函数" class="headerlink" title="Function构造函数"></a>Function构造函数</h2><p><strong>函数创建的几种方式</strong><br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> 函数声明</div><div class="line"><span class="number">02</span> 字面量的方式创建</div><div class="line"><span class="number">03</span> 使用<span class="keyword">new</span> <span class="built_in">Function</span>的形式创建</div></pre></td></tr></table></figure></p>
<p> <strong>函数创建代码示例</strong><br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"函数声明"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> func02 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"字面量方式创建"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//使用Function构造函数创建</span></div><div class="line">  <span class="keyword">var</span> func03 = <span class="keyword">new</span> <span class="built_in">Function</span>();</div></pre></td></tr></table></figure></p>
<p><strong>Function构造函数创建函数</strong><br>  参数说明:可以传入多个参数<br>  最后一个参数:<code>传入的最后一个参数为函数的函数体内容</code><br>  其他参数:创建出来的函数的参数<br>  如果只有一个参数,则表示这是该函数的函数体内容<br>  传递参数的格式:以字符串的方式进行传参<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//需求01 使用Function构造函数创建一个函数对象,该函数执行一行打印操作</span></div><div class="line"><span class="keyword">var</span> funcName01 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"console.log('让我掉下眼泪的,不止昨夜的酒')"</span>);</div><div class="line">funcName01();</div><div class="line"><span class="comment">//需求02 使用Function构造函数创建一个函数对象,该函数需要接受两个参数,要求返回他们的和</span></div><div class="line"><span class="keyword">var</span> funcName02 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"return a + b;"</span>);</div><div class="line"><span class="built_in">console</span>.log(funcName02(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">//30</span></div></pre></td></tr></table></figure></p>
<p><strong>解决函数体代码过长的问题</strong><br>（1）使用转义字符，写在一行中<br>（2）使用+操作符来拼接字符串<br>（3）使用``操作符来管理字符串<br>（4）使用模板先处理字符串，然后在js中获得模板中的内容</p>
<h2 id="arguments、length和callee"><a href="#arguments、length和callee" class="headerlink" title="arguments、length和callee"></a>arguments、length和callee</h2><p><strong>arguments参数</strong><br>说明：在js中的函数中，有两个隐藏的参数分别是this和arguments<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">arguments</span> 是一个类似数组的结构,可以通过下标来操作函数的参数,但并非数组类型的。</div><div class="line">在函数调用的时候,会将函数的所有参数都传入<span class="built_in">arguments</span>对象中保存,因此我们可以通过操作<span class="built_in">arguments</span>属性来操作参数</div><div class="line">形参的数量大于实参的数量,则依次传入,未传入的设置为<span class="literal">undefined</span></div><div class="line">形参的数量小于实参的数量,则<span class="built_in">arguments</span>中保存实际的值</div></pre></td></tr></table></figure></p>
<p><strong>length</strong></p>
<pre><code>函数内部的arguments数组拥有length属性,可以通过该属性获取用户调用时传入的实参的个数

函数本身有一个length属性,可以通过该属性来获取形式参数的个数
</code></pre><p><strong>callee方法</strong></p>
<pre><code>函数内部的arguments对象中,有一个callee方法,该方法指向函数自身,常用于匿名函数的递归调用。
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);  <span class="comment">//调用函数时实际传入的参数数量</span></div><div class="line">    &#125;</div><div class="line">    func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div><div class="line">    <span class="built_in">console</span>.log(func.length);           <span class="comment">//预期的参数数量 —— 函数的形参数量</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params">a,b</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(a, b);</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">    &#125;</div><div class="line">    func02(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);  <span class="comment">//实参的数量 &gt; 形参的数量 则arguments保存实参的值</span></div><div class="line">    func02(<span class="number">1</span>);      <span class="comment">//实参的数量 &lt; 形参的数量 则不足的补undefined</span></div><div class="line">    <span class="comment">//匿名函数调用</span></div><div class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//如果需要在该函数中调用自身,则可以使用arguments.callee方法</span></div><div class="line">        <span class="built_in">arguments</span>.callee();</div><div class="line">    &#125;)();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<h2 id="Function的应用"><a href="#Function的应用" class="headerlink" title="Function的应用"></a>Function的应用</h2><p><strong>01 数组去重</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"arr"</span>,<span class="string">`</span></div><div class="line">    var array = [];</div><div class="line">    for(var i = 0 ; i&lt;arr.length; i++)</div><div class="line">    &#123;</div><div class="line">        if(array.indexOf(arr[i]) == -1)</div><div class="line">        &#123;</div><div class="line">            array.push(arr[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return array;</div><div class="line">`);</div><div class="line">    <span class="built_in">console</span>.log(func([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>]));;</div></pre></td></tr></table></figure></p>
<p><strong>02 返回传入函数中所有数据的最大值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> maxNumber = <span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (maxNumber &lt; <span class="built_in">arguments</span>[i])</div><div class="line">        &#123;</div><div class="line">            maxNumber = <span class="built_in">arguments</span>[i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> maxNumber;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">30</span>, <span class="number">21</span>));</div></pre></td></tr></table></figure></p>
<h2 id="eval-简单说明"><a href="#eval-简单说明" class="headerlink" title="eval 简单说明"></a>eval 简单说明</h2><p><strong>eval 的基本使用</strong><br>eval函数用来讲字符串转换为JS的代码,并执行</p>
<p><strong>eval 处理JSON数据代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> jsonData = <span class="string">'&#123;"name":"张三","age":18&#125;'</span>;</div><div class="line">    <span class="comment">//把json的数据转换为对象</span></div><div class="line">    <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(jsonData);</div><div class="line">    <span class="built_in">console</span>.log(obj);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> jsonData = <span class="string">'&#123;"name":"张三","age":18&#125;'</span>;</div><div class="line">    <span class="comment">//var obj = eval(jsonData); //注意:如果直接这样写代码则会报错</span></div><div class="line">    <span class="comment">//正确的处理方式</span></div><div class="line">    <span class="comment">//方式一</span></div><div class="line">    <span class="built_in">eval</span>(<span class="string">"var obj = "</span> + jsonData);</div><div class="line">    <span class="built_in">console</span>.log(obj);</div><div class="line">    <span class="comment">//方式二</span></div><div class="line">    <span class="comment">//说明:使用eval来解析json格式字符串的时候,会将&#123;&#125;解析为代码块,而不是字面量</span></div><div class="line">    <span class="comment">// 在使用的时候为了避免这种错误,需要在JSO的最外面加上(),如此则会把大括号当做一条语句来解析</span></div><div class="line">    <span class="keyword">var</span> o = <span class="built_in">eval</span>(<span class="string">"("</span>+jsonData+<span class="string">")"</span>);</div><div class="line">    <span class="built_in">console</span>.log(o);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p><strong>eval 注意事项</strong></p>
<pre><code>① eval函数本身功能强大,但它的特性也为程序带来了很大的不确定性,因此在开发中并不推荐使用。
② eval函数是动态的执行代码,因此其效率不如直接执行静态脚本高。
</code></pre><p><strong>eval和Function比较</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">相同点:都能够把字符串转换为Javascript的代码</div><div class="line">不同点:eval转换为js的代码之后马上就执行,而Function需要先创建函数,调用函数之后才会执行。</div></pre></td></tr></table></figure></p>
<h2 id="Function-prototype原型链"><a href="#Function-prototype原型链" class="headerlink" title="Function.prototype原型链"></a>Function.prototype原型链</h2><p><strong>关于Function和自定义构造函数的原型对象</strong></p>
<pre><code>Function.prototype 是一个空的函数
自定义构造函数的原型对象是一个空的对象
</code></pre><p>说明</p>
<pre><code>Function也可以被当做是一个构造函数
通过new Function创建出来的函数,可以认为是Function的实例化对象。
Function的原型对象是一个空的函数,这个空的函数也是一个对象,它的原型对象是Object.prototype。
在JS中,Object的原型对象是所有对象的祖宗。

Function是构造函数,则其原型对象为空的函数
        空的函数的原型对象为Object.prototype
Function本身也是对象,则其构造函数为:function Function() { [native code] }  是自身
同Object类型
Object本身是构造函数,其原型对象是Object.prototype
Object本身也是对象,其构造函数为:function Function() { [native code]
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供Person构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置Person的原型对象</span></div><div class="line">    Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建Student构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">number</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.numer = number</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//04 设置Student的原型对象</span></div><div class="line">    Student.prototype = <span class="keyword">new</span> Person();</div></pre></td></tr></table></figure></p>
<p><strong>完整的原型链示意图</strong><br><img src="/assets/img/Snip20170213_12.png" alt="原型"><br><strong>Object和Function的关系</strong><br>01 Object构造函数是通过Function构造函数实例化出来的<br>02 Function构造函数也是通过Function构造函数实例化出来的</p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//检查对象是否是某个构造函数的实例</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</div><div class="line">    <span class="comment">//注意:以上打印结果均为true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="对象的拷贝操作"><a href="#对象的拷贝操作" class="headerlink" title="对象的拷贝操作"></a>对象的拷贝操作</h2><p><strong>浅拷贝</strong><br>如果对象中的属性是引用类型的值,那么存在数据共享问题,修改某个对象会对拷贝的对象产生影响<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>,<span class="attr">car</span>:&#123;<span class="attr">number</span>:<span class="string">"2017"</span>,<span class="attr">type</span>:<span class="string">"火车"</span>&#125;&#125;;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="comment">//obj对象需要拷贝o对象中所有的属性</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> o )&#123;</div><div class="line">    obj[i]  = o[i];</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(obj);</div><div class="line">o.car.type = <span class="string">"飞船"</span>;</div><div class="line"><span class="built_in">console</span>.log(obj);</div></pre></td></tr></table></figure></p>
<p><strong>深拷贝</strong></p>
<pre><code>如果对象中的属性是值类型,那么就直接拷贝赋值
如果对象中的属性是引用类型,那么就再次调用拷贝方法,遍历对象
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>,<span class="attr">car</span>:&#123;<span class="attr">number</span>:<span class="string">"2017"</span>,<span class="attr">type</span>:<span class="string">"火车"</span>&#125;&#125;;</div><div class="line"> <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj,tmp</span>) </span>&#123;</div><div class="line">     tmp = tmp || &#123;&#125;;    <span class="comment">//如果没有传入,那么就创建一个空的对象</span></div><div class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)</div><div class="line">     &#123;</div><div class="line">         <span class="keyword">if</span> (obj.hasOwnProperty(i))   <span class="comment">//只拷贝实例属性</span></div><div class="line">         &#123;</div><div class="line">             <span class="comment">//判断是否是引用类型</span></div><div class="line">             <span class="keyword">if</span> ((<span class="keyword">typeof</span> obj[i]) == <span class="string">'object'</span>)</div><div class="line">             &#123;</div><div class="line">                 <span class="comment">//重新调用拷贝方法</span></div><div class="line">                 tmp[i] = <span class="built_in">Array</span>.isArray(obj[i]) ? [] :&#123;&#125;;</div><div class="line">                 deepCopy(obj[i],tmp[i]);</div><div class="line">             &#125;<span class="keyword">else</span></div><div class="line">             &#123;</div><div class="line">                 <span class="comment">//直接拷贝</span></div><div class="line">                 tmp[i] = obj[i];</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line">deepCopy(o,obj);</div><div class="line"> <span class="built_in">console</span>.log(obj);</div><div class="line"> o.car.type = <span class="string">"测试的类型"</span>;</div><div class="line"> <span class="built_in">console</span>.log(obj);</div><div class="line"> <span class="built_in">console</span>.log(o);</div></pre></td></tr></table></figure></p>
<p><strong>注意isArray的兼容性问题</strong><br>isArray是ECMA5中新推出的方法,需要处理兼容性问题<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">Array</span>.isArray != <span class="string">"function"</span>)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">Array</span>.isArray = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) == <span class="string">'[object Array]'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Number原型扩展"><a href="#Number原型扩展" class="headerlink" title="Number原型扩展"></a>Number原型扩展</h2><p>小案例：在Number的原型对象上面定义一个新的方法add(),该方法接收一个参数,并将该参数与自身的值进行相加,然后进行返回。<br>代码实现<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span> + num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> n = <span class="number">10</span>;</div><div class="line"><span class="built_in">console</span>.log(n.add(<span class="number">3</span>));</div><div class="line"><span class="comment">//console.log(5.add(5));  错误:解析器无法处理字面量的这种情况</span></div><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">50</span>);</div><div class="line"><span class="built_in">console</span>.log(num.add(<span class="number">20</span>));       <span class="comment">//70</span></div><div class="line"><span class="built_in">console</span>.log((<span class="number">1</span>).add(<span class="number">4</span>));        <span class="comment">//5 使用()把数字包起来</span></div></pre></td></tr></table></figure></p>
<p>使用注意<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">（01）使用数字变量可以调用成功</div><div class="line">（02）使用数字表达式可以调用成功</div><div class="line">（03）直接使用数字字面量方式调用失败</div></pre></td></tr></table></figure></p>
<p>js的语法解析器无法处理数字字面量这种情况。</p>
<h2 id="With语句"><a href="#With语句" class="headerlink" title="With语句"></a>With语句</h2><p><strong>with语句简单介绍</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">with语句是js中一个强大但有争议的特性。</div><div class="line">with语句允许我们将一个对象的所有属性引用到当前的作用域</div><div class="line">允许我们无需使用拥有者对象的前缀，就可以直接对这些属性进行引用和赋值操作。</div></pre></td></tr></table></figure></p>
<p><code>注意</code>：ECMAScript5规范在严格模式下已经禁用了该语句，在开发中不推荐使用，但是要求能够看懂with的代码。</p>
<p><strong>with语句内部细节</strong><br><code>说明</code>： with语句会创建一个作用域，在该作用域内，在引用特定对象的属性时，可以不使用前缀。<br>应用场景：<code>对深层级对象的引用进行缩短</code>。</p>
<p><strong>在with作用域内部引用属性</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">//[01] 测试with语句作用域内对对象属性的引用</span></div><div class="line">    <span class="comment">//01 提供全局变量,名称为testValue</span></div><div class="line">    <span class="keyword">var</span> testValue = <span class="string">'测试使用的全局变量'</span>;</div><div class="line">    <span class="comment">//02 提供对象,对象内部提供属性</span></div><div class="line">    <span class="keyword">var</span> testObject = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">'对象的名称属性'</span>,</div><div class="line">        <span class="attr">testValue</span>:<span class="string">'对象内部的属性'</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//03 使用with语句引用</span></div><div class="line">    <span class="keyword">with</span>(testObject)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">console</span>.log(name);          <span class="comment">//对象的名称属性</span></div><div class="line">        <span class="built_in">console</span>.log(testValue);     <span class="comment">//对象内部的属性</span></div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);          <span class="comment">//window</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(testValue);         <span class="comment">//测试使用的全局变量</span></div><div class="line"><span class="string">``</span><span class="string">`   </span></div><div class="line">总结：</div><div class="line">(1) 在with语句作用域内,对象属性的优先级绝对高于在更层级作用域内定义的同名变量</div><div class="line">(2) this(函数上下文)依然指向window,并不会收到with作用域的影响</div><div class="line"></div><div class="line">**在with作用域内进行赋值操作**</div><div class="line">`<span class="string">``</span>js</div><div class="line">   <span class="comment">//01 提供一个对象,在内部提供属性</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">'对象的内部属性'</span>,</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 with语句测试对对象属性的赋值操作</span></div><div class="line">    <span class="keyword">with</span>(obj)</div><div class="line">    &#123;</div><div class="line">        name = <span class="string">'修正对象中name的值'</span>;</div><div class="line">        <span class="comment">//在作用域内部添加变量(思考?该变量是添加为全局作用域还是当前obj对象的属性?)</span></div><div class="line">        age = <span class="string">'25'</span>;</div><div class="line">        showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'name == '</span> + name);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//测试修改对象属性操作</span></div><div class="line">    <span class="built_in">console</span>.log(obj.name);</div><div class="line">    <span class="comment">//测试添加对象属性操作</span></div><div class="line">    <span class="built_in">console</span>.log(obj.age);             <span class="comment">//undefined</span></div><div class="line">    <span class="comment">//obj.showName();                 //obj.showName is not a function    console.log('____________________');</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); <span class="comment">//== name == window.name</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.name);</div><div class="line">    <span class="built_in">console</span>.log(name);</div><div class="line">    showName();             <span class="comment">//==this.showName() ==window.showName()</span></div></pre></td></tr></table></figure></p>
<p>总结：<br>（1）在with作用域的内部我们可以使用无前缀引用对象的属性进行读取和赋值的操作 但是 不能使用无前缀的方式添加属性<br>（2）如果使用无前缀的方式来添加属性[对不存在的属性进行赋值操作],那么属性将被添加到全局上下文[window|this]<br>（3）可能产生的错误:意外的引入一个全局变量,而非为with作用域对象添加属性</p>
<p><strong>with语句的问题</strong><br>（1）with作用域内操作优先级混乱<br>（2）性能不好，会大大降低js代码的执行性能<br>（3）ECMAScript5规定在严格模式下禁用with特性</p>
<p><strong>with语句简化代码的替代方案</strong><br>使用即时调用函数来替代with语句，通过函数传参的方式使用更短的引用来替代冗长的引用前缀比使用with语句消除前缀的方式更好。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span>(<span class="keyword">this</span>.style)</div><div class="line">&#123;</div><div class="line">    width = <span class="string">'200px'</span>;</div><div class="line">    height = <span class="string">'200px'</span>;</div><div class="line">    backgroundColor = <span class="string">'#ca3'</span>;</div><div class="line">    <span class="built_in">console</span>.log(width); <span class="comment">//要访问的本应该是外部的字符串变量 "错误哈哈",但是这里被解释为200px</span></div><div class="line">&#125;</div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</div><div class="line">    s.width = <span class="string">'200px'</span>;</div><div class="line">    s.height = <span class="string">'200px'</span>;</div><div class="line">    s.backgroundColor = <span class="string">'#ca3'</span>;</div><div class="line">&#125;)(<span class="keyword">this</span>.style);</div></pre></td></tr></table></figure></p>
<p><strong>使用面向过程的方式处理</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    bookList.push(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">console</span>.log(obj);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            obj.author = <span class="string">"泰戈尔-戈尔泰"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//删除操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">//删除该对象</span></div><div class="line">            bookList.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>使用函数来封装图书管理操作</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</div><div class="line">        bookList.push(bookObj);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(getBook(<span class="string">"什么是批判"</span>));</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                obj.author = authorName;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    updateBookData(<span class="string">"飞鸟集"</span>,<span class="string">"泰戈尔斯坦"</span>);</div><div class="line">   <span class="comment">//删除操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//删除该对象</span></div><div class="line">                bookList.splice(i, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>数封装-复用形式</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</div><div class="line">        bookList.push(bookObj);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(getBook(<span class="string">"什么是批判"</span>));</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getBook(name);</div><div class="line">        obj.author = authorName;</div><div class="line">    &#125;</div><div class="line">    updateBookData(<span class="string">"飞鸟集"</span>,<span class="string">"泰戈尔斯坦"</span>);</div><div class="line">    <span class="comment">//删除操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getBook(name);</div><div class="line">        <span class="keyword">var</span> index = bookList.indexOf(obj);</div><div class="line">        bookList.splice(index,<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"东京人"</span>,<span class="attr">author</span>:<span class="string">"川端康成"</span>&#125;);</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>面向对象的方式管理图书</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">&lt;scrip&gt;</div><div class="line">    <span class="keyword">var</span> obj = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">泰    <span class="function"><span class="keyword">function</span> <span class="title">BookManager</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.bookList = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">   BookManager.prototype = &#123;</div><div class="line">        <span class="attr">constructor</span>:BookManager,</div><div class="line">        <span class="attr">init</span>:<span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.bookList = arr || [];</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">addBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">bookObj</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.bookList.push(bookObj)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">getBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;,</div><div class="line">        <span class="attr">updateBookData</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.getBook(name);</div><div class="line">            obj.author = authorName;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">removeBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.getBook(name);</div><div class="line">            <span class="keyword">var</span> index = <span class="keyword">this</span>.bookList.indexOf(obj);</div><div class="line">            <span class="keyword">this</span>.bookList.splice(index,<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">//01 创建对象</span></div><div class="line">    <span class="keyword">var</span> YYManager = <span class="keyword">new</span> BookManager();</div><div class="line">    YYManager.init(obj);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//02 演示添加操作</span></div><div class="line">    YYManager.addBook(&#123;<span class="attr">name</span>:<span class="string">"花田半亩"</span>,<span class="attr">author</span>:<span class="string">"田维"</span>&#125;);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//03 演示查询操作</span></div><div class="line">    <span class="built_in">console</span>.log(YYManager.getBook(<span class="string">"花田半亩"</span>));</div><div class="line">    <span class="comment">//04 演示更新操作</span></div><div class="line">    YYManager.updateBookData(<span class="string">"花田半亩"</span>,<span class="string">"甜田"</span>);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.getBook(<span class="string">"花田半亩"</span>));;</div><div class="line">    <span class="comment">//05 演示删除操作</span></div><div class="line">    YYManager.removeBook(<span class="string">"什么是批判"</span>);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//02 创建第二个人的图书管理对象</span></div><div class="line">    <span class="keyword">var</span> wulitaotaoMManager = <span class="keyword">new</span> BookManager();</div><div class="line">    wulitaotaoMManager.init([&#123;<span class="attr">name</span>:<span class="string">"装逼速成"</span>,<span class="attr">author</span>:<span class="string">"六扇门"</span>&#125;]);</div><div class="line">    <span class="built_in">console</span>.log(wulitaotaoMManager.bookList);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>总结<br>01 提供构造函数，在构造函数内部设置实例化属性<br>02 把常用的操作提取成对象的实例方法，写在原型对象身上<br>03 提供init方法，用于初始化数据<br>04 注意：如果切断了原型对象那么需要修正内部的构造器属性指向</p>
<h1 id="变量和函数"><a href="#变量和函数" class="headerlink" title="变量和函数"></a>变量和函数</h1><blockquote>
<p>JavaScript中有严格模式和非严格模式两种运行环境,本章节主要讲严格模式及非严格模式下函数和变量的区别,最后简单讲诉了JavaScript作用域。</p>
</blockquote>
<p><strong>私有变量和函数</strong></p>
<pre><code>定义在构造函数内部而被this对象的变量,在外部无法访问到的变量和函数
</code></pre><!-- more -->
<p><strong>公有变量和方法</strong></p>
<pre><code>对外暴露接口,可以通过构造函数对象创建的对象访问的属性和方法
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">type,number</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.type = type;   <span class="comment">//公共的属性</span></div><div class="line">        <span class="keyword">this</span>.number = number;</div><div class="line">        <span class="keyword">var</span> city = <span class="string">"广州"</span>;                <span class="comment">//私有变量</span></div><div class="line">        <span class="keyword">var</span> getNumber = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;       <span class="comment">//私有函数</span></div><div class="line">            <span class="keyword">return</span> number;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">var</span> getType = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> type;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//能够访问私有变量和函数的方法 --- 特权方法</span></div><div class="line">        <span class="keyword">this</span>.getDescription = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(getNumber() + getType() + city);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> car = <span class="keyword">new</span> Car(<span class="string">"汽车"</span>,<span class="string">"201718"</span>);</div><div class="line">    car.getDescription();</div></pre></td></tr></table></figure></p>
<p>说明：能够访问构造函数内部私有变量|函数的方法称之为特权方法</p>
<p><strong>构造函数的问题</strong><br>构造函数本身是一个函数，在调用的时候有多种调用方式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">① <span class="keyword">new</span> 构造函数（）调用</div><div class="line">② 构造函数（）调用</div></pre></td></tr></table></figure></p>
<p>以上，第二种调用方式存在作用域安全的问题</p>
<p><strong>作用域安全的构造函数</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="comment">//容错处理</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">//设置实例属性和方法</span></div><div class="line">            <span class="keyword">this</span>.name = name;</div><div class="line">            <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02  创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"zhangsan"</span>);</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">"lisi"</span>);</div><div class="line">    p1.showName();</div><div class="line">    p2.showName();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>新的问题</strong><br><code>说明</code>:上面的代码在使用借用构造函数方式继承的时候存在问题，无法创建出的对象，原因在于通过call或者是apply函数调用的时候，内部的this绑定的子类型中的对象，因此在使用instanceOf 判断的时候，结果为假。<br><code>解决</code>：可以设置让子类型（构造函数）的原型对象为父类型的一个实例。<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="comment">//容错处理</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">//设置实例属性和方法</span></div><div class="line">            <span class="keyword">this</span>.name = name;</div><div class="line">            <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02  创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"zhangsan"</span>);</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">"lisi"</span>);</div><div class="line">    p1.showName();</div><div class="line">    p2.showName();</div><div class="line">    <span class="comment">// 使用借用构造函数来实现继承</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Boy</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">        Person.call(<span class="keyword">this</span>,name);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//需要结合原型继承来解决 instanceOf 实例对象检测的问题</span></div><div class="line">    Boy.prototype = <span class="keyword">new</span> Person();</div><div class="line">    <span class="keyword">var</span> boy = <span class="keyword">new</span> Boy(<span class="string">"测试的名字"</span>);</div><div class="line">    boy.showName();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<h1 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h1><p>关键字 <code>“use strict”</code>;<br><strong>实现严格模式</strong>:只需要在脚本代码中添加上上述关键字即可。 关键字具体说明<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>) 注意区分大小写，必须全部都是小写的</div><div class="line">(<span class="number">2</span>) 注意空格，整个字符串总共<span class="number">10</span>个字符</div><div class="line">(<span class="number">3</span>) 单引号和双引号无所谓，但是需要有双引号</div><div class="line">(<span class="number">4</span>) 必须写在作用域的最顶部，注意其位置</div><div class="line">(<span class="number">5</span>) 可以加分号，也可以不加，但是必须是一个字符串</div></pre></td></tr></table></figure></p>
<p>注意：以下的关键字写法均是错误的<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"USE strict"</span>;</div><div class="line"><span class="string">" use strict "</span>;</div><div class="line"><span class="string">"("</span>USE strict<span class="string">").toLowerCase();"</span></div></pre></td></tr></table></figure></p>
<h2 id="严格模式使用注意"><a href="#严格模式使用注意" class="headerlink" title="严格模式使用注意"></a>严格模式使用注意</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> 所有的变量必须使用<span class="keyword">var</span> 关键字声明</div><div class="line"><span class="number">2</span> 不能使用<span class="keyword">delete</span>关键字删除全局变量 ,以前默认删除失败,严格模式下直接报错</div><div class="line"><span class="number">3</span> 在对象中不允许有同名的属性</div><div class="line"><span class="number">4</span> 函数的参数必须唯一(不能出现同名的参数)</div><div class="line"><span class="number">5</span> <span class="built_in">arguments</span>对象的行为不同,在非严格模式下修改形参的值会反映到<span class="built_in">arguments</span>中,而严格模式下则相对独立</div><div class="line"><span class="number">6</span> 禁用了argument.callee和caller函数,他们一个引用函数本身,一个引用调用函数</div><div class="line"><span class="number">7</span> 不能在<span class="keyword">if</span>语句中声明函数</div><div class="line"><span class="number">8</span> 禁止使用<span class="built_in">eval</span>和<span class="built_in">arguments</span>作为标识符</div><div class="line"><span class="number">9</span> 修正<span class="keyword">this</span>的值,在严格模式下,函数<span class="keyword">this</span>的值始终是指定的值,无论指定的是什么值。</div><div class="line"><span class="number">10</span> 禁用了<span class="keyword">with</span>语句</div><div class="line"><span class="number">11</span> 去掉了JavaScript中的八进制字面量(以<span class="number">0</span>开头的八进制字面量是无效的语法)</div></pre></td></tr></table></figure>
<p><strong>1 所有的变量都必须使用var关键字声明</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">10</span>;             <span class="comment">//错误的演示</span></div><div class="line"><span class="built_in">console</span>.log(<span class="number">10</span>);</div></pre></td></tr></table></figure></p>
<p><strong>② 不能使用delete关键字删除全局变量</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在非严格模式下,删除失败(静默失败)   失败了不吭声,严格模式下直接报错</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="keyword">delete</span> a;</div><div class="line"><span class="built_in">console</span>.log(a);</div></pre></td></tr></table></figure></p>
<p><strong>③ 在对象中不允许有同名的属性</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在非严格模式下,会使用后面的属性赋值作为最终值,在严格模式下则直接报错</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">    <span class="attr">name</span>:<span class="string">"李四"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(obj);</div></pre></td></tr></table></figure></p>
<p><strong>④ 函数的参数必须唯一(不能出现同名的参数)</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在非严格模式下,如果函数在定义的时候,使用了多个同名的参数,则在函数内部形参的实际值为最后一个传入的实参值</span></div><div class="line"><span class="comment">//在严格模式下,直接报错</span></div><div class="line"><span class="comment">//    function func(a,a,a) &#123;</span></div><div class="line"><span class="comment">//        console.log(a);</span></div><div class="line"><span class="comment">//        console.log(arguments);</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a,b,c</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(a);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">&#125;</div><div class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<p><strong>arguments对象的行为不同</strong><br>说明：<br>（1）严格模式下,在函数内部修改了对象的指向,对arguments的值不会产生影响<br>（2）在严格模式下,形参的值和arguments的值是相互独立的,在函数内部修改了形参的值对arguments不受影响<br>（3）在非严格模式下，修改了形参的值，arguments中的数据会跟着改变<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">//测试引用类型的值作为函数的参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(obj);</div><div class="line">       <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</div><div class="line">       <span class="comment">//在函数内部修改形参的值</span></div><div class="line">       obj = &#123;<span class="attr">age</span>:<span class="number">20</span>&#125;;</div><div class="line">       <span class="built_in">console</span>.log(obj);</div><div class="line">       <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</div><div class="line">   &#125;</div><div class="line">   funcName(&#123;<span class="attr">name</span>:<span class="string">"张三"</span>&#125;);</div><div class="line">   <span class="comment">//测试基本类型数据作为函数的参数</span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(str);</div><div class="line">       <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</div><div class="line">       str = <span class="string">"hello"</span>;</div><div class="line">       <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</div><div class="line">   &#125;</div><div class="line">   fun(<span class="string">"hi"</span>);</div></pre></td></tr></table></figure></p>
<p><strong>⑥ 禁用了argument.callee和caller函数</strong><br>说明：<br>argument.callee是对函数自身的引用<br>argument.calller是对调用函数的引用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = (<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n ==<span class="number">1</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">arguments</span>.callee(n<span class="number">-1</span>) + n;</div><div class="line">    &#125;)(<span class="number">10</span>);</div><div class="line">    <span class="built_in">console</span>.log(num);       <span class="comment">//55</span></div></pre></td></tr></table></figure></p>
<p><strong>⑦ 不能在if语句中声明函数</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//如果在if语句中声明函数，则会产生语法错误</span></div><div class="line">  <span class="keyword">if</span> (<span class="literal">true</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"________"</span>);</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"呵呵呵呵"</span>);</div><div class="line">        &#125;</div><div class="line">        demo();</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><strong>⑧ 禁止使用eval和argument作为标识符</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = <span class="string">"测试的字符串"</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>);</div><div class="line"><span class="keyword">var</span> <span class="built_in">arguments</span> = <span class="string">"参数列表"</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div></pre></td></tr></table></figure></p>
<p><strong>⑨ 修正this的值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">在严格模式下,函数<span class="keyword">this</span>的值始终是指定的值,无论指定的是什么值</div><div class="line"><span class="keyword">var</span> name = <span class="string">"测试的name"</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">demoTest</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//在非严格模式下,打印出来的this为全局的对象window</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);  <span class="comment">//在严格模式下打印出来的this为undefined</span></div><div class="line">&#125;</div><div class="line">demoTest();</div></pre></td></tr></table></figure></p>
<p><strong>⑩ 禁用了with语句</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">"暂时干"</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;;</div><div class="line">  <span class="keyword">with</span>(o)</div><div class="line">  &#123;</div><div class="line">      name = <span class="string">"lisi"</span>;</div><div class="line">      age = <span class="number">48</span></div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(o);</div></pre></td></tr></table></figure></p>
<p><strong>禁用了八进制</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//以0开头的数据常常引起混乱</span></div><div class="line"><span class="comment">//var num = 023;     //2*8 + 3 ==&gt; 19</span></div><div class="line"><span class="comment">//console.log(num); //19</span></div></pre></td></tr></table></figure></p>
<p><strong>书写格式</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">01 必须使用单引号或者是双引号括住字符串</div><div class="line">02 必须使用小写,不能出现大写字符</div><div class="line">03 必须是10个字符</div><div class="line">04 字符串后面的分号可以省略</div><div class="line">05 必须写在当前作用域的最顶上</div></pre></td></tr></table></figure></p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//"use strict";   //正确写法</span></div><div class="line">    <span class="comment">//"use strict"    //正确写法     分号可以省略</span></div><div class="line">    <span class="comment">//'use strict';   //正确写法     可以使用单引号</span></div><div class="line">    <span class="comment">//"use  strict";    //错误写法   必须是10个字符</span></div><div class="line">    <span class="comment">//"use Strict";     //错误写法   所有的字符都必须小写</span></div><div class="line"><span class="meta">    "use strict"</span>;</div><div class="line">    a = <span class="number">10</span>;</div><div class="line">    <span class="comment">//    "use strict";           //错误写法 必须写在当前作用域的顶端</span></div><div class="line">    b = <span class="number">20</span>;</div><div class="line">    <span class="built_in">console</span>.log(a);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>作用范围</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">① 函数的顶部(只对当前的函数有效)</div><div class="line">② script标签的顶部,只对当前的标签有效,对页面中其他的script无效</div></pre></td></tr></table></figure></p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//位置01       对func01和func02都有效</span></div><div class="line"> <span class="comment">//"use strict";</span></div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="comment">//位置02   对func01有效,对func02无效</span></div><div class="line">     <span class="comment">//"use strict";</span></div><div class="line">     a = <span class="number">10</span>;</div><div class="line">     <span class="built_in">console</span>.log(a);</div><div class="line"> &#125;</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="comment">//位置03 对func02有效,但对func01无效</span></div><div class="line">    <span class="comment">//"use strict";</span></div><div class="line">     b = <span class="number">20</span>;</div><div class="line">     <span class="built_in">console</span>.log(b);</div><div class="line"> &#125;</div><div class="line">func01();</div><div class="line"> func02();</div></pre></td></tr></table></figure></p>
<p><strong>函数的几种调用方式</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> 普通函数调用 内部的<span class="keyword">this</span>指向全局对象<span class="built_in">window</span></div><div class="line"><span class="number">02</span> 构造函数调用 内部的<span class="keyword">this</span>指向新创建的对象</div><div class="line"><span class="number">03</span> 对象的方法调用 内部的<span class="keyword">this</span>指向调用的对象本身</div><div class="line"><span class="number">04</span> 通过call 或者是apply方式调用(函数上下文),<span class="keyword">this</span>指向的是当前的上下文对象</div></pre></td></tr></table></figure></p>
<p><strong>this丢失demo演示</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">        <span class="attr">getName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//以对象的方法来进行调用</span></div><div class="line">    obj.getName();  <span class="comment">//张三</span></div><div class="line">    <span class="keyword">var</span> getName = obj.getName;</div><div class="line">    getName();  <span class="comment">//以普通函数的方式调用,此时内部的this指向的是window对象  打印的是window.name 为空值</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>代码示例02</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 获取页面中id值为demo的标签</span></div><div class="line">    <span class="comment">//var div = document.getElementById('demo');</span></div><div class="line"><span class="comment">//    var getId = document.getElementById;</span></div><div class="line"><span class="comment">//    var div = getId('demo');        //会报错?</span></div><div class="line"><span class="comment">//    console.log(div);</span></div><div class="line">    <span class="comment">//借用apply来修正this</span></div><div class="line">    <span class="built_in">document</span>.getElementById = (<span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">           <span class="keyword">return</span> func.apply(<span class="built_in">document</span>,<span class="built_in">arguments</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;)(<span class="built_in">document</span>.getElementById);</div><div class="line">    <span class="keyword">var</span> getId = <span class="built_in">document</span>.getElementById;</div><div class="line">    <span class="keyword">var</span> div = getId(<span class="string">'demo'</span>);        <span class="comment">//会报错?</span></div><div class="line">    <span class="built_in">console</span>.log(div);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>代码说明：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> 因为<span class="built_in">document</span>.getElementById方法的内部实现中需要使用到<span class="keyword">this</span>,这个<span class="keyword">this</span>本来期望指向的是<span class="built_in">document</span>对象</div><div class="line"><span class="number">02</span> 当我们以<span class="built_in">document</span>.getElementById来调用的时候,内部的<span class="keyword">this</span>指向<span class="built_in">document</span>对象</div><div class="line"><span class="number">03</span> 但是当我们以getId的方式调用的时候,内部的<span class="keyword">this</span>指向的是<span class="built_in">window</span>对象(因为我们以普通的方式进行调用)</div></pre></td></tr></table></figure></p>
<h1 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h1><p>变量其作用的范围就是它的作用域</p>
<p><strong>块级作用域</strong><br>说明：JavaScript中没有块级作用域<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">       <span class="keyword">var</span> num = i;</div><div class="line">   &#125;</div><div class="line">   <span class="built_in">console</span>.log(i);</div><div class="line">   <span class="built_in">console</span>.log(num);</div><div class="line">   <span class="comment">//说明:如果有块级作用域,则i和num打印的结果应该为undefined</span></div></pre></td></tr></table></figure></p>
<p><strong>词法作用域</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">词法作用域:在代码写好的那一刻,变量的作用域就已经确定的</div><div class="line">动态作用域:变量的作用域由执行时的环境所决定</div><div class="line">说明:在js中不是动态作用域,当调用的时候,是往上查找的,不会到其他函数的作用域中去查找</div></pre></td></tr></table></figure></p>
<p><strong>在JavaScript中唯一能够产生作用域的东西是函数</strong><br>代码演示<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    var a = "这是第一个a";</div><div class="line">    function func01() &#123;</div><div class="line">        console.log(a);         //先在当前作用域中查找,如果没有则访问全局的作用域</div><div class="line">    &#125;</div><div class="line">    function func02() &#123;</div><div class="line">        var a = "这是第二个a";</div><div class="line">        func01()</div><div class="line">    &#125;</div><div class="line">    func01();       //打印结果为:这是第一个a</div><div class="line">    func02();       //打印结果为:这是第一个a</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var a = "这是第一个a";</div><div class="line">    function func02() &#123;</div><div class="line">        var a = "这是第二个a";</div><div class="line">        func01()</div><div class="line">    &#125;</div><div class="line">    function func01() &#123;</div><div class="line">        console.log(a);         //先在当前作用域中查找,如果没有则访问全局的作用域</div><div class="line">    &#125;</div><div class="line">    func01();       //打印结果为:这是第一个a</div><div class="line">    func02();       //打印结果为:这是第一个a</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p><strong>词法作用域的规则</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">① 在函数内部允许访问外部的变量</div><div class="line">② 只有函数可以限定作用域</div><div class="line">③ 作用域规则首先使用提升规则分析</div><div class="line">④ 如果当前作用域中有该变量,则不考虑外部作用域的同名变量</div></pre></td></tr></table></figure></p>
<h2 id="变量和函数提升"><a href="#变量和函数提升" class="headerlink" title="变量和函数提升"></a>变量和函数提升</h2><p><strong>JS中的代码执行分为两个步骤</strong><br>① 预解析<br>JavaScript在预解析阶段,会对使用var关键字声明的变量和function声明的代码块进行提升操作,提升到当前作用域的顶端<br>② 执行</p>
<p><strong>代码提升的几种情况</strong></p>
<p><strong>01 函数提升</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    func();</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"测试的函数"</span>);</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>02 变量提升</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="built_in">console</span>.log(a);     <span class="comment">//打印出来的结果为undefined</span></div><div class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">    <span class="comment">//var a;                //注意:只会对变量的声明进行提升</span></div><div class="line">    <span class="comment">//console.log(a);</span></div><div class="line">    <span class="comment">//a = 10</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>03 函数同名情况提升</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    func01();                   <span class="comment">//打印last</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"first"</span>);</div><div class="line">    &#125;</div><div class="line">    func01();                   <span class="comment">//打印last</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"last"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//模拟提升后的情况</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"first"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"last"</span>);</div><div class="line">    &#125;</div><div class="line">    func01();</div><div class="line">    func01();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>说明：<code>预处理的时候，同名的函数都会进行提升，但是后面的会覆盖掉前面的</code></p>
<p><strong>04 变量名和函数同名的情况</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="built_in">console</span>.log(a);                     <span class="comment">//打印function</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我是一个函数"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> a = <span class="number">20</span>;</div><div class="line">    <span class="built_in">console</span>.log(a);                     <span class="comment">//打印20</span></div><div class="line">    <span class="comment">//变量和函数提升后的结果 错误</span></div><div class="line"><span class="comment">//    function a() &#123;</span></div><div class="line"><span class="comment">//        console.log("我是一个函数");</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line"><span class="comment">//    var a ;</span></div><div class="line"><span class="comment">//    console.log(a);</span></div><div class="line"><span class="comment">//    a = 20;</span></div><div class="line"><span class="comment">//    console.log(a);</span></div><div class="line">    <span class="comment">//变量和函数提升后的结果 正确</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我是一个函数"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(a);</div><div class="line">    <span class="keyword">var</span> a = <span class="number">20</span>;</div><div class="line">    <span class="built_in">console</span>.log(a);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line"><span class="string">``</span><span class="string">`js</span></div><div class="line">总结:如果出现变量和函数同名的情况,则在进行提升的时候,只会提升函数到当前作用域顶端而忽略变量的提升操作</div><div class="line"></div><div class="line">**变量的提升是分作用域的**</div><div class="line">示例代码01</div><div class="line">`<span class="string">``</span>js</div><div class="line">&lt;script&gt;</div><div class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></div><div class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">    <span class="comment">//模拟提升</span></div><div class="line">    <span class="keyword">var</span> a;</div><div class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></div><div class="line">    a = <span class="number">10</span>;</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>示例代码02<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> num = <span class="number">20</span>;</div><div class="line">        <span class="built_in">console</span>.log(num);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">    func();             <span class="comment">//20</span></div><div class="line">    <span class="comment">//模拟提升</span></div><div class="line">    <span class="keyword">var</span> num;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> num;</div><div class="line">        num = <span class="number">20</span>;</div><div class="line">        <span class="built_in">console</span>.log(num);</div><div class="line">    &#125;</div><div class="line">    num = <span class="number">10</span>;</div><div class="line">    <span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">    func();             <span class="comment">//20</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>示例代码03<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(num);</div><div class="line">    <span class="keyword">var</span> num = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">func();             <span class="comment">//undefiend</span></div><div class="line"><span class="comment">//模拟提升</span></div><div class="line"><span class="keyword">var</span> num;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> num;</div><div class="line">    <span class="built_in">console</span>.log(num);</div><div class="line">    num = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line">num = <span class="number">10</span>;</div><div class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">func();             <span class="comment">//undefiend</span></div></pre></td></tr></table></figure></p>
<p>示例代码04<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(num);</div><div class="line">    num = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">func();             <span class="comment">//10</span></div><div class="line"><span class="comment">//模拟变量提升</span></div><div class="line"><span class="keyword">var</span> num;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(num);</div><div class="line">    num = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line">num= <span class="number">10</span>;</div><div class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></div><div class="line">func();             <span class="comment">//10</span></div><div class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//20</span></div></pre></td></tr></table></figure></p>
<p><strong>函数表达式的提升</strong><br>说明：在使用函数表达式方式创建函数的时候,整个函数表达式并不会进行提升,只会对var声明的变量提升<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">func();</div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"会不会被调用"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//以上如上代码将报错</span></div><div class="line"><span class="comment">//模拟提升的过程</span></div><div class="line"><span class="keyword">var</span> func;</div><div class="line">func();                 <span class="comment">//找不到这个函数</span></div><div class="line">func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"会不会被调用"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h1><pre><code>01 在js中函数可以创建作用域
02 函数中又可以创建函数(即又可以开辟新的作用域)
03 函数内部的作用域可以访问外部的作用域
04 如果有多个函数嵌套,那么就会构成一个链式的访问结构,也就是作用域链
05 注意:函数内部的作用域可以访问外部的作用域,但是外部的作用域却不能访问内部的作用域
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//f1---&gt;全局作用域</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">//f4--&gt;f1---&gt;全局作用域</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">f5</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//f2--&gt;全局作用域</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f6</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="作用域链绘图"><a href="#作用域链绘图" class="headerlink" title="作用域链绘图"></a>作用域链绘图</h1><p>说明</p>
<pre><code>① 先画出全局作用域线条，然后在上面添加全局作用域中的函数和变量，作为0级作用域链
② 画出全局作用域中的函数的作用域线条，，然后在上面添加当前作用域中的函数和变量，作为1级作用域链
③ 以此类推，直至完成
</code></pre><p>示例代码01<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> a = <span class="number">20</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><code>图示</code><br><img src="/assets/img/Snip20170217_4.png" alt=""></p>
<p>示例代码02<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">f5</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> b = <span class="string">"demo"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> a = <span class="number">20</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> c = <span class="string">"啊哈哈"</span>;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> d = <span class="string">"test"</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><code>图示</code><br><img src="/assets/img/Snip20170217_3.png" alt=""></p>
<h2 id="作用域注意点和变量搜索原则"><a href="#作用域注意点和变量搜索原则" class="headerlink" title="作用域注意点和变量搜索原则"></a>作用域注意点和变量搜索原则</h2><p><strong>注意点</strong></p>
<pre><code>01 在获取值和设置值的时候都是访问变量
02 并非在函数内部写了变量,这个变量就属于当前函数,而是必须使用var 关键字声明的变量才属于当前函数
03 函数在声明的时候,里面的代码并不会执行,只有在函数调用的时候才会执行
04 声明函数时候的函数名,其实也是一个变量名,可以通过这个变量名来进行设置和赋值
05 注意:在变量内部使用var 关键字声明一个变量并不会把同名的全局变量覆盖掉
</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">var</span> a = <span class="number">20</span>;              <span class="comment">//注意:该行代码并不会覆盖掉全局变量中的变量a</span></div><div class="line">    <span class="built_in">console</span>.log(a);</div><div class="line">&#125;</div><div class="line">f1();               <span class="comment">//20</span></div><div class="line"><span class="built_in">console</span>.log(a);     <span class="comment">//10</span></div></pre></td></tr></table></figure>
<p>代码点评：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">在函数中使用var关键字声明变量a并不会覆盖全局作用域中的a。</div><div class="line">注意需要同时考虑变量在当前作用域的提升以及访问变量时的搜索原则。</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> f1 = <span class="string">"demo字符串"</span>;         <span class="comment">//该行代码会把f1函数覆盖掉</span></div><div class="line">f1 = <span class="string">"demoTest字符串"</span>;</div><div class="line"><span class="built_in">console</span>.log(f1);</div><div class="line"><span class="comment">//f1();</span></div></pre></td></tr></table></figure>
<p>代码点评:<br><code>函数的名称也是变量，如果在代码中出现同名的变量，那么函数的实现会被覆盖掉</code></p>
<p> <strong>变量搜索原则</strong></p>
<pre><code>01 在使用变量的时候,首先在自己的作用域中查找
02 如果找到了就直接使用,如果没有找到,那么就到上一级作用域中去查找
03 重复上面的步骤,直到0级作用域,如果还是找不到那么就返回undefined(报错)
</code></pre><h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><blockquote>
<p>闭包是学习JavaScript的难点之一，因JavaScript是单线程，故回调使用频繁，本章节主要讲了闭包以及回调。</p>
</blockquote>
<p><strong>闭包简单说明</strong></p>
<pre><code>闭:关闭,封闭
包:包住,包裹
闭包:通过某种方式实现的一个封闭的、包裹的对外不公开的结构|空间
闭包的原理:变量的访问原则(即上一级的作用域无法访问下一级的作用域),其实函数本身就是闭包。
</code></pre><!-- more -->
<p><strong>闭包要解决的问题</strong></p>
<pre><code>提供一种间接的方式能够访问到函数内部的数据（变量）
</code></pre><p><strong>实现思路</strong></p>
<pre><code>01 我们需要能够在函数外部访问函数内部的变量，正常情况无法访问；
02 在函数内部如果新创建函数，那么安装作用域链的原则，这个新创建的内部函数能够访问到函数中的这些变量。
03 我们如果能够操作函数中新创建的函数，那么就能够操作函数中的变量（如访问和设置等）
04 如果要能够操作函数中新创建的函数，那么需要在函数中把新创建的函数返回。
05 调用函数，接收并得到其返回值（是一个函数）
06 调用返回值（函数），通过函数传参的方式来设置函数中的变量。
07 调用返回值（函数），通过在函数内部再次return的方式来访问函数中的变量。
</code></pre><p><strong>闭包的基本模式</strong></p>
<pre><code>在函数内部创建函数(内部函数),在这个内部函数中,可以操作外部函数中的变量
01 在函数(外部)中创建函数(内部函数),在该函数(内部函数)中操作外部函数中的变量
02 在外部函数中,把内部函数作为返回值返回
03 调用外部函数,并接收其返回值(是一个函数)
04 调用接收到的返回值(内部函数),来间接的操作外部函数中的变量
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">        num = n;</div><div class="line">        <span class="built_in">console</span>.log(num);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> funcName = func();</div><div class="line">funcName(<span class="string">"哗啦哗啦"</span>);</div></pre></td></tr></table></figure></p>
<h2 id="闭包获取数据"><a href="#闭包获取数据" class="headerlink" title="闭包获取数据"></a>闭包获取数据</h2><p><strong>获取单个数据（考虑赋值）</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> num = <span class="number">123</span>;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (a !== <span class="literal">undefined</span>)</div><div class="line">        &#123;</div><div class="line">            num = a;</div><div class="line">        &#125;</div><div class="line">            <span class="keyword">return</span> num;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> f1 = func();</div><div class="line"><span class="keyword">var</span> x = f1(<span class="number">456</span>);</div><div class="line"><span class="keyword">var</span> y = f1();</div><div class="line"><span class="built_in">console</span>.log(x);</div><div class="line"><span class="built_in">console</span>.log(y);</div></pre></td></tr></table></figure></p>
<p>说明：上面的代码能够支持通过闭包对函数中的变量num进行访问（取值）或赋值的操作。</p>
<p><strong>获取多个数据（数组）</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"张学友"</span>;</div><div class="line">    <span class="keyword">var</span> age = <span class="number">40</span>;</div><div class="line">    <span class="keyword">return</span> [</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> name;</div><div class="line">            &#125;,</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> age;</div><div class="line">            &#125;</div><div class="line">    ]</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> foo = func();</div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>]());      <span class="comment">//张学友</span></div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">1</span>]());      <span class="comment">//40</span></div></pre></td></tr></table></figure></p>
<p>说明：上面的代码能够满足返回多个变量值的需求，但是要数组操作的方式并不常见，且和使用习惯不符合。</p>
<p><strong>利用对象返回并设置对个变量值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = <span class="string">"张学友"</span>;</div><div class="line">    <span class="keyword">var</span> age = <span class="number">45</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">getName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> name;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">getAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> age;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">setName</span>:<span class="function"><span class="keyword">function</span> (<span class="params">nameValue</span>) </span>&#123;</div><div class="line">            name = nameValue;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">setAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params">ageValue</span>) </span>&#123;</div><div class="line">            age = ageValue;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> func = foo();</div><div class="line"><span class="built_in">console</span>.log(func.getName());        <span class="comment">//张学友</span></div><div class="line"><span class="built_in">console</span>.log(func.getAge());         <span class="comment">//45</span></div><div class="line">func.setName(<span class="string">"张三"</span>);</div><div class="line">func.setAge(<span class="number">30</span>);</div><div class="line"><span class="built_in">console</span>.log(func.getName());        <span class="comment">//张三</span></div><div class="line"><span class="built_in">console</span>.log(func.getAge());         <span class="comment">//30</span></div></pre></td></tr></table></figure></p>
<p><strong>闭包的作用</strong><br>最基本的作用:闭包中的变量更安全,只能通过特定的接口来访问<br>说明:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(1)创建一个私有的空间,保护数据,外界如果需要访问数据必须通过函数提供的指定方法</div><div class="line">(2)在这些指定的方法中,我们可以设置一些校验的逻辑,以保证对数据访问和设置的安全性</div></pre></td></tr></table></figure></p>
<h2 id="闭包的使用注意"><a href="#闭包的使用注意" class="headerlink" title="闭包的使用注意"></a>闭包的使用注意</h2><p><strong>进程和线程</strong></p>
<pre><code>进程指的是系统中正在运行的一个应用程序。
线程:一个进程中可以有一个或多个线程,线程是CPU调度的最小单位,是真正执行任务的。
多线程:一个中可能有多条线程,多条线程之间并发的执行多个不同的任务。
单线程:一个进程中只有一条线程,即同一时间只能执行一个操作,只能干一件事情。
</code></pre><p><strong>javascript是单线程的</strong></p>
<pre><code>js中的线程主要处理三块任务:
01 渲染任务
02 js的代码执行任务
03 js中的事件处理任务(如setTimeOut方法)
</code></pre><p><strong>javascript中代码的执行顺序</strong></p>
<p><code>01 先把主任务执行完毕(代码任务)</code><br><code>02 主任务执行完毕之后再执行次要的任务(包括setTimeOut方法等)</code></p>
<p><strong>关于setTimeOut函数</strong></p>
<pre><code>函数的作用:一次性定时器(用于延迟执行任务)
参数:
    第一个参数:要执行的任务
    第二个参数:要延迟执行的时间,时间的单位是毫秒
函数说明：
    01 至少在指定的时间后才能够执行回调函数
    02 因为要等主任务中的代码执行完毕之后,才回去检查setTimeOut的回调函数。
</code></pre><p><strong>通过闭包解决setTimeOut函数的问题</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line"></div><div class="line">        setTimeout((<span class="function"><span class="keyword">function</span> (<span class="params">j</span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(j);</div><div class="line">            &#125;</div><div class="line">        &#125;)(i),<span class="number">10</span>);</div><div class="line"></div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"----"</span>);</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>函数的特殊之处</strong><br>函数的特殊之处在于,它本身是对象,且函数可以提供作用域。</p>
<pre><code>(01) 函数可以在运行时动态的创建,还可以在程序执行过程中创建。
(02) 函数可以赋值给变量,可以被扩展,甚至是删除。
(03) 函数可以作为其他函数的参数和返回值。
(04) 函数可以拥有自己的属性和方法。
注意:{} 块在js中不会创建作用域,哪怕是if或者是while语句中使用var关键字声明的变量也并非局部变量。
函数是可以通过（）调用并执行的对象。
</code></pre><p><strong>函数是第一型对象</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">01 函数可以像普通对象一样作为函数的参数</div><div class="line">02 函数可以像普通对象一样赋值给变量（函数表达式）</div><div class="line">03 函数可以像普通对象一个作为函数的返回值返回</div></pre></td></tr></table></figure></p>
<p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//函数作为参数传递</span></div><div class="line">   setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">   &#125;,<span class="number">100</span>);</div><div class="line">   <span class="comment">//函数作为返回值</span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="string">"demo"</span>);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">var</span> f = func();</div><div class="line">   f();                <span class="comment">//demo</span></div><div class="line">   <span class="comment">//函数赋值给变量</span></div><div class="line">   <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">   a();    <span class="comment">//直接通过变量的名称调用函数</span></div></pre></td></tr></table></figure></p>
<p><strong>函数的两个特征</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">01 函数本质上是对象</div><div class="line">02 函数可以创建作用域</div></pre></td></tr></table></figure></p>
<p><strong>约定</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a + b;&#125;; <span class="comment">//命名函数表达式</span></div><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a + b;&#125;;    <span class="comment">//函数表达式,匿名函数</span></div><div class="line">    以上也称为使用字面量的方式来创建函数(或者是函数字面量)</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>)</span>&#123;&#125;;   <span class="comment">//函数声明</span></div></pre></td></tr></table></figure></p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 函数声明</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">demo01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">   <span class="comment">//02 函数表达式(匿名函数)</span></div><div class="line">    <span class="keyword">var</span> demo02 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//03 命名函数表达式</span></div><div class="line">    <span class="keyword">var</span> demo03 = <span class="function"><span class="keyword">function</span> <span class="title">demo03Test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//04 打印name属性</span></div><div class="line">    <span class="built_in">console</span>.log(demo01.name);   <span class="comment">//demo01</span></div><div class="line">    <span class="built_in">console</span>.log(demo02.name);   <span class="comment">//demo02 (注意在火狐浏览器中打印出来的name属性为空)</span></div><div class="line">    <span class="built_in">console</span>.log(demo03.name);   <span class="comment">//demo03Test</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>函数回调</strong><br>回调函数(回调),当我们把某个函数作为参数传递给另一个函数的时候,这个函数就称为回调函数</p>
<p><strong>函数回调的基本模式</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">callBack</span>) </span>&#123;</div><div class="line">        <span class="comment">//处理其他的操作</span></div><div class="line">        callBack();     <span class="comment">//调用回调函数</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"这是一个回调函数"</span>);</div><div class="line">    &#125;</div><div class="line">    func(demo); <span class="comment">//注意调用函数的时候,参数是回调函数的引用(不要加括号);</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>函数回调解决this问题</strong><br>说明：如果回调函数是某个对象的方法,而该对象方法中使用了this指针那么该方法作为回调函数来使用的时候,需要注意this<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供一个对象,该对象中永远showName方法</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">"默认的名字"</span>,</div><div class="line">    <span class="attr">age</span>:<span class="number">30</span>,</div><div class="line">    <span class="attr">showName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">showAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//02 提供一个函数,该函数接受一个参数(函数引用)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">callBack,callBack_obj</span>) </span>&#123;</div><div class="line">    <span class="comment">//处理第一个参数传递对象方法字符串的形式</span></div><div class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> callBack == <span class="string">'string'</span>)</div><div class="line">    &#123;</div><div class="line">        callBack = callBack_obj[callBack];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callBack == <span class="string">'function'</span>)</div><div class="line">    &#123;</div><div class="line">        callBack.call(callBack_obj);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//demo(obj.showName,obj);</span></div><div class="line"><span class="comment">//demo(obj.showAge,obj);</span></div><div class="line"><span class="comment">//传递字符串和对象来进行调用</span></div><div class="line">demo(<span class="string">"showName"</span>,obj);</div></pre></td></tr></table></figure></p>
<p>代码说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">（01）以上代码传入两个参数，分别为具体的回调函数，和该回调函数所属的对象</div><div class="line">（02）该函数的参数接受两种方式的回调传递（一种是直接传递函数引用，一种是直接以字符串的方式传递对象方法的字符串）</div><div class="line">（03）在函数内部对传入的回调参数做处理，修正this的问题</div></pre></td></tr></table></figure></p>
<p><strong>函数作为函数的返回值</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">① 使用闭包实现一个计数器(在该示例中setup函数的返回值为一个函数)</div><div class="line">② 通过调用返回值(一个函数),可以操作setup函数中的变量</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> setup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> count ++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> next = setup();</div><div class="line">    <span class="built_in">console</span>.log(next());    <span class="comment">//0</span></div><div class="line">    <span class="built_in">console</span>.log(next());    <span class="comment">//1</span></div><div class="line">    <span class="built_in">console</span>.log(next());    <span class="comment">//2</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p><strong>惰性函数定义</strong><br>说明：某个函数直到第一次使用的时候才被正确的定义,并且其具有向后惰性,执行更少的工作。<br>应用场景:函数有一些初始化的准备工作要做,且只需要执行一次的情况。<br>特点:能够更新自己(函数)的实现。<br>缺点:<br>     01 当重新定义自身的时候,已经添加到原始函数的任何属性都会丢失。<br>     02 如何函数被赋值给了其他的变量或者是对象方法,那么在使用变量或者是对象方法调用时仍然会执行旧的函数体。<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"foo!"</span>);</div><div class="line">    foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"new foo!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//函数的调用</span></div><div class="line"><span class="comment">//foo();  //foo!</span></div><div class="line"><span class="comment">//foo();  //new foo!</span></div></pre></td></tr></table></figure></p>
<p>问题：</p>
<pre><code>① 添加属性
② 把函数赋值给新的变量
③ 以对象的方法调用函数
当惰性函数定义在处理以上三种情况的时候，使用新的变量名调用或者是是以对象的方法来调用函数，那么该函数在执行的时候并不会更新自身，而是执行旧的函数体的内容
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 声明函数foo</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"foo!"</span>);</div><div class="line">        foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"foo! foo!"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 为foo函数对象添加属性</span></div><div class="line">    foo.description = <span class="string">"foo函数的描述信息"</span>;</div><div class="line">    <span class="comment">//03 把foo函数赋值给其他的变量</span></div><div class="line">    <span class="keyword">var</span> func = foo;</div><div class="line">    <span class="comment">//04 把foo函数赋值给对象中的方法</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">showFoo</span>:foo</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//05 验证并演示输出</span></div><div class="line">    func(); <span class="comment">//foo!</span></div><div class="line">    func(); <span class="comment">//foo!</span></div><div class="line">    <span class="built_in">console</span>.log(func.description);  <span class="comment">//foo函数的描述信息</span></div><div class="line">    <span class="comment">//总结:01 如果把函数赋值给其他的变量,那么在以其他变量的方式调用时不会更新自身,还是执行旧的函数体</span></div><div class="line">    obj.showFoo();  <span class="comment">//foo!</span></div><div class="line">    obj.showFoo();  <span class="comment">//foo!</span></div><div class="line">    <span class="built_in">console</span>.log(obj.showFoo.description);   <span class="comment">//foo函数的描述信息</span></div><div class="line">    <span class="comment">//总结:02 如果把函数赋值给对象的方法,那么在以对象方法形式调用时不会更新自身,还是会执行旧的函数体。</span></div><div class="line">    foo();  <span class="comment">//已经更新过foo函数 foo! foo!</span></div><div class="line">    foo();  <span class="comment">//已经更新过foo函数 foo! foo!</span></div><div class="line">    <span class="built_in">console</span>.log(foo.description);   <span class="comment">//undefined</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>即时函数</strong></p>
<p>定义:<code>在函数定义之后立即执行该函数。</code><br>即时函数模式的组成:<br>     ① 使用函数表达式来定义函数(匿名函数,注意不能使用函数声明方式)<br>     ② 在函数表达式末尾添加一组(),表示立即执行当前函数。<br>     ③ 将整个函数包装在()中,有两种方式`</p>
<p>即时函数的作用</p>
<pre><code>01 用来将所有的代码包装到当前的作用域中,并且不会将任何的变量泄露到全局作用域中。
02 js中没有代码块作用域,而函数是js中唯一可以创建作用域的。
03 即时函数就是利用了函数创建作用域这一点,来实现对一些需要封装且不允许外部访问的操作。
</code></pre><p>即时函数的优点<br>01 不会产生全局变量,在即时函数内部定义的所有变量都仅仅只是该函数的局部变量,不会造成全局变量污染问题。<br>02 具有更好的封装性,外部无法访问到该函数内部的数据。</p>
<p><strong>即时函数代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种写法</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="built_in">console</span>.log(<span class="string">"即时函数的第一种写法"</span>);</div><div class="line">&#125;());</div><div class="line"><span class="comment">//第二种写法</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"即时函数的第二种写法"</span>);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>写法补充<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(a);</div><div class="line">   &#125;(<span class="number">20</span>));</div><div class="line">   +<span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(b);</div><div class="line">   &#125;(<span class="number">30</span>);</div><div class="line">   -<span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(b);</div><div class="line">   &#125;(<span class="number">40</span>);</div></pre></td></tr></table></figure></p>
<p><strong>即时函数的传参和返回值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 接受参数</span></div><div class="line">   (<span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(str);           <span class="comment">//hello</span></div><div class="line">   &#125;)(<span class="string">"hello"</span>);</div><div class="line"></div><div class="line">   <span class="comment">//02 提供返回值并赋值给新的变量</span></div><div class="line">   <span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="number">2</span> + <span class="number">1</span>;</div><div class="line">   &#125;)();</div><div class="line">   <span class="built_in">console</span>.log(foo);           <span class="comment">//3</span></div></pre></td></tr></table></figure></p>
<p><strong>即时对象初始化</strong><br>01 结构特征:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">① 提供一个对象,在该对象内部提供一个init初始化方法</div><div class="line"></div><div class="line">② 使用()把对象包装起来(让字面量变成表达式)</div><div class="line"></div><div class="line">③ 然后随即调用init方法,完成初始化操作。</div></pre></td></tr></table></figure></p>
<p>02 基本结构<br><code>({}).init();</code></p>
<p>03 模式优点</p>
<pre><code>在执行一次性的初始化任务时保护全局的命名空间。
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    (&#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">        <span class="attr">age</span>:<span class="number">23</span>,</div><div class="line">        <span class="attr">getDescript</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"名字:"</span> + <span class="keyword">this</span>.name + <span class="string">"年龄:"</span> + <span class="keyword">this</span>.age);</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//注意:在对象中访问对象的属性和方法都需要使用this.前缀</span></div><div class="line">        init:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.getDescript();</div><div class="line">            <span class="comment">//其他的初始化处理</span></div><div class="line">        &#125;</div><div class="line">    &#125;).init();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>函数属性缓存</strong><br>思路说明</p>
<pre><code>01 函数是对象，因此可以在函数上面添加属性和方法
02 如果某个函数需要接受参数，可能会反复计算且在函数内部需要进行耗时的大量的逻辑处理才能得到结果
03 那么我们可以考虑把函数的参数，而计算得到的结果保存在函数对象中（函数的参数作为key,所得的结果作为value）
04 等需要获取参数对应指定结果的时候，考虑先去缓存中查找，如果有那么就直接使用，若没有则计算并保存一份到缓存中。
</code></pre><p>代码示例(单个参数)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (func.cache[param] == <span class="literal">undefined</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> result = <span class="string">"字符串"</span>; <span class="comment">//初始化值</span></div><div class="line">        <span class="comment">//...对result做复杂的计算</span></div><div class="line">        func.cache[param] = result + param;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> func.cache[param];</div><div class="line">&#125;</div><div class="line">func.cache = &#123;&#125;;    <span class="comment">//空对象</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"demo"</span>));  <span class="comment">//字符串demo</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"test"</span>));  <span class="comment">//字符串test</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"demo"</span>));  <span class="comment">//字符串demo 直接使用属性缓存中的数据,而不再进行复杂的计算(可以提升性能)</span></div></pre></td></tr></table></figure></p>
<p>代码示例（多个参数）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> key = <span class="built_in">JSON</span>.stringify(<span class="built_in">Object</span>.prototype.slice.call(<span class="built_in">arguments</span>));</div><div class="line">    <span class="keyword">if</span> (func.cache[key] == <span class="literal">undefined</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> result = <span class="string">"字符串"</span>; <span class="comment">//初始化值</span></div><div class="line">        <span class="comment">//...对result做复杂的计算</span></div><div class="line">        func.cache[key] = result + key;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> func.cache[key];</div><div class="line">&#125;</div><div class="line">func.cache = &#123;&#125;;    <span class="comment">//空对象</span></div><div class="line">func(<span class="string">"123"</span>,<span class="string">"456"</span>);  <span class="comment">//</span></div><div class="line"><span class="comment">//说明:如果传入的参数数量超过1,则可以将传入的参数序列化为一个json字符串作为参数处理。</span></div></pre></td></tr></table></figure></p>
<p>代码说明：<br>slice:<code>返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject 中的元素</code></p>
<h1 id="函数属性缓存"><a href="#函数属性缓存" class="headerlink" title="函数属性缓存"></a>函数属性缓存</h1><blockquote>
<p>很高兴你能看到这里，希望对你学习JavaScript有帮助。这是最后一章节，主要讲有关JavaScript的设计模式。</p>
</blockquote>
<p>思路说明</p>
<pre><code>01 函数是对象，因此可以在函数上面添加属性和方法
02 如果某个函数需要接受参数，可能会反复计算且在函数内部需要进行耗时的大量的逻辑处理才能得到结果
03 那么我们可以考虑把函数的参数，而计算得到的结果保存在函数对象中（函数的参数作为key,所得的结果作为value）
04 等需要获取参数对应指定结果的时候，考虑先去缓存中查找，如果有那么就直接使用，若没有则计算并保存一份到缓存中。
</code></pre><!-- more -->
<p>代码示例(单个参数)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">param</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (func.cache[param] == <span class="literal">undefined</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> result = <span class="string">"字符串"</span>; <span class="comment">//初始化值</span></div><div class="line">        <span class="comment">//...对result做复杂的计算</span></div><div class="line">        func.cache[param] = result + param;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> func.cache[param];</div><div class="line">&#125;</div><div class="line">func.cache = &#123;&#125;;    <span class="comment">//空对象</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"demo"</span>));  <span class="comment">//字符串demo</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"test"</span>));  <span class="comment">//字符串test</span></div><div class="line"><span class="built_in">console</span>.log(func(<span class="string">"demo"</span>));  <span class="comment">//字符串demo 直接使用属性缓存中的数据,而不再进行复杂的计算(可以提升性能)</span></div></pre></td></tr></table></figure></p>
<p>代码示例（多个参数）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> key = <span class="built_in">JSON</span>.stringify(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>));</div><div class="line">    <span class="keyword">if</span> (func.cache[key] == <span class="literal">undefined</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> result = <span class="string">"字符串"</span>; <span class="comment">//初始化值</span></div><div class="line">        <span class="comment">//...对result做复杂的计算</span></div><div class="line">        func.cache[key] = result + key;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> func.cache[key];</div><div class="line">&#125;</div><div class="line">func.cache = &#123;&#125;;    <span class="comment">//空对象</span></div><div class="line">func(<span class="string">"123"</span>,<span class="string">"456"</span>);  <span class="comment">//</span></div><div class="line"><span class="comment">//说明:如果传入的参数数量超过1,则可以将传入的参数序列化为一个json字符串作为参数处理。</span></div></pre></td></tr></table></figure></p>
<p>代码说明：<br>slice:<code>返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject 中的元素</code></p>
<h1 id="命名空间模式"><a href="#命名空间模式" class="headerlink" title="命名空间模式"></a>命名空间模式</h1><p>作用:<br>(1)有助于减少程序中所需要的全局变量的数量<br>(2)并且同时还有助于避免命名冲突或过长的名字前缀。<br> <strong>说明：JavaScript中并没有内置的命名空间</strong></p>
<h2 id="如何实现命名空间"><a href="#如何实现命名空间" class="headerlink" title="如何实现命名空间"></a>如何实现命名空间</h2><pre><code>可以为应用程序创建一个全局对象,然后将所有功能都添加到该全局对象中
从而在具有大量函数,对象和其他变量的情况下并不会污染全局范围。
</code></pre><p><strong>建议</strong></p>
<pre><code>全局命名空间的名称可以随便写,但建议使用项目的名称或者是APP的名称
按照习惯,通过程序员会约定以全部大写的方式来约定全局命名空间。
</code></pre><p><strong>命名空间模式的缺点</strong></p>
<pre><code>① 需要输入更多的字符,在每个变量和函数前面都需要附加上前缀,总体上增加了代码的体积。
② 仅有一个全局实例,意味着代码的任何部分都能够修改当前的实例。
③ 很长的前缀意味着需要花更长的时间来解析属性(变量|属性访问原则-就近原则)
</code></pre><p>代码示例（零散的代码）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">    <span class="keyword">var</span> testDemo01 = <span class="string">"测试字符串01"</span>;</div><div class="line">    <span class="keyword">var</span> testDemo02 = <span class="string">"测试字符串02"</span>;</div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">    obj.des = <span class="string">"描述信息"</span>;</div><div class="line">    obj.logDes = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(obj.des);</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>代码示例(命名空间模式)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个全局变量</span></div><div class="line">    <span class="keyword">var</span> MYAPP = &#123;&#125;;</div><div class="line">    <span class="comment">//02 处理构造函数</span></div><div class="line">    MYAPP.Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    MYAPP.Man = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="comment">//03 处理变量</span></div><div class="line">    MYAPP.array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">    MYAPP.testDemo01 = <span class="string">"测试字符串01"</span>;</div><div class="line">    MYAPP.testDemo02 = <span class="string">"测试字符串02"</span>;</div><div class="line">    <span class="comment">//处理对象</span></div><div class="line">    MYAPP.obj = &#123;&#125;;</div><div class="line">    MYAPP.obj.des = <span class="string">"描述信息"</span>;</div><div class="line">    MYAPP.obj.logDes = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(obj.des);</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<pre><code>01 在使用命名空间模式的时候,因为所有的变量和属性都添加到同一个全局对象下面,因此该全局对象下面可能有很多很多的属性。
02 而我们在添加属性的时候,很有可能该属性已经存在,这导致可能会覆盖掉之前的属性。
03 所以,在添加一个属性或者是创建一个命名空间之前,最好是先检查它是否已经存在。
04 但是如果每次添加属性都需要对属性进行检查则会产生代码冗余问题。
</code></pre><p>示例代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 不好的演示</span></div><div class="line"><span class="comment">//其他代码</span></div><div class="line"><span class="comment">//var MYAPP = &#123;&#125;;     //注意这是不安全的代码,因为有可能覆盖掉上下文中的代码</span></div><div class="line"><span class="comment">//02 在创建命名空间之前,先检查该命名空间是否存在</span></div><div class="line"><span class="comment">//    if (MYAPP == 'undefined')&#123;</span></div><div class="line"><span class="comment">//        var MYAPP = &#123;&#125;;</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line"><span class="comment">//03 更好的做法</span></div><div class="line"><span class="keyword">var</span> MYAPP = MYAPP || &#123;&#125;;        <span class="comment">//如果MYAPP为假,那么就返回&#123;&#125;并赋值给MYAPP</span></div><div class="line"><span class="comment">//04 添加属性时的检查问题</span></div><div class="line"><span class="comment">//假如现在需要添加一个name属性,那么在添加之前需要先检查该属性是否存在</span></div><div class="line"><span class="keyword">if</span> (MYAPP.name == <span class="string">'undefined'</span>)</div><div class="line">&#123;</div><div class="line">    MYAPP.name = <span class="string">"默认的名称"</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//假如要添加一个obJ属性</span></div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> MYAPP.obj == <span class="string">'undefined'</span>)</div><div class="line">&#123;</div><div class="line">        MYAPP.obj = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"><span class="comment">//假如要给MYAPP.obj添加属性,则</span></div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> MYAPP.obj.des === <span class="string">"undefined"</span>)</div><div class="line">&#123;</div><div class="line">    MYAPP.obj.des = <span class="string">"对象的描述信息"</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(MYAPP.obj);</div></pre></td></tr></table></figure></p>
<p>代码说明：我们在添加属性或者是方法的时候,比较安全的做法是在添加之前先在当前环境中进行检查,以免覆盖但是我们的检查操作催生出了一个新的问题,就是重复代码过多,能否考虑把检查的过程抽取</p>
<p><strong>示例代码</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> MYAPP = MYAPP || &#123;&#125;;</div><div class="line">    MYAPP.namescape = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</div><div class="line">        <span class="comment">//split() 方法用于把一个字符串分割成字符串数组</span></div><div class="line">        <span class="keyword">var</span> parts = string.split(<span class="string">'.'</span>);</div><div class="line">        <span class="keyword">var</span> parent = MYAPP;</div><div class="line">        <span class="built_in">console</span>.log(parts);</div><div class="line">        <span class="comment">//先去掉最前面的冗余的全局变量</span></div><div class="line">        <span class="keyword">if</span>(parts[<span class="number">0</span>] == <span class="string">"MYAPP"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">//splice() 方法向/从数组中添加/删除项目,然后返回被删除的项目</span></div><div class="line">            <span class="comment">//parts.splice(0,1);</span></div><div class="line">            <span class="comment">//slice() 方法可从已有的数组中返回选定的元素</span></div><div class="line">            <span class="comment">//返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject 中的元素</span></div><div class="line">            parts = parts.slice(<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">console</span>.log(parts,<span class="string">"处理之后的数组"</span>);</div><div class="line">        <span class="comment">//通过for循环来遍历结构</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; parts.length; i++) &#123;</div><div class="line">            <span class="comment">//检查属性,如果对应的属性不存在,那么就创建一个属性</span></div><div class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> parent[parts[i]] == <span class="string">'undefined'</span>)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//初始化为一个空的对象</span></div><div class="line">                parent[parts[i]] = &#123;&#125;;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//修正parent的值</span></div><div class="line">            parent = parent[parts[i]];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> parent;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//代码示例</span></div><div class="line">    <span class="keyword">var</span> testDemo01 = MYAPP.namescape(<span class="string">"MYAPP.test.testDemo01"</span>);</div><div class="line">    <span class="keyword">var</span> testDemo02 = MYAPP.namescape(<span class="string">"MYAPP.test.testDemo02"</span>);</div><div class="line">    <span class="built_in">console</span>.log(MYAPP);</div><div class="line">    <span class="comment">//忽略全面的前缀</span></div><div class="line">    MYAPP.namescape(<span class="string">"sadsa.sadjaldj.adada.test"</span>);</div><div class="line">    <span class="built_in">console</span>.log(MYAPP);</div><div class="line">    <span class="comment">//演示长命名空间的情况</span></div><div class="line">    MYAPP.namescape(<span class="string">"demo.testDemo.testDemos.ss.dd.qq.ddd.ffff.fff"</span>);</div><div class="line">    <span class="built_in">console</span>.log(MYAPP);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>补充说明<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> split() 方法用于把一个字符串分割成字符串数组</div><div class="line"><span class="number">02</span> splice() 方法向/从数组中添加/删除项目,然后返回被删除的项目</div><div class="line"><span class="number">03</span> slice() 方法可从已有的数组中返回选定的元素</div></pre></td></tr></table></figure></p>
<h1 id="设计模式简单说明"><a href="#设计模式简单说明" class="headerlink" title="设计模式简单说明"></a>设计模式简单说明</h1><pre><code>概念:设计模式是对软件设计中普遍存在（反复出现）的各种问题，所提出的解决方案
    注意,设计模式并不直接用来完成代码的编写，而是描述在各种不同情况下，要怎么解决问题的一种方案
起源:该属于源于建筑行业
历史:
    （1）由埃里希·伽玛（Erich Gamma）等人在1990年代从建筑设计领域引入到计算机科学
    （2）四人帮著作《设计模式：可复用面向对象软件的基础》（Design Patterns - Elements of Reusable Object-Oriented Software）
    （3）Gang of Four:Erich Gamma + Richard Helm + Ralph Johnson +John Vlissides
优点:
    为了可重用代码、让代码更容易被他人理解、保证代码可靠性
</code></pre><h2 id="设计模式的分类"><a href="#设计模式的分类" class="headerlink" title="设计模式的分类"></a>设计模式的分类</h2><pre><code>创建型模式:工厂方法模式 + 抽象工厂模式 + 单例模式 + 建造者模式 + 原型模式
结构型模式:适配器模式 + 代理模式 + ...
行为型模式:观察者模式 + 命令模式 + ...
</code></pre><h2 id="单例模式的思想"><a href="#单例模式的思想" class="headerlink" title="单例模式的思想"></a>单例模式的思想</h2><pre><code>保证一个特定的类只有一个实例。
即当我们第二次创建新对象的时候,得到的应该是和第一次创建的对象一模一样的对象(同一个对象)
</code></pre><p><strong>其他语言中实现单例模式</strong></p>
<pre><code>在其它有Class的语言中,实现单例模式核心步骤是:
    01 在创建对象实例时候判断,该类的实例对象是否已经存在,如果已经存在,那么就直接返回
    02 如果不存在,那么就创建一个新的实例对象,并保存起来,下次创建实例对象的时候直接使用。
</code></pre><h2 id="JavaScript中的单例模式"><a href="#JavaScript中的单例模式" class="headerlink" title="JavaScript中的单例模式"></a>JavaScript中的单例模式</h2><pre><code>JavaScript是一门弱类型,动态,基于原型的语言,并没有类,只有对象。
在JavaScript中要实现单例模式有很多种方式。
最简单的方式:使用字面量的方式来创建对象,因为在JavaScript中对象之间永远不可能相等,除非他们是同一个对象。
</code></pre><p><strong>使用字面量方式创建的对象总是唯一的</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">script&gt;</div><div class="line">    <span class="keyword">var</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">"zhangsan"</span>&#125;;</div><div class="line">    <span class="keyword">var</span> obj2 = &#123;<span class="attr">name</span>:<span class="string">"zhangsan"</span>&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj1 == obj2);      <span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>使用new操作符创建对象实现单例</strong></p>
<pre><code>实现单例模式的几种途径
    ① 在代码中提供一个全局变量来存储创建出来的实例 缺点:该全局变量可能会被轻易的修改和覆盖
    ② 尝试在构造函数的静态成员中缓存实例属性。缺点:函数的静态属性在外部可以直接修改,容易导致实例对象的丢失。
    ③ 将实例对象包装在闭包中。优点是安全性较好,无法被轻易的修改,缺点是有额外闭包的开销。
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">China</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">//创建对象</span></div><div class="line"><span class="keyword">var</span> china01 = <span class="keyword">new</span> China();</div><div class="line"><span class="keyword">var</span> china02 = <span class="keyword">new</span> China();</div><div class="line"><span class="comment">//思考:如果想要实现单例模式,那么最终的结果必要是china01 和china02是同一个对象,那么如何实现</span></div></pre></td></tr></table></figure></p>
<p><strong>实现方案(一)使用全局变量方式存储创建出来的实例对象</strong><br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个全局变量</span></div><div class="line">    <span class="keyword">var</span> instance;</div><div class="line">   <span class="comment">//02 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="literal">undefined</span>)</div><div class="line">        &#123;</div><div class="line">            instance = <span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"默认的名称"</span>;</div><div class="line">        <span class="keyword">this</span>.age = <span class="number">66</span>;</div><div class="line">        <span class="comment">//使用全局变量来接收内部创建出来的实例对象(this)</span></div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 使用构造函数创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line">    <span class="built_in">console</span>.log(p1.name);</div><div class="line">    <span class="built_in">console</span>.log(p2.name);</div><div class="line">    p1.name = <span class="string">"修改之后的名称"</span>;</div><div class="line">    <span class="built_in">console</span>.log(p1.name);</div><div class="line">    <span class="built_in">console</span>.log(p2.name);</div><div class="line">    <span class="comment">//说明:在上面的方案中我们使用一个全局变量来接收实例对象的值,在构造函数内部也是通过判断这个全局变量来做一些其他的处理</span></div><div class="line">    instance = &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> p3 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p3);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><code>说明：</code>这种方法确实可以实现单例模式,但是并不安全,因为全局变量可能会被轻易的修改或者是覆盖,因此不推荐这种方式。</p>
<p><strong>实现方案(二)通过构造函数静态属性来缓存实例对象</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//02 在内部判断构造函数的静态属性中是否拥有实例对象</span></div><div class="line">        <span class="comment">//如果拥有实例对象,那么就直接返回,否则就设置实例对象,并赋值给构造函数的静态属性</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> Person.instance == <span class="string">"object"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> Person.instance;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//设置实例对象的属性和方法</span></div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"默认的名称"</span>;</div><div class="line">        <span class="keyword">this</span>.age = <span class="number">66</span>;</div><div class="line">        <span class="comment">//03 把内部创建的实例化对象赋值给构造函数的静态属性</span></div><div class="line">        Person.instance = <span class="keyword">this</span>;</div><div class="line">        <span class="comment">//显示返回</span></div><div class="line">        <span class="comment">//return Person.instance;</span></div><div class="line">        <span class="comment">//隐式返回</span></div><div class="line">        <span class="comment">//return this;</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">//04 创建实例对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line">    Person.instance = &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> p3 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p3);      <span class="comment">//false</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>说明：</code>在构造函数外部可以直接访问其静态成员(属性和方法),可能会导致实例对象的丢失。</p>
<p><strong>实现方案(二)通过闭包-惰性函数定义来实现</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//02 在函数内部使用私有变量来缓存实例</span></div><div class="line">        <span class="keyword">var</span> instance = <span class="keyword">this</span>;</div><div class="line">        <span class="comment">//03 设置实例对象的属性和方法</span></div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"默认的姓名"</span>;</div><div class="line">        <span class="keyword">this</span>.age = <span class="number">66</span>;</div><div class="line">        <span class="comment">//04 使用惰性函数定义来更新构造函数的实现</span></div><div class="line">        <span class="comment">//通过一个闭包来返回缓存的实例对象</span></div><div class="line">        Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> instance;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//05 创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line">    <span class="comment">//代码说明:第一次调用原始构造函数的时候,它会像往常一样返回this(指向内部新创建的实例对象)</span></div><div class="line">    <span class="comment">//再后面调用的时候,它会执行更新后的构造函数,在这个新的函数实现中,我们通过闭包来访问了私有变量,并简单的返回。</span></div><div class="line">    <span class="comment">//这个instance私有变量存储的是第一次调用构造函数时创建出来的实例对象</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>新的问题</strong><br>01 因为内部使用惰性函数定义(重写构造函数会导致之前添加在构造函数中的属性丢失),所以存在属性丢失问题<br>02 在上面的代码中,体现在于创建对象前后设置的构造函数的原型对象丢失问题</p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> instance = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"默认的姓名"</span>;</div><div class="line">        <span class="keyword">this</span>.age = <span class="number">66</span>;</div><div class="line">        Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> instance;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//设置构造函数的原型对象</span></div><div class="line">    Person.prototype.des = <span class="string">"描述信息"</span>;</div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="comment">//在创建第一个对象之后,设置原型对象</span></div><div class="line">    Person.prototype.someThing = <span class="string">"something"</span>;</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line">    <span class="built_in">console</span>.log(p1.des);        <span class="comment">//描述信息</span></div><div class="line">    <span class="built_in">console</span>.log(p2.des);        <span class="comment">//描述信息</span></div><div class="line">    <span class="built_in">console</span>.log(p1.someThing);  <span class="comment">//undefined</span></div><div class="line">    <span class="built_in">console</span>.log(p2.someThing);  <span class="comment">//undefined</span></div><div class="line">    <span class="comment">//打印对象的构造函数</span></div><div class="line">    <span class="built_in">console</span>.log(p1.constructor.name);       <span class="comment">//Person</span></div><div class="line">    <span class="built_in">console</span>.log(p2.constructor.name);       <span class="comment">//Person</span></div><div class="line">    <span class="comment">//判断对象的构造函数</span></div><div class="line">    <span class="built_in">console</span>.log(p1.constructor == Person);  <span class="comment">//false</span></div><div class="line">    <span class="built_in">console</span>.log(p1.constructor == p2.constructor,<span class="string">"构造函数是否一致"</span>);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p><strong>解决问题的核心过程</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> 提供一个构造函数</div><div class="line"><span class="number">02</span> 在构造函数内部提供一个私有变量instance</div><div class="line"><span class="number">03</span> 重写构造函数,返回私有变量instance</div><div class="line"><span class="number">04</span> 把原有的原型对象赋值给新Person构造函数的原型对象</div><div class="line"><span class="number">05</span> 调用<span class="keyword">new</span> 构造函数方法创建一个实例化对象赋值给instance</div><div class="line"><span class="number">06</span> 修正instance实例的构造器属性,指向新的构造函数(注意:虽</div><div class="line">然重写了构造函数,但是instance的构造函数仍然是以前的Person)</div><div class="line"><span class="number">07</span> 设置实例属性和方法</div><div class="line"><span class="number">08</span> 返回instance对象</div><div class="line">代码示例</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//01 提供一个私有变量</span></div><div class="line">        <span class="keyword">var</span> instance;</div><div class="line">        <span class="comment">//02 重写构造函数</span></div><div class="line">        Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(instance);</div><div class="line">            <span class="comment">//console.log(instance.constructor);</span></div><div class="line">            <span class="keyword">var</span> t = <span class="keyword">this</span>;</div><div class="line">            <span class="built_in">console</span>.log(t);</div><div class="line">            <span class="keyword">return</span> instance;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">//03 保留原型属性</span></div><div class="line">        Person.prototype = <span class="keyword">this</span>.__proto__;    <span class="comment">//这是一个空的对象</span></div><div class="line">        Person.lal = <span class="string">"lala"</span>;</div><div class="line">        <span class="comment">//04 创建并使用私有变量来接收实例对象</span></div><div class="line">        instance = <span class="keyword">new</span> Person();</div><div class="line">        <span class="comment">//05 修正构造函数指针</span></div><div class="line">        instance.constructor = Person;</div><div class="line">        <span class="comment">//06 设置实例属性和方法</span></div><div class="line">        instance.name = <span class="string">"默认的名字"</span>;</div><div class="line">        instance.age = <span class="number">66</span>;</div><div class="line">        <span class="comment">//07 返回私有变量</span></div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">   Person.haha = <span class="string">"哈哈"</span>;</div><div class="line">    <span class="comment">//设置构造函数的原型对象</span></div><div class="line">    Person.prototype.des = <span class="string">"描述信息"</span>;</div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="comment">//在创建第一个对象之后,设置原型对象</span></div><div class="line">    Person.prototype.someThing = <span class="string">"something"</span>;</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line">    <span class="built_in">console</span>.log(p1.des);        <span class="comment">//描述信息</span></div><div class="line">    <span class="built_in">console</span>.log(p2.des);        <span class="comment">//描述信息</span></div><div class="line">    <span class="built_in">console</span>.log(p1.someThing);  <span class="comment">//something</span></div><div class="line">    <span class="built_in">console</span>.log(p2.someThing);  <span class="comment">//something</span></div><div class="line">    <span class="comment">//打印构造器属性</span></div><div class="line">    <span class="built_in">console</span>.log(p1.constructor == Person,<span class="string">"验证构造器指向"</span>);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p><strong>全局变量方式实现单例-改进版</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> Person;</div><div class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//01 提供一个局部变量instance</span></div><div class="line">        <span class="keyword">var</span> instance;</div><div class="line">        Person = <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (instance)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> instance;</div><div class="line">            &#125;</div><div class="line">            instance = <span class="keyword">this</span>;</div><div class="line">            <span class="keyword">this</span>.name = <span class="string">"默认的名字"</span>;</div><div class="line">            <span class="keyword">this</span>.age = <span class="number">66</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;)();</div><div class="line">    <span class="comment">//创建对象</span></div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</div><div class="line">    <span class="built_in">console</span>.log(p1 == p2);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>说明：<code>通过即时函数来限定作用域,外部无法修改内部instance的值(现在是一个局部变量)</code></p>
<h1 id="工厂模式简单说明"><a href="#工厂模式简单说明" class="headerlink" title="工厂模式简单说明"></a>工厂模式简单说明</h1><pre><code>工厂模式的目的是用于创建对象,通常在类或者是类的静态方法中实现。
</code></pre><p><strong>工厂模式的目标</strong></p>
<pre><code>01 用一套方法去创建相似的目标。
02 在编译时不知道具体类型的情况下,为用户提供创建对象的接口
</code></pre><p><strong>工厂模式实现过程</strong></p>
<pre><code>01 提供一个父构造函数
02 在父构造函数的原型上添加共享的方法
03 在父构造函数身上提供一个静态方法(静态工厂方法)
    001 先获取参数(产品类型)
    002 判断构造函数是否存在(容错性处理)
    003 设置原型链继承:设置子构造函数的原型对象为父构造函数的一个实例对象(目的是为了让子构造函数创建的对象拥有父构造函数上面实例属性和原型属性)
    004 使用子构造函数创建实例对象
    005 返回新创建的实例对象
04 定义特定的工厂客户(静态方法)
05 通过父构造函数的静态工厂方法来创建产品对象
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供一个父构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">PhoneMaker</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="comment">//02 在父构造函数的原型上添加共享的方法</span></div><div class="line">    PhoneMaker.prototype.callPhoneDes = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"手机的特点是:  "</span> + <span class="keyword">this</span>.des);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 在父构造函数身上提供一个静态方法(静态工厂方法)</span></div><div class="line">    PhoneMaker.factory = <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">        <span class="comment">//001 先获取参数(产品类型)</span></div><div class="line">        <span class="keyword">var</span> typeStr = type;</div><div class="line">        <span class="comment">//002 判断构造函数是否存在(容错性处理)</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> PhoneMaker[typeStr] !== <span class="string">'function'</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="string">"Error 对应的构造函数不存在,不能生产该种类型的产品"</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//003 设置原型链继承</span></div><div class="line">        PhoneMaker[typeStr].prototype = <span class="keyword">new</span> PhoneMaker();</div><div class="line">        <span class="comment">//004 使用子构造函数创建实例对象</span></div><div class="line">        <span class="keyword">var</span> newPhone = <span class="keyword">new</span>  PhoneMaker[typeStr]();</div><div class="line">        <span class="comment">//005 返回新创建的实例对象</span></div><div class="line">        <span class="keyword">return</span> newPhone;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//定义特定的工厂客户(静态方法)</span></div><div class="line">    PhoneMaker.iphone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.des = <span class="string">"最安全稳定的系统"</span>;</div><div class="line">    &#125;</div><div class="line">    PhoneMaker.oppo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.des = <span class="string">"充当五分钟,通话两小时"</span>;</div><div class="line">    &#125;</div><div class="line">    PhoneMaker.vivo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.des = <span class="string">"vivo手机,你的音乐手机"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//通过父构造函数的静态工厂方法来创建产品对象</span></div><div class="line">    <span class="keyword">var</span> vivo = PhoneMaker.factory(<span class="string">'vivo'</span>);</div><div class="line">    <span class="keyword">var</span> iphone = PhoneMaker.factory(<span class="string">'iphone'</span>);</div><div class="line">    <span class="keyword">var</span> oppo = PhoneMaker.factory(<span class="string">'oppo'</span>);</div><div class="line">    vivo.callPhoneDes();</div><div class="line">    oppo.callPhoneDes();</div><div class="line">    iphone.callPhoneDes();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<h1 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h1><p><strong>观察者模式</strong><br>观察者模式又名为发布-订阅者模式，它定义了对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。</p>
<p><strong>观察者模式的特点（优点）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">01 观察者模式可以广泛应用于异步编程中，这是一种替代传递回调函数的方案</div><div class="line">02 观察者模式可以取代对象之间硬性编码的通知机制，一个对象不再是显示的调用另外一个对象的接口，这种模式让两个对象松耦合的联系在一起，它们不需要清楚彼此的实现细节就能够相互通信。</div><div class="line">03 在这种设计模式中，不再是一个对象调用另外一个对象的方法，而是一个对象订阅另一个对象的特定活动并且在状态改变后获得通知</div></pre></td></tr></table></figure></p>
<p><strong>模型</strong><br>01 订阅者也称为<code>观察者</code><br>02 被观察的对象称为<code>发布者</code>或者是主题<br>03 当发生一个重要事件的时候，发布者将会通知所有订阅者并且经常以事件的形式来传递消息。<br>示例代码<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提取成公共的发行者对象</span></div><div class="line">    <span class="keyword">var</span> publisher = &#123;</div><div class="line">        <span class="attr">users</span>:&#123;</div><div class="line">            <span class="attr">default</span>:[]</div><div class="line">        &#125;,   <span class="comment">//所有的订阅者对象</span></div><div class="line">        addUser:<span class="function"><span class="keyword">function</span> (<span class="params">fn,type</span>) </span>&#123;</div><div class="line">            <span class="comment">//对订阅的类型进行判断</span></div><div class="line">            <span class="keyword">var</span> type = type || <span class="string">"default"</span>;</div><div class="line">            <span class="comment">//如果是新的订阅类型,那么我们需要做初始化的处理</span></div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.users[type] == <span class="literal">undefined</span>)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">this</span>.users[type] = [];</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.users[type].push(fn);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">removeUser</span>:<span class="function"><span class="keyword">function</span> (<span class="params">fn,type</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.tool(type,<span class="string">"removerUser"</span>,fn);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">publish</span>:<span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.tool(type,<span class="string">"publish"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">tool</span>:<span class="function"><span class="keyword">function</span> (<span class="params">type,funcType,fn</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> type = type || <span class="string">"default"</span>;</div><div class="line">            <span class="keyword">var</span> users = <span class="keyword">this</span>.users[type];</div><div class="line">            <span class="keyword">if</span> (users == <span class="literal">undefined</span>)</div><div class="line">            &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"当前没有任何订阅者"</span>);</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; users.length; i++) &#123;</div><div class="line">                <span class="keyword">if</span> (funcType == <span class="string">'publish'</span>)</div><div class="line">                &#123;</div><div class="line">                    users[i]()</div><div class="line">                &#125;<span class="keyword">else</span></div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span> (users[i] == fn)</div><div class="line">                    &#123;</div><div class="line">                        users.splice(i, <span class="number">1</span>);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//02 提供一个工具函数,能够利用发行者对象的模板来快速创建新的发布者</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">makePaper</span>(<span class="params">o</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> publisher) &#123;</div><div class="line">            <span class="keyword">if</span> (publisher.hasOwnProperty(i) &amp;&amp; <span class="keyword">typeof</span> publisher[i] == <span class="string">'function'</span>)</div><div class="line">            &#123;</div><div class="line">                o[i] = publisher[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        o.users = &#123;<span class="attr">default</span>:[]&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建发布者</span></div><div class="line">    <span class="keyword">var</span> paper1 = &#123;</div><div class="line">        <span class="attr">day</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.publish();</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">month</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.publish(<span class="string">"month"</span>)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">year</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.publish(<span class="string">"year"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//把某个对象编程一个发布者</span></div><div class="line">    makePaper(paper1);</div><div class="line">    <span class="comment">//04 创建订阅者(当发布者发布消息的时候,订阅者能够收到信息--自动调用订阅者的方法)</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">lookDayNews</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"obj - 查看最新的日报信息"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">lookImageNews</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"obj - 查看图片信息"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//05 设置订阅</span></div><div class="line">    paper1.addUser(obj.lookDayNews);</div><div class="line">    paper1.addUser(obj.lookImageNews,<span class="string">'month'</span>);</div><div class="line">    paper1.day();</div><div class="line">    paper1.month();</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>因本人能力有限，教程中难免出现疏忽，对此带来的不便敬请见谅。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.afanail.com/2016/12/29/javaScript简明教程（全）/" data-id="cj5qnhfwm0042jsypz4qmmcfa" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/简明教程/">简明教程</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2017/02/12/webpack-之路/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Webpack2.x踩坑与总结
        
      </div>
    </a>
  
  
    <a href="/2016/11/11/有趣的ChromeDevTools/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">有趣的Chrome DevTools</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript的范围"><span class="toc-number">1.</span> <span class="toc-text">JavaScript的范围</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#BOM简单说明"><span class="toc-number">1.1.</span> <span class="toc-text">BOM简单说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM简单说明"><span class="toc-number">1.2.</span> <span class="toc-text">DOM简单说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ECMAScript简单说明"><span class="toc-number">1.3.</span> <span class="toc-text">ECMAScript简单说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#javascript语法"><span class="toc-number">2.</span> <span class="toc-text">javascript语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript数据类型"><span class="toc-number">2.1.</span> <span class="toc-text">javascript数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript部分操作符的说明"><span class="toc-number">2.2.</span> <span class="toc-text">javascript部分操作符的说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一元操作符"><span class="toc-number">2.2.1.</span> <span class="toc-text">一元操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#位操作符"><span class="toc-number">2.2.2.</span> <span class="toc-text">位操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布尔操作符"><span class="toc-number">2.2.3.</span> <span class="toc-text">布尔操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#乘性操作符"><span class="toc-number">2.2.4.</span> <span class="toc-text">乘性操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加性操作符"><span class="toc-number">2.2.5.</span> <span class="toc-text">加性操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关系操作符"><span class="toc-number">2.2.6.</span> <span class="toc-text">关系操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#相等操作符"><span class="toc-number">2.2.7.</span> <span class="toc-text">相等操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件操作符"><span class="toc-number">2.2.8.</span> <span class="toc-text">条件操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#赋值操作符"><span class="toc-number">2.2.9.</span> <span class="toc-text">赋值操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#值类型和引用类型"><span class="toc-number">2.2.10.</span> <span class="toc-text">值类型和引用类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象的动态特性"><span class="toc-number">2.3.</span> <span class="toc-text">对象的动态特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关键字in和delete的使用"><span class="toc-number">2.4.</span> <span class="toc-text">关键字in和delete的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环和分支"><span class="toc-number">2.5.</span> <span class="toc-text">循环和分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调试工具的使用"><span class="toc-number">2.6.</span> <span class="toc-text">调试工具的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异常处理"><span class="toc-number">2.7.</span> <span class="toc-text">异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM操作"><span class="toc-number">2.8.</span> <span class="toc-text">DOM操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面向对象编程"><span class="toc-number">3.</span> <span class="toc-text">面向对象编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#面向层过程和面向对象编程"><span class="toc-number">3.1.</span> <span class="toc-text">面向层过程和面向对象编程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面向对象编程的相关概念"><span class="toc-number">3.2.</span> <span class="toc-text">面向对象编程的相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面向对象的三大特性"><span class="toc-number">3.3.</span> <span class="toc-text">面向对象的三大特性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#创建对象的方法"><span class="toc-number">4.</span> <span class="toc-text">创建对象的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字面量方式创建对象"><span class="toc-number">4.1.</span> <span class="toc-text">字面量方式创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内置构造函数创建对象"><span class="toc-number">4.2.</span> <span class="toc-text">内置构造函数创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工厂函数创建对象"><span class="toc-number">4.3.</span> <span class="toc-text">工厂函数创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义构造函数创建对象"><span class="toc-number">4.4.</span> <span class="toc-text">自定义构造函数创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#原型对象"><span class="toc-number">4.5.</span> <span class="toc-text">原型对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#继承"><span class="toc-number">5.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#相关方法"><span class="toc-number">5.1.</span> <span class="toc-text">相关方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hasOwnProperty和in属性操作"><span class="toc-number">5.1.1.</span> <span class="toc-text">hasOwnProperty和in属性操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#constructor构造器属性"><span class="toc-number">5.1.2.</span> <span class="toc-text">constructor构造器属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isprotoTypeOf和instance"><span class="toc-number">5.1.3.</span> <span class="toc-text">isprotoTypeOf和instance</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#继承-1"><span class="toc-number">5.2.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#继承基本概念"><span class="toc-number">5.2.1.</span> <span class="toc-text">继承基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原型式继承"><span class="toc-number">5.2.2.</span> <span class="toc-text">原型式继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原型链继承"><span class="toc-number">5.2.3.</span> <span class="toc-text">原型链继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#经典继承（借用构造函数）"><span class="toc-number">5.2.4.</span> <span class="toc-text">经典继承（借用构造函数）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合继承"><span class="toc-number">5.2.5.</span> <span class="toc-text">组合继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本包装类型"><span class="toc-number">5.2.6.</span> <span class="toc-text">基本包装类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#原型链及相关属性方法简单说明"><span class="toc-number">6.</span> <span class="toc-text">原型链及相关属性方法简单说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#原型链"><span class="toc-number">6.1.</span> <span class="toc-text">原型链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Object对象"><span class="toc-number">6.2.</span> <span class="toc-text">Object对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Object-prototype"><span class="toc-number">6.3.</span> <span class="toc-text">Object.prototype</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#静态成员和实例成员"><span class="toc-number">6.4.</span> <span class="toc-text">静态成员和实例成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function构造函数"><span class="toc-number">6.5.</span> <span class="toc-text">Function构造函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arguments、length和callee"><span class="toc-number">6.6.</span> <span class="toc-text">arguments、length和callee</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function的应用"><span class="toc-number">6.7.</span> <span class="toc-text">Function的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#eval-简单说明"><span class="toc-number">6.8.</span> <span class="toc-text">eval 简单说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-prototype原型链"><span class="toc-number">6.9.</span> <span class="toc-text">Function.prototype原型链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象的拷贝操作"><span class="toc-number">6.10.</span> <span class="toc-text">对象的拷贝操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Number原型扩展"><span class="toc-number">6.11.</span> <span class="toc-text">Number原型扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#With语句"><span class="toc-number">6.12.</span> <span class="toc-text">With语句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#变量和函数"><span class="toc-number">7.</span> <span class="toc-text">变量和函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#严格模式"><span class="toc-number">8.</span> <span class="toc-text">严格模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#严格模式使用注意"><span class="toc-number">8.1.</span> <span class="toc-text">严格模式使用注意</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#作用域"><span class="toc-number">9.</span> <span class="toc-text">作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#变量和函数提升"><span class="toc-number">9.1.</span> <span class="toc-text">变量和函数提升</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#作用域链"><span class="toc-number">10.</span> <span class="toc-text">作用域链</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#作用域链绘图"><span class="toc-number">11.</span> <span class="toc-text">作用域链绘图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#作用域注意点和变量搜索原则"><span class="toc-number">11.1.</span> <span class="toc-text">作用域注意点和变量搜索原则</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#闭包"><span class="toc-number">12.</span> <span class="toc-text">闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#闭包获取数据"><span class="toc-number">12.1.</span> <span class="toc-text">闭包获取数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#闭包的使用注意"><span class="toc-number">12.2.</span> <span class="toc-text">闭包的使用注意</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#函数属性缓存"><span class="toc-number">13.</span> <span class="toc-text">函数属性缓存</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#命名空间模式"><span class="toc-number">14.</span> <span class="toc-text">命名空间模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#如何实现命名空间"><span class="toc-number">14.1.</span> <span class="toc-text">如何实现命名空间</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#设计模式简单说明"><span class="toc-number">15.</span> <span class="toc-text">设计模式简单说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设计模式的分类"><span class="toc-number">15.1.</span> <span class="toc-text">设计模式的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单例模式的思想"><span class="toc-number">15.2.</span> <span class="toc-text">单例模式的思想</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript中的单例模式"><span class="toc-number">15.3.</span> <span class="toc-text">JavaScript中的单例模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#工厂模式简单说明"><span class="toc-number">16.</span> <span class="toc-text">工厂模式简单说明</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#观察者模式"><span class="toc-number">17.</span> <span class="toc-text">观察者模式</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 Afanail&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;zjfapk@163.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>