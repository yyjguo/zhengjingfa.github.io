<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>0到1实现简单的jQuery城市选择控件 | Afanail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="好久没有写博客了，最近忙着学习后端的相关知识。感觉数据库相关知识还给了大学老师。SQL虽然简单，但是越到后面越难，特别是你要考虑性能之类的。要写好SQL语句也是有一定的难度的。上一次说分享一下如何封装jQuery插件，因为最近在写后台的代码。所以抽时间来总结一下，巩固一下基础知识。所以，这是非常简单的jQuery插件。">
<meta name="keywords" content="jQuery插件">
<meta property="og:type" content="article">
<meta property="og:title" content="0到1实现简单的jQuery城市选择控件">
<meta property="og:url" content="http://www.afanail.com/2017/09/30/0到1实现简单的jQuery城市选择控件/index.html">
<meta property="og:site_name" content="Afanail">
<meta property="og:description" content="好久没有写博客了，最近忙着学习后端的相关知识。感觉数据库相关知识还给了大学老师。SQL虽然简单，但是越到后面越难，特别是你要考虑性能之类的。要写好SQL语句也是有一定的难度的。上一次说分享一下如何封装jQuery插件，因为最近在写后台的代码。所以抽时间来总结一下，巩固一下基础知识。所以，这是非常简单的jQuery插件。">
<meta property="og:image" content="http://www.afanail.com/assets/img/">
<meta property="og:updated_time" content="2017-10-04T11:06:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="0到1实现简单的jQuery城市选择控件">
<meta name="twitter:description" content="好久没有写博客了，最近忙着学习后端的相关知识。感觉数据库相关知识还给了大学老师。SQL虽然简单，但是越到后面越难，特别是你要考虑性能之类的。要写好SQL语句也是有一定的难度的。上一次说分享一下如何封装jQuery插件，因为最近在写后台的代码。所以抽时间来总结一下，巩固一下基础知识。所以，这是非常简单的jQuery插件。">
<meta name="twitter:image" content="http://www.afanail.com/assets/img/">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.afanail.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Afanail</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-0到1实现简单的jQuery城市选择控件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/30/0到1实现简单的jQuery城市选择控件/" class="article-date">
  <time datetime="2017-09-30T11:19:47.000Z" itemprop="datePublished">2017-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      0到1实现简单的jQuery城市选择控件
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>好久没有写博客了，最近忙着学习后端的相关知识。感觉数据库相关知识还给了大学老师。SQL虽然简单，但是越到后面越难，特别是你要考虑性能之类的。要写好SQL语句也是有一定的难度的。上一次说分享一下如何封装jQuery插件，因为最近在写后台的代码。所以抽时间来总结一下，巩固一下基础知识。所以，这是非常简单的jQuery插件。<a id="more"></a></p>
<h1 id="静态页面"><a href="#静态页面" class="headerlink" title="静态页面"></a>静态页面</h1><p>很多后端的同事问我，如何快速的入前端的门槛。我给他们的建议是写淘宝京东的页面。多写静态页面，写着写着就入门了。凡事开头难，中间难，最后难。不过今天这个确实比想象的简单。首先看一下完成的效果图。</p>
<p><img src="/assets/img/" alt="城市选择"></p>
<h1 id="插件特性"><a href="#插件特性" class="headerlink" title="插件特性"></a>插件特性</h1><p>1.单例<br>2.支持搜索(借用了阿里的API)<br>3.搜索框函数节流<br>4.兼容IE7+</p>
<h1 id="插件使用"><a href="#插件使用" class="headerlink" title="插件使用"></a>插件使用</h1><hr>
<p>一，引进插件（依赖jquery）<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;kuCity.css&quot;&gt;</code><br><code>&lt;script src=&quot;http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;kuCity.js&quot;&gt;&lt;/script&gt;</code><br>首先让我们先看一下布局。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>然后是css, 代码中有相关的注释。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div></pre></td><td class="code"><pre><div class="line">*&#123;</div><div class="line">    margin:0;</div><div class="line">    padding:0;</div><div class="line">&#125;</div><div class="line">.kucity&#123;</div><div class="line">    font-family: "微软雅黑";</div><div class="line">    font-size:12px;</div><div class="line">    position: absolute;</div><div class="line">    top:50px;</div><div class="line">    left:50px;</div><div class="line">    width: 317px;</div><div class="line">    *border:1px solid #dedede;</div><div class="line">    box-shadow: 0 0 5px 1px #dedede;</div><div class="line">    padding:10px;</div><div class="line">&#125;</div><div class="line">.kucity h3&#123;</div><div class="line">    font-size:12px;</div><div class="line">    font-weight: normal;</div><div class="line">    color:#666;</div><div class="line">&#125;</div><div class="line">.kucity .kucity_nav&#123;</div><div class="line">    font-size:0;</div><div class="line">    padding-top:10px;</div><div class="line">    list-style: none;</div><div class="line">&#125;</div><div class="line">.kucity .kucity_nav li&#123;</div><div class="line">    cursor: pointer;</div><div class="line">    font-size:12px;</div><div class="line">    margin-left:-1px;</div><div class="line">    border:1px solid  #dedede;</div><div class="line">    display: inline-block;</div><div class="line">    color:#666;</div><div class="line">    padding:3px 7px;</div><div class="line">    transition:all .2s;</div><div class="line">&#125;</div><div class="line">.kucity .kucity_nav li.active&#123;</div><div class="line">    background-color: rgb(4, 168, 253);</div><div class="line">    border-color:rgb(4, 168, 253);</div><div class="line">    color:#fff;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*kucity_body*/</div><div class="line"></div><div class="line">.kucity .kucity_body&#123;</div><div class="line">    padding:10px 5px;</div><div class="line">    max-height: 230px;</div><div class="line">    overflow-y:auto; </div><div class="line">&#125;</div><div class="line">.kucity .kucity_body .kucity_item&#123;</div><div class="line">    display: none;    </div><div class="line">&#125;</div><div class="line">.kucity .kucity_body .kucity_item.active&#123;</div><div class="line">    display: block;</div><div class="line">&#125;</div><div class="line">.kucity_item dt, .kucity_item dd&#123;</div><div class="line">    display: inline-block;</div><div class="line">&#125;</div><div class="line">.kucity_item dl&#123;</div><div class="line">    padding:3px 0;</div><div class="line">&#125;</div><div class="line">.kucity_item dt&#123;</div><div class="line">    color:rgb(32, 117, 249);</div><div class="line">    padding-top:3px;</div><div class="line">    vertical-align: top;</div><div class="line">    width:10%;</div><div class="line">&#125;</div><div class="line">.kucity_item dd&#123;</div><div class="line">    width:90%;</div><div class="line">&#125;</div><div class="line">.kucity_item dd span&#123;</div><div class="line">    width: 24%;</div><div class="line">    display: inline-block;</div><div class="line">    cursor: pointer;</div><div class="line">    padding:3px 0;</div><div class="line">    border:1px solid #fff;</div><div class="line">    transition:all .3s;</div><div class="line">&#125;</div><div class="line">.kucity_item dd span:hover&#123;</div><div class="line">    color:rgb(4, 168, 253);</div><div class="line">    text-decoration: underline;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.kucity .result&#123;</div><div class="line">    list-style: none;</div><div class="line">&#125;</div><div class="line">.kucity .result li&#123;</div><div class="line">    padding:5px;</div><div class="line">    background-color: #fff;</div><div class="line">    margin:2px 0;</div><div class="line">    cursor: pointer;</div><div class="line">    overflow: hidden;</div><div class="line">&#125;</div><div class="line">.kucity .result li.active, .kucity .result li.active .letter&#123;</div><div class="line">    background-color: rgb(4, 168, 253);</div><div class="line">    color:#fff;</div><div class="line">&#125;</div><div class="line">.kucity .result li .letter&#123;</div><div class="line">    float:right;</div><div class="line">    color:#999;</div><div class="line">&#125;</div><div class="line">.kucity .result li .noresult&#123;</div><div class="line">    padding:0 8px;</div><div class="line">    color:rgb(253, 130, 27);</div><div class="line">&#125;</div><div class="line">.kucity .result li:hover, .kucity .result li:hover &gt; .letter&#123;</div><div class="line">    background-color: rgb(4, 168, 253);</div><div class="line">    color:#fff!important;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*滚动条*/</div><div class="line">.kucity_body::-webkit-scrollbar  </div><div class="line">&#123;  </div><div class="line">    width: 5px;  </div><div class="line">    height: 16px;  </div><div class="line">    background-color: #F5F5F5;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">/*定义滚动条轨道 内阴影+圆角*/  </div><div class="line">.kucity_body::-webkit-scrollbar-track  </div><div class="line">&#123;  </div><div class="line">    border-radius: 10px;  </div><div class="line">    background-color: #F5F5F5;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">/*定义滑块 内阴影+圆角*/  </div><div class="line">.kucity_body::-webkit-scrollbar-thumb  </div><div class="line">&#123;  </div><div class="line">    border-radius: 5px;  </div><div class="line">    background-color: #dedede;  </div><div class="line">&#125; </div><div class="line">.kucity_body::-webkit-scrollbar-thumb:hover&#123;</div><div class="line">    background-color: #999;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接下来是我们编写的jQuery插件。 首先是获取数据，可以利用mock.js来模拟数据。这里我们先写死数，到联调时再换相关接口数据。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</div><div class="line">  <span class="comment">// 对接口前模拟数据</span></div><div class="line">    <span class="keyword">var</span> allCities = [<span class="string">'北京|beijing|bj'</span>, <span class="string">'上海|shanghai|sh'</span>, <span class="string">'重庆|chongqing|cq'</span>, <span class="string">'深圳|shenzhen|sz'</span>, <span class="string">'广州|guangzhou|gz'</span>, <span class="string">'杭州|hangzhou|hz'</span>,</div><div class="line">        <span class="string">'南京|nanjing|nj'</span>, <span class="string">'苏州|shuzhou|sz'</span>, <span class="string">'天津|tianjin|tj'</span>, <span class="string">'成都|chengdu|cd'</span>, <span class="string">'南昌|nanchang|nc'</span>, <span class="string">'三亚|sanya|sy'</span>, <span class="string">'青岛|qingdao|qd'</span>,</div><div class="line">        <span class="string">'厦门|xiamen|xm'</span>, <span class="string">'西安|xian|xa'</span>, <span class="string">'长沙|changsha|cs'</span>, <span class="string">'合肥|hefei|hf'</span>, <span class="string">'西藏|xizang|xz'</span>, <span class="string">'内蒙古|neimenggu|nmg'</span>, <span class="string">'安庆|anqing|aq'</span>, <span class="string">'阿泰勒|ataile|atl'</span>, <span class="string">'安康|ankang|ak'</span>,</div><div class="line">        <span class="string">'阿克苏|akesu|aks'</span>, <span class="string">'包头|baotou|bt'</span>, <span class="string">'北海|beihai|bh'</span>, <span class="string">'百色|baise|bs'</span>, <span class="string">'保山|baoshan|bs'</span>, <span class="string">'长治|changzhi|cz'</span>, <span class="string">'长春|changchun|cc'</span>, <span class="string">'常州|changzhou|cz'</span>, <span class="string">'昌都|changdu|cd'</span>,</div><div class="line">        <span class="string">'朝阳|chaoyang|cy'</span>, <span class="string">'常德|changde|cd'</span>, <span class="string">'长白山|changbaishan|cbs'</span>, <span class="string">'赤峰|chifeng|cf'</span>, <span class="string">'大同|datong|dt'</span>, <span class="string">'大连|dalian|dl'</span>, <span class="string">'达县|daxian|dx'</span>, <span class="string">'东营|dongying|dy'</span>, <span class="string">'大庆|daqing|dq'</span>, <span class="string">'丹东|dandong|dd'</span>,</div><div class="line">        <span class="string">'大理|dali|dl'</span>, <span class="string">'敦煌|dunhuang|dh'</span>, <span class="string">'鄂尔多斯|eerduosi|eeds'</span>, <span class="string">'恩施|enshi|es'</span>, <span class="string">'福州|fuzhou|fz'</span>, <span class="string">'阜阳|fuyang|fy'</span>, <span class="string">'贵阳|guiyang|gy'</span>,</div><div class="line">        <span class="string">'桂林|guilin|gl'</span>, <span class="string">'广元|guangyuan|gy'</span>, <span class="string">'格尔木|geermu|gem'</span>, <span class="string">'呼和浩特|huhehaote|hhht'</span>, <span class="string">'哈密|hami|hm'</span>,</div><div class="line">        <span class="string">'黑河|heihe|hh'</span>, <span class="string">'海拉尔|hailaer|hle'</span>, <span class="string">'哈尔滨|haerbin|heb'</span>, <span class="string">'海口|haikou|hk'</span>, <span class="string">'黄山|huangshan|hs'</span>, <span class="string">'邯郸|handan|hd'</span>,</div><div class="line">        <span class="string">'汉中|hanzhong|hz'</span>, <span class="string">'和田|hetian|ht'</span>, <span class="string">'晋江|jinjiang|jj'</span>, <span class="string">'锦州|jinzhou|jz'</span>, <span class="string">'景德镇|jingdezhen|jdz'</span>,</div><div class="line">        <span class="string">'嘉峪关|jiayuguan|jyg'</span>, <span class="string">'井冈山|jinggangshan|jgs'</span>, <span class="string">'济宁|jining|jn'</span>, <span class="string">'九江|jiujiang|jj'</span>, <span class="string">'佳木斯|jiamusi|jms'</span>, <span class="string">'济南|jinan|jn'</span>,</div><div class="line">        <span class="string">'喀什|kashi|ks'</span>, <span class="string">'昆明|kunming|km'</span>, <span class="string">'康定|kangding|kd'</span>, <span class="string">'克拉玛依|kelamayi|klmy'</span>, <span class="string">'库尔勒|kuerle|kel'</span>, <span class="string">'库车|kuche|kc'</span>, <span class="string">'兰州|lanzhou|lz'</span>,</div><div class="line">        <span class="string">'洛阳|luoyang|ly'</span>, <span class="string">'丽江|lijiang|lj'</span>, <span class="string">'林芝|linzhi|lz'</span>, <span class="string">'柳州|liuzhou|lz'</span>, <span class="string">'泸州|luzhou|lz'</span>, <span class="string">'连云港|lianyungang|lyg'</span>, <span class="string">'黎平|liping|lp'</span>,</div><div class="line">        <span class="string">'连成|liancheng|lc'</span>, <span class="string">'拉萨|lasa|ls'</span>, <span class="string">'临沧|lincang|lc'</span>, <span class="string">'临沂|linyi|ly'</span>, <span class="string">'芒市|mangshi|ms'</span>, <span class="string">'牡丹江|mudanjiang|mdj'</span>, <span class="string">'满洲里|manzhouli|mzl'</span>, <span class="string">'绵阳|mianyang|my'</span>,</div><div class="line">        <span class="string">'梅县|meixian|mx'</span>, <span class="string">'漠河|mohe|mh'</span>, <span class="string">'南充|nanchong|nc'</span>, <span class="string">'南宁|nanning|nn'</span>, <span class="string">'南阳|nanyang|ny'</span>, <span class="string">'南通|nantong|nt'</span>, <span class="string">'那拉提|nalati|nlt'</span>,</div><div class="line">        <span class="string">'宁波|ningbo|nb'</span>, <span class="string">'攀枝花|panzhihua|pzh'</span>, <span class="string">'衢州|quzhou|qz'</span>, <span class="string">'秦皇岛|qinhuangdao|qhd'</span>, <span class="string">'庆阳|qingyang|qy'</span>, <span class="string">'齐齐哈尔|qiqihaer|qqhe'</span>,</div><div class="line">        <span class="string">'石家庄|shijiazhuang|sjz'</span>, <span class="string">'沈阳|shenyang|sy'</span>, <span class="string">'思茅|simao|sm'</span>, <span class="string">'铜仁|tongren|tr'</span>, <span class="string">'塔城|tacheng|tc'</span>, <span class="string">'腾冲|tengchong|tc'</span>, <span class="string">'台州|taizhou|tz'</span>,</div><div class="line">        <span class="string">'通辽|tongliao|tl'</span>, <span class="string">'太原|taiyuan|ty'</span>, <span class="string">'威海|weihai|wh'</span>, <span class="string">'梧州|wuzhou|wz'</span>, <span class="string">'文山|wenshan|ws'</span>, <span class="string">'无锡|wuxi|wx'</span>, <span class="string">'潍坊|weifang|wf'</span>, <span class="string">'武夷山|wuyishan|wys'</span>, <span class="string">'乌兰浩特|wulanhaote|wlht'</span>,</div><div class="line">        <span class="string">'温州|wenzhou|wz'</span>, <span class="string">'乌鲁木齐|wulumuqi|wlmq'</span>, <span class="string">'万州|wanzhou|wz'</span>, <span class="string">'乌海|wuhai|wh'</span>, <span class="string">'兴义|xingyi|xy'</span>, <span class="string">'西昌|xichang|xc'</span>, <span class="string">'襄樊|xiangfan|xf'</span>,</div><div class="line">        <span class="string">'西宁|xining|xn'</span>, <span class="string">'锡林浩特|xilinhaote|xlht'</span>, <span class="string">'西双版纳|xishuangbanna|xsbn'</span>, <span class="string">'徐州|xuzhou|xz'</span>, <span class="string">'义乌|yiwu|yw'</span>, <span class="string">'永州|yongzhou|yz'</span>, <span class="string">'榆林|yulin|yl'</span>, <span class="string">'延安|yanan|ya'</span>, <span class="string">'运城|yuncheng|yc'</span>,</div><div class="line">        <span class="string">'烟台|yantai|yt'</span>, <span class="string">'银川|yinchuan|yc'</span>, <span class="string">'宜昌|yichang|yc'</span>, <span class="string">'宜宾|yibin|yb'</span>, <span class="string">'盐城|yancheng|yc'</span>, <span class="string">'延吉|yanji|yj'</span>, <span class="string">'玉树|yushu|ys'</span>, <span class="string">'伊宁|yining|yn'</span>, <span class="string">'珠海|zhuhai|zh'</span>, <span class="string">'昭通|zhaotong|zt'</span>,</div><div class="line">        <span class="string">'张家界|zhangjiajie|zjj'</span>, <span class="string">'舟山|zhoushan|zs'</span>, <span class="string">'郑州|zhengzhou|zz'</span>, <span class="string">'中卫|zhongwei|zw'</span>, <span class="string">'芷江|zhijiang|zj'</span>, <span class="string">'湛江|zhanjiang|zj'</span></div><div class="line">    ];</div><div class="line">    <span class="keyword">var</span> regEx = <span class="regexp">/^([\u4E00-\u9FA5\uf900-\ufa2d]+)\|(\w+)\|(\w)\w*$/i</span>, <span class="comment">// 匹配汉字，拼音</span></div><div class="line">        regExChiese = <span class="regexp">/([\u4E00-\u9FA5\uf900-\ufa2d]+)/</span>, <span class="comment">// 只匹配拼音</span></div><div class="line">        reg_ah = <span class="regexp">/^[a-h]$/i</span>, <span class="comment">// 匹配首字母为 a-h</span></div><div class="line">        reg_ip = <span class="regexp">/^[i-p]/i</span>, <span class="comment">// 匹配首字母为 i-p</span></div><div class="line">        reg_qz = <span class="regexp">/^[q-z]/i</span>; <span class="comment">// 匹配首字母为 q-z</span></div><div class="line"></div><div class="line">    <span class="comment">//构建城市分类字面量</span></div><div class="line">    <span class="keyword">var</span> city = &#123;</div><div class="line">        <span class="attr">hot</span>: &#123;&#125;,</div><div class="line">        <span class="attr">ABCDEFGH</span>: &#123;&#125;,</div><div class="line">        <span class="attr">IJKLMNOP</span>: &#123;&#125;,</div><div class="line">        <span class="attr">QRSTUVWXYZ</span>: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">//城市按首字母分类，填充到分类字面量</span></div><div class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = allCities.length; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">var</span> part = regEx.exec(allCities[i]),</div><div class="line">                en = part[<span class="number">1</span>], <span class="comment">//中文名</span></div><div class="line">                letter = part[<span class="number">2</span>], <span class="comment">//拼音</span></div><div class="line">                spletter = part[<span class="number">3</span>], <span class="comment">//拼音简写</span></div><div class="line">                first = letter[<span class="number">0</span>].toUpperCase(), <span class="comment">//拼音首字母</span></div><div class="line">                ltPart; <span class="comment">//当前字母下的城市</span></div><div class="line"></div><div class="line">            <span class="keyword">if</span> (reg_ah.test(first)) &#123;</div><div class="line">                ltPart = <span class="string">'ABCDEFGH'</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reg_ip.test(first)) &#123;</div><div class="line">                ltPart = <span class="string">'IJKLMNOP'</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reg_qz.test(first)) &#123;</div><div class="line">                ltPart = <span class="string">'QRSTUVWXYZ'</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            city[ltPart][first] ? city[ltPart][first].push(en) : (city[ltPart][first] = [], city[ltPart][first].push(en));</div><div class="line"></div><div class="line">            <span class="comment">//设置前16个城市为热门城市</span></div><div class="line">            <span class="keyword">if</span> (i &lt; <span class="number">16</span>) &#123;</div><div class="line">                city.hot[<span class="string">'hot'</span>] ? city.hot[<span class="string">'hot'</span>].push(part[<span class="number">1</span>]) : (city.hot[<span class="string">'hot'</span>] = [], city.hot[<span class="string">'hot'</span>].push(part[<span class="number">1</span>]));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)();</div><div class="line"></div><div class="line">    <span class="keyword">var</span> kucity = <span class="literal">null</span>;</div><div class="line">    <span class="comment">// 定义构造函数 KuCity</span></div><div class="line">    <span class="keyword">var</span> KuCity = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.target = target;</div><div class="line">        <span class="keyword">this</span>.container = <span class="literal">null</span>;</div><div class="line">        <span class="keyword">this</span>.resultct = <span class="literal">null</span>;</div><div class="line">        <span class="keyword">this</span>.init();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// KuCity原型对象</span></div><div class="line">    KuCity.prototype = &#123;</div><div class="line">        <span class="attr">constructor</span>: KuCity,</div><div class="line">        <span class="comment">//初始化</span></div><div class="line">        init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.creatItem();</div><div class="line">            <span class="keyword">this</span>.tabChange();</div><div class="line">            <span class="keyword">this</span>.citySelect();</div><div class="line">            <span class="keyword">this</span>.inputSearch();</div><div class="line">            <span class="keyword">this</span>.stopPropagation();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//创建市列表</span></div><div class="line">        creatItem: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> template = <span class="string">'&lt;div class="kucity"&gt;&lt;div class="citybox"&gt;&lt;h3 class="kucity_header"&gt;热门城市(支持汉字/拼音搜索)&lt;/h3&gt;&lt;ul class="kucity_nav"&gt;&lt;li class="active"&gt;热门城市&lt;/li&gt;&lt;li&gt;ABCDEFGH&lt;/li&gt;&lt;li&gt;IJKLMNOP&lt;/li&gt;&lt;li&gt;QRSTUVWXYZ&lt;/li&gt;&lt;/ul&gt;&lt;div class="kucity_body"&gt;&lt;/div&gt;&lt;/div&gt;&lt;ul class="result"&gt;&lt;/ul&gt;&lt;/div&gt;'</span>;</div><div class="line">            $(<span class="string">'body'</span>).append(template);</div><div class="line"></div><div class="line">            <span class="keyword">this</span>.container = $(<span class="string">'.kucity'</span>);</div><div class="line">            <span class="keyword">this</span>.resultct = $(<span class="string">'.result'</span>);</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> group <span class="keyword">in</span> city) &#123;</div><div class="line">                <span class="keyword">var</span> itemKey = [];</div><div class="line"></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> city[group]) &#123;</div><div class="line">                    itemKey.push(item);</div><div class="line">                &#125;</div><div class="line">                itemKey.sort();</div><div class="line">                <span class="keyword">var</span> itembox = $(<span class="string">'&lt;div class="kucity_item"&gt;'</span>);</div><div class="line">                itembox.addClass(group);</div><div class="line"></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, iLen = itemKey.length; i &lt; iLen; i++) &#123;</div><div class="line"></div><div class="line">                    <span class="keyword">var</span> dl = $(<span class="string">'&lt;dl&gt;'</span>),</div><div class="line">                        dt = <span class="string">'&lt;dt&gt;'</span> + (itemKey[i] == <span class="string">'hot'</span> ? <span class="string">''</span> : itemKey[i]) + <span class="string">'&lt;/dt&gt;'</span>,</div><div class="line">                        dd = $(<span class="string">'&lt;dd&gt;'</span>),</div><div class="line">                        str = <span class="string">''</span>;</div><div class="line"></div><div class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, jLen = city[group][itemKey[i]].length; j &lt; jLen; j++) &#123;</div><div class="line">                        str += <span class="string">'&lt;span&gt;'</span> + city[group][itemKey[i]][j] + <span class="string">'&lt;/span&gt;'</span></div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    dd.append(str);</div><div class="line">                    dl.append(dt).append(dd);</div><div class="line">                    itembox.append(dl);</div><div class="line">                &#125;</div><div class="line">                $(<span class="string">'.kucity_body'</span>).append(itembox);</div><div class="line">                <span class="keyword">this</span>.container.find(<span class="string">'.hot'</span>).addClass(<span class="string">'active'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//列表切换</span></div><div class="line">        tabChange: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            $(<span class="string">'.kucity_nav'</span>).on(<span class="string">'click'</span>, <span class="string">'li'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> current = $(e.target),</div><div class="line">                    index = current.index();</div><div class="line"></div><div class="line">                current.addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);</div><div class="line">                $(<span class="string">'.kucity_item'</span>).eq(index).addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);</div><div class="line">                $(<span class="string">' .kucity_body'</span>).scrollTop(<span class="number">0</span>);</div><div class="line"></div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//城市选择</span></div><div class="line">        citySelect: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">            $(<span class="string">'.kucity_item dd'</span>).on(<span class="string">'click'</span>, <span class="string">'span'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                self.target.val(($(e.target).text()));</div><div class="line">                self.container.hide();</div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//搜索</span></div><div class="line">        inputSearch: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">            <span class="keyword">this</span>.target.on(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                self.throttle(search, <span class="keyword">this</span>);</div><div class="line">            &#125;)</div><div class="line">            <span class="comment">// 输入框搜索</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">search</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">                <span class="keyword">var</span> container = self.container;</div><div class="line">                self.triggleShow(<span class="literal">false</span>);</div><div class="line">                <span class="keyword">var</span> value = $(<span class="keyword">this</span>).val();</div><div class="line">                <span class="keyword">if</span> (value) &#123;</div><div class="line">                  <span class="comment">// 借用阿里的api接口</span></div><div class="line">                    <span class="keyword">var</span> url = <span class="string">'https://sjipiao.alitrip.com/city_search.do?_ksTS=1439362066383_11337&amp;lines=10&amp;_input_charset=utf-8&amp;needProvince=true&amp;q='</span> + value;</div><div class="line">                    $.ajax(&#123;</div><div class="line">                        <span class="attr">url</span>: url,</div><div class="line">                        <span class="attr">type</span>: <span class="string">'get'</span>,</div><div class="line">                        <span class="attr">dataType</span>: <span class="string">'jsonp'</span></div><div class="line">                    &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">re</span>) </span>&#123;</div><div class="line">                        creatResult(re);</div><div class="line">                    &#125;)</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    self.triggleShow(<span class="literal">true</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// 创建搜索结果选项item</span></div><div class="line">                <span class="function"><span class="keyword">function</span> <span class="title">creatResult</span>(<span class="params">re</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> result = re.result,</div><div class="line">                        len = result.length,</div><div class="line">                        str = <span class="string">''</span>;</div><div class="line">                    <span class="keyword">if</span> (!!len) &#123;</div><div class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">                            str += <span class="string">'&lt;li&gt;&lt;span class="name"&gt;'</span> + result[i].cityName + <span class="string">'&lt;/span&gt;&lt;span class="letter"&gt;'</span> + result[i].py + <span class="string">'&lt;/span&gt;&lt;/li&gt;'</span></div><div class="line">                        &#125;</div><div class="line">                        container.find(<span class="string">'.result'</span>).html(<span class="string">''</span>).html(str).find(<span class="string">'li'</span>).eq(<span class="number">0</span>).addClass(<span class="string">'active'</span>);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        container.find(<span class="string">'.result'</span>).html(<span class="string">'&lt;li&gt;没有找到&lt;span class="noresult"&gt;'</span> + value + <span class="string">'&lt;/span&gt;相关信息&lt;/li&gt;'</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//列表，结果，整体 显示切换</span></div><div class="line">        triggleShow: <span class="function"><span class="keyword">function</span>(<span class="params">open</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> container = <span class="keyword">this</span>.container;</div><div class="line">            <span class="keyword">if</span> (open === <span class="string">'all'</span>) &#123;</div><div class="line">                container.hide()</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (open) &#123;</div><div class="line">                container.find(<span class="string">'.citybox'</span>).show().end().find(<span class="string">'.result'</span>).hide();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                container.find(<span class="string">'.citybox'</span>).hide().end().find(<span class="string">'.result'</span>).show();</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//函数节流</span></div><div class="line">        throttle: <span class="function"><span class="keyword">function</span>(<span class="params">fn, context</span>) </span>&#123;</div><div class="line">            clearTimeout(fn.tId);</div><div class="line">            fn.tId = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                fn.call(context);</div><div class="line">            &#125;, <span class="number">100</span>)</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//阻止事件冒泡</span></div><div class="line">        stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">            <span class="comment">//阻止事件冒泡</span></div><div class="line">            <span class="keyword">this</span>.container.on(<span class="string">'click'</span>, stopPropagation)</div><div class="line">            <span class="keyword">this</span>.target.on(<span class="string">'click'</span>, stopPropagation)</div><div class="line">            <span class="comment">//页面点击 隐藏</span></div><div class="line">            $(<span class="built_in">document</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                self.container.hide();</div><div class="line">            &#125;)</div><div class="line">            <span class="comment">//阻止冒泡，可进一步做兼容性处理</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">stopPropagation</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                e.stopPropagation();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// 对外暴露接口。</span></div><div class="line">    $.fn.kuCity = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> target = $(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        target.on(<span class="string">'focus'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">var</span> top = $(<span class="keyword">this</span>).offset().top + $(<span class="keyword">this</span>).height(),</div><div class="line">                left = $(<span class="keyword">this</span>).offset().left;</div><div class="line"></div><div class="line">            kucity = kucity ? (kucity.container.show(), kucity) : <span class="keyword">new</span> KuCity(target);</div><div class="line">            kucity.container.offset(&#123;</div><div class="line">                <span class="string">'top'</span>: top + <span class="number">10</span>,</div><div class="line">                <span class="string">'left'</span>: left</div><div class="line">            &#125;);</div><div class="line">            </div><div class="line">            kucity.target = $(e.target);</div><div class="line"></div><div class="line">            kucity.triggleShow(<span class="literal">true</span>);</div><div class="line"></div><div class="line">            kucity.resultct.on(<span class="string">'click'</span>, <span class="string">'li'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                kucity.target.val($(<span class="keyword">this</span>).find(<span class="string">'.name'</span>).text());</div><div class="line">                kucity.triggleShow(<span class="string">'all'</span>);</div><div class="line">            &#125;)</div><div class="line"></div><div class="line">        &#125;)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;)(jQuery)</div></pre></td></tr></table></figure></p>
<p>二，使用<br>到这里就结束了，是不是非常简单。<br><code>$(&#39;.search&#39;).kuCity();</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.afanail.com/2017/09/30/0到1实现简单的jQuery城市选择控件/" data-id="cjia9x5030004szyp2fqz21p9" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery插件/">jQuery插件</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2017/10/01/Perl相关/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          perl-learning
        
      </div>
    </a>
  
  
    <a href="/2017/08/15/Perl项目前后端分离？/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Perl项目前后端分离？</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#静态页面"><span class="toc-number">1.</span> <span class="toc-text">静态页面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#插件特性"><span class="toc-number">2.</span> <span class="toc-text">插件特性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#插件使用"><span class="toc-number">3.</span> <span class="toc-text">插件使用</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2016 - 2018 Afanail&nbsp;
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;zjfapk@163.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>